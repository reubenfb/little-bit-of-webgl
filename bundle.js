!function t(e,n,r){function i(a,u){if(!n[a]){if(!e[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n||t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return a[t>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}function o(t,e,n){for(var r,o=[],a=e;a<n;a+=3)r=(t[a]<<16)+(t[a+1]<<8)+t[a+2],o.push(i(r));return o.join("")}n.byteLength=function(t){return 3*t.length/4-r(t)},n.toByteArray=function(t){var e,n,i,o,a,f=t.length;o=r(t),a=new s(3*f/4-o),n=o>0?f-4:f;var c=0;for(e=0;e<n;e+=4)i=u[t.charCodeAt(e)]<<18|u[t.charCodeAt(e+1)]<<12|u[t.charCodeAt(e+2)]<<6|u[t.charCodeAt(e+3)],a[c++]=i>>16&255,a[c++]=i>>8&255,a[c++]=255&i;return 2===o?(i=u[t.charCodeAt(e)]<<2|u[t.charCodeAt(e+1)]>>4,a[c++]=255&i):1===o&&(i=u[t.charCodeAt(e)]<<10|u[t.charCodeAt(e+1)]<<4|u[t.charCodeAt(e+2)]>>2,a[c++]=i>>8&255,a[c++]=255&i),a},n.fromByteArray=function(t){for(var e,n=t.length,r=n%3,i="",u=[],s=0,f=n-r;s<f;s+=16383)u.push(o(t,s,s+16383>f?f:s+16383));return 1===r?(e=t[n-1],i+=a[e>>2],i+=a[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=a[e>>10],i+=a[e>>4&63],i+=a[e<<2&63],i+="="),u.push(i),u.join("")};for(var a=[],u=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,l=f.length;c<l;++c)a[c]=f[c],u[f.charCodeAt(c)]=c;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],2:[function(t,e,n){},{}],3:[function(t,e,n){arguments[4][2][0].apply(n,arguments)},{dup:2}],4:[function(t,e,n){"use strict";function r(t){if(t>$)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=i.prototype,e}function i(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return s(t)}return o(t,e,n)}function o(t,e,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return Y(t)?l(t,e,n):"string"==typeof t?f(t,e):h(t)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,n){return a(t),t<=0?r(t):void 0!==e?"string"==typeof n?r(t).fill(e,n):r(t).fill(e):r(t)}function s(t){return a(t),r(t<0?0:0|d(t))}function f(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!i.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(t,e),o=r(n),a=o.write(t,e);return a!==n&&(o=o.slice(0,a)),o}function c(t){for(var e=t.length<0?0:0|d(t.length),n=r(e),i=0;i<e;i+=1)n[i]=255&t[i];return n}function l(t,e,n){if(e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),r.__proto__=i.prototype,r}function h(t){if(i.isBuffer(t)){var e=0|d(t.length),n=r(e);return 0===n.length?n:(t.copy(n,0,0,e),n)}if(t){if(W(t)||"length"in t)return"number"!=typeof t.length||X(t.length)?r(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=$)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$.toString(16)+" bytes");return 0|t}function p(t,e){if(i.isBuffer(t))return t.length;if(W(t)||Y(t))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return I(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(t).length;default:if(r)return I(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return N(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return C(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,X(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=i.from(e,r)),i.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,u=t.length,s=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,u/=2,s/=2,n/=2}var f;if(i){var c=-1;for(f=n;f<u;f++)if(o(t,f)===o(e,-1===c?0:f-c)){if(-1===c&&(c=f),f-c+1===s)return c*a}else-1!==c&&(f-=f-c),c=-1}else for(n+s>u&&(n=u-s),f=n;f>=0;f--){for(var l=!0,h=0;h<s;h++)if(o(t,f+h)!==o(e,h)){l=!1;break}if(l)return f}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var u=parseInt(e.substr(2*a,2),16);if(X(u))return a;t[n+a]=u}return a}function _(t,e,n,r){return H(I(e,t.length-n),t,n,r)}function x(t,e,n,r){return H(q(e),t,n,r)}function w(t,e,n,r){return x(t,e,n,r)}function M(t,e,n,r){return H(F(e),t,n,r)}function E(t,e,n,r){return H(U(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?G.fromByteArray(t):G.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],a=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=n){var s,f,c,l;switch(u){case 1:o<128&&(a=o);break;case 2:128==(192&(s=t[i+1]))&&(l=(31&o)<<6|63&s)>127&&(a=l);break;case 3:s=t[i+1],f=t[i+2],128==(192&s)&&128==(192&f)&&(l=(15&o)<<12|(63&s)<<6|63&f)>2047&&(l<55296||l>57343)&&(a=l);break;case 4:s=t[i+1],f=t[i+2],c=t[i+3],128==(192&s)&&128==(192&f)&&128==(192&c)&&(l=(15&o)<<18|(63&s)<<12|(63&f)<<6|63&c)>65535&&l<1114112&&(a=l)}}null===a?(a=65533,u=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=u}return A(r)}function A(t){var e=t.length;if(e<=Q)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Q));return n}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function N(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=B(t[o]);return i}function O(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function j(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,o,a){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function D(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,i){return e=+e,n>>>=0,i||D(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),V.write(t,e,n,r,23,4),n+4}function P(t,e,n,r,i){return e=+e,n>>>=0,i||D(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),V.write(t,e,n,r,52,8),n+8}function z(t){if((t=t.trim().replace(Z,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function I(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function U(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}function F(t){return G.toByteArray(z(t))}function H(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function Y(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function W(t){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(t)}function X(t){return t!==t}var G=t("base64-js"),V=t("ieee754");n.Buffer=i,n.SlowBuffer=function(t){return+t!=t&&(t=0),i.alloc(+t)},n.INSPECT_MAX_BYTES=50;var $=2147483647;n.kMaxLength=$,i.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(t,e,n){return o(t,e,n)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(t,e,n){return u(t,e,n)},i.allocUnsafe=function(t){return s(t)},i.allocUnsafeSlow=function(t){return s(t)},i.isBuffer=function(t){return null!=t&&!0===t._isBuffer},i.compare=function(t,e){if(!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,a=Math.min(n,r);o<a;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return i.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=i.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!i.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},i.byteLength=p,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},i.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},i.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},i.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?k(this,0,t):m.apply(this,arguments)},i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===i.compare(this,t)},i.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},i.prototype.compare=function(t,e,n,r,o){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,o>>>=0,this===t)return 0;for(var a=o-r,u=n-e,s=Math.min(a,u),f=this.slice(r,o),c=t.slice(e,n),l=0;l<s;++l)if(f[l]!==c[l]){a=f[l],u=c[l];break}return a<u?-1:u<a?1:0},i.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},i.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},i.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},i.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return x(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return M(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;i.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return r.__proto__=i.prototype,r},i.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||j(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},i.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||j(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},i.prototype.readUInt8=function(t,e){return t>>>=0,e||j(t,1,this.length),this[t]},i.prototype.readUInt16LE=function(t,e){return t>>>=0,e||j(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUInt16BE=function(t,e){return t>>>=0,e||j(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUInt32LE=function(t,e){return t>>>=0,e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUInt32BE=function(t,e){return t>>>=0,e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||j(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},i.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||j(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},i.prototype.readInt8=function(t,e){return t>>>=0,e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){t>>>=0,e||j(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(t,e){t>>>=0,e||j(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(t,e){return t>>>=0,e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return t>>>=0,e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return t>>>=0,e||j(t,4,this.length),V.read(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return t>>>=0,e||j(t,4,this.length),V.read(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return t>>>=0,e||j(t,8,this.length),V.read(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return t>>>=0,e||j(t,8,this.length),V.read(this,t,!1,52,8)},i.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},i.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},i.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,255,0),this[e]=255&t,e+1},i.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},i.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=0,a=1,u=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===u&&0!==this[e+o-1]&&(u=1),this[e+o]=(t/a>>0)-u&255;return e+n},i.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=n-1,a=1,u=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===u&&0!==this[e+o+1]&&(u=1),this[e+o]=(t/a>>0)-u&255;return e+n},i.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},i.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){return P(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){return P(this,t,e,!1,n)},i.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},i.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var a;if("number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var u=i.isBuffer(t)?t:new i(t,r),s=u.length;for(a=0;a<n-e;++a)this[a+e]=u[a%s]}return this};var Z=/[^+/0-9A-Za-z-_]/g},{"base64-js":1,ieee754:40}],5:[function(t,e,n){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],6:[function(t,e,n){(function(t){function e(t){return Object.prototype.toString.call(t)}n.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},n.isBoolean=function(t){return"boolean"==typeof t},n.isNull=function(t){return null===t},n.isNullOrUndefined=function(t){return null==t},n.isNumber=function(t){return"number"==typeof t},n.isString=function(t){return"string"==typeof t},n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=function(t){return void 0===t},n.isRegExp=function(t){return"[object RegExp]"===e(t)},n.isObject=function(t){return"object"==typeof t&&null!==t},n.isDate=function(t){return"[object Date]"===e(t)},n.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},n.isFunction=function(t){return"function"==typeof t},n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":42}],7:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return function(e,n){return a(t(e),n)}}function n(t,e){return[t,e]}function r(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=x?10:o>=w?5:o>=M?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=x?10:o>=w?5:o>=M?2:1)}function i(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=x?i*=10:o>=w?i*=5:o>=M&&(i*=2),e<t?-i:i}function o(t){return t.length}var a=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},u=function(t){return 1===t.length&&(t=e(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}},s=u(a),f=s.right,c=s.left,l=function(t){return null===t?NaN:+t},h=function(t,e){var n,r,i=t.length,o=0,a=-1,u=0,s=0;if(null==e)for(;++a<i;)isNaN(n=l(t[a]))||(s+=(r=n-u)*(n-(u+=r/++o)));else for(;++a<i;)isNaN(n=l(e(t[a],a,t)))||(s+=(r=n-u)*(n-(u+=r/++o)));if(o>1)return s/(o-1)},d=function(t,e){var n=h(t,e);return n?Math.sqrt(n):n},p=function(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},m=Array.prototype,g=m.slice,y=m.map,v=function(t){return function(){return t}},b=function(t){return t},_=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o},x=Math.sqrt(50),w=Math.sqrt(10),M=Math.sqrt(2),E=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},S=function(t,e,n){if(null==n&&(n=l),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}},k=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r},A=function(t){if(!(i=t.length))return[];for(var e=-1,n=k(t,o),r=new Array(n);++e<n;)for(var i,a=-1,u=r[e]=new Array(i);++a<i;)u[a]=t[a][e];return r};t.bisect=f,t.bisectRight=f,t.bisectLeft=c,t.ascending=a,t.bisector=u,t.cross=function(t,e,r){var i,o,a,u,s=t.length,f=e.length,c=new Array(s*f);for(null==r&&(r=n),i=a=0;i<s;++i)for(u=t[i],o=0;o<f;++o,++a)c[a]=r(u,e[o]);return c},t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.deviation=d,t.extent=p,t.histogram=function(){function t(t){var o,a,u=t.length,s=new Array(u);for(o=0;o<u;++o)s[o]=e(t[o],o,t);var c=n(s),l=c[0],h=c[1],d=r(s,l,h);Array.isArray(d)||(d=i(l,h,d),d=_(Math.ceil(l/d)*d,Math.floor(h/d)*d,d));for(var p=d.length;d[0]<=l;)d.shift(),--p;for(;d[p-1]>h;)d.pop(),--p;var m,g=new Array(p+1);for(o=0;o<=p;++o)(m=g[o]=[]).x0=o>0?d[o-1]:l,m.x1=o<p?d[o]:h;for(o=0;o<u;++o)l<=(a=s[o])&&a<=h&&g[f(d,a,0,p)].push(t[o]);return g}var e=b,n=p,r=E;return t.value=function(n){return arguments.length?(e="function"==typeof n?n:v(n),t):e},t.domain=function(e){return arguments.length?(n="function"==typeof e?e:v([e[0],e[1]]),t):n},t.thresholds=function(e){return arguments.length?(r="function"==typeof e?e:v(Array.isArray(e)?g.call(e):e),t):r},t},t.thresholdFreedmanDiaconis=function(t,e,n){return t=y.call(t,l).sort(a),Math.ceil((n-e)/(2*(S(t,.75)-S(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,e,n){return Math.ceil((n-e)/(3.5*d(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=E,t.max=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r},t.mean=function(t,e){var n,r=t.length,i=r,o=-1,a=0;if(null==e)for(;++o<r;)isNaN(n=l(t[o]))?--i:a+=n;else for(;++o<r;)isNaN(n=l(e(t[o],o,t)))?--i:a+=n;if(i)return a/i},t.median=function(t,e){var n,r=t.length,i=-1,o=[];if(null==e)for(;++i<r;)isNaN(n=l(t[i]))||o.push(n);else for(;++i<r;)isNaN(n=l(e(t[i],i,t)))||o.push(n);return S(o.sort(a),.5)},t.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n},t.min=k,t.pairs=function(t,e){null==e&&(e=n);for(var r=0,i=t.length-1,o=t[0],a=new Array(i<0?0:i);r<i;)a[r]=e(o,o=t[++r]);return a},t.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},t.quantile=S,t.range=_,t.scan=function(t,e){if(n=t.length){var n,r,i=0,o=0,u=t[o];for(null==e&&(e=a);++i<n;)(e(r=t[i],u)<0||0!==e(u,u))&&(u=r,o=i);return 0===e(u,u)?o:void 0}},t.shuffle=function(t,e,n){for(var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},t.sum=function(t,e){var n,r=t.length,i=-1,o=0;if(null==e)for(;++i<r;)(n=+t[i])&&(o+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(o+=n);return o},t.ticks=function(t,e,n){var i,o,a,u,s=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((i=e<t)&&(o=t,t=e,e=o),0===(u=r(t,e,n))||!isFinite(u))return[];if(u>0)for(t=Math.ceil(t/u),e=Math.floor(e/u),a=new Array(o=Math.ceil(e-t+1));++s<o;)a[s]=(t+s)*u;else for(t=Math.floor(t*u),e=Math.ceil(e*u),a=new Array(o=Math.ceil(t-e+1));++s<o;)a[s]=(t-s)/u;return i&&a.reverse(),a},t.tickIncrement=r,t.tickStep=i,t.transpose=A,t.variance=h,t.zip=function(){return A(arguments)},Object.defineProperty(t,"__esModule",{value:!0})})},{}],8:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return"translate("+(t+.5)+",0)"}function n(t){return"translate(0,"+(t+.5)+")"}function r(t){return function(e){return+t(e)}}function i(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function o(){return!this.__axis}function a(t,a){function p(e){var n=null==g?a.ticks?a.ticks.apply(a,m):a.domain():g,u=null==y?a.tickFormat?a.tickFormat.apply(a,m):s:y,p=Math.max(v,0)+_,E=a.range(),S=+E[0]+.5,k=+E[E.length-1]+.5,A=(a.bandwidth?i:r)(a.copy()),T=e.selection?e.selection():e,C=T.selectAll(".domain").data([null]),N=T.selectAll(".tick").data(n,a).order(),O=N.exit(),j=N.enter().append("g").attr("class","tick"),R=N.select("line"),D=N.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),N=N.merge(j),R=R.merge(j.append("line").attr("stroke","#000").attr(w+"2",x*v)),D=D.merge(j.append("text").attr("fill","#000").attr(w,x*p).attr("dy",t===f?"0em":t===l?"0.71em":"0.32em")),e!==T&&(C=C.transition(e),N=N.transition(e),R=R.transition(e),D=D.transition(e),O=O.transition(e).attr("opacity",d).attr("transform",function(t){return isFinite(t=A(t))?M(t):this.getAttribute("transform")}),j.attr("opacity",d).attr("transform",function(t){var e=this.parentNode.__axis;return M(e&&isFinite(e=e(t))?e:A(t))})),O.remove(),C.attr("d",t===h||t==c?"M"+x*b+","+S+"H0.5V"+k+"H"+x*b:"M"+S+","+x*b+"V0.5H"+k+"V"+x*b),N.attr("opacity",1).attr("transform",function(t){return M(A(t))}),R.attr(w+"2",x*v),D.attr(w,x*p).text(u),T.filter(o).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===c?"start":t===h?"end":"middle"),T.each(function(){this.__axis=A})}var m=[],g=null,y=null,v=6,b=6,_=3,x=t===f||t===h?-1:1,w=t===h||t===c?"x":"y",M=t===f||t===l?e:n;return p.scale=function(t){return arguments.length?(a=t,p):a},p.ticks=function(){return m=u.call(arguments),p},p.tickArguments=function(t){return arguments.length?(m=null==t?[]:u.call(t),p):m.slice()},p.tickValues=function(t){return arguments.length?(g=null==t?null:u.call(t),p):g&&g.slice()},p.tickFormat=function(t){return arguments.length?(y=t,p):y},p.tickSize=function(t){return arguments.length?(v=b=+t,p):v},p.tickSizeInner=function(t){return arguments.length?(v=+t,p):v},p.tickSizeOuter=function(t){return arguments.length?(b=+t,p):b},p.tickPadding=function(t){return arguments.length?(_=+t,p):_},p}var u=Array.prototype.slice,s=function(t){return t},f=1,c=2,l=3,h=4,d=1e-6;t.axisTop=function(t){return a(f,t)},t.axisRight=function(t){return a(c,t)},t.axisBottom=function(t){return a(l,t)},t.axisLeft=function(t){return a(h,t)},Object.defineProperty(t,"__esModule",{value:!0})})},{}],9:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-dispatch"),t("d3-drag"),t("d3-interpolate"),t("d3-selection"),t("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-drag","d3-interpolate","d3-selection","d3-transition"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3)}(this,function(t,e,n,r,i,o){"use strict";function a(){i.event.stopImmediatePropagation()}function u(t){return{type:t}}function s(){return!i.event.button}function f(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function c(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function l(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function h(t){function h(e){var n=e.property("__brush",O).selectAll(".overlay").data([u("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",M.overlay).merge(n).each(function(){var t=c(this).extent;i.select(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),e.selectAll(".selection").data([u("selection")]).enter().append("rect").attr("class","selection").attr("cursor",M.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,function(t){return t.type});r.exit().remove(),r.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return M[t.type]}),e.each(w).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",N)}function w(){var t=i.select(this),e=c(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-P/2:e[0][0]-P/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-P/2:e[0][1]-P/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+P:P}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+P:P})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function T(t,e){return t.__brush.emitter||new C(t,e)}function C(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function N(){function e(){var t=i.mouse(I);!Z||z||B||(Math.abs(t[0]-J[0])>Math.abs(t[1]-J[1])?B=!0:z=!0),J=t,P=!0,m(),r()}function r(){var t;switch(R=J[0]-K[0],L=J[1]-K[1],U){case y:case g:F&&(R=Math.max(G-s,Math.min($-p,R)),f=s+R,C=p+R),H&&(L=Math.max(V-h,Math.min(Q-N,L)),d=h+L,O=N+L);break;case v:F<0?(R=Math.max(G-s,Math.min($-s,R)),f=s+R,C=p):F>0&&(R=Math.max(G-p,Math.min($-p,R)),f=s,C=p+R),H<0?(L=Math.max(V-h,Math.min(Q-h,L)),d=h+L,O=N):H>0&&(L=Math.max(V-N,Math.min(Q-N,L)),d=h,O=N+L);break;case b:F&&(f=Math.max(G,Math.min($,s-R*F)),C=Math.max(G,Math.min($,p+R*F))),H&&(d=Math.max(V,Math.min(Q,h-L*H)),O=Math.max(V,Math.min(Q,N+L*H)))}C<f&&(F*=-1,t=s,s=p,p=t,t=f,f=C,C=t,q in E&&nt.attr("cursor",M[q=E[q]])),O<d&&(H*=-1,t=h,h=N,N=t,t=d,d=O,O=t,q in S&&nt.attr("cursor",M[q=S[q]])),Y.selection&&(X=Y.selection),z&&(f=X[0][0],C=X[1][0]),B&&(d=X[0][1],O=X[1][1]),X[0][0]===f&&X[0][1]===d&&X[1][0]===C&&X[1][1]===O||(Y.selection=[[f,d],[C,O]],w.call(I),tt.brush())}function u(){if(a(),i.event.touches){if(i.event.touches.length)return;j&&clearTimeout(j),j=setTimeout(function(){j=null},500),et.on("touchmove.brush touchend.brush touchcancel.brush",null)}else n.dragEnable(i.event.view,P),rt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);et.attr("pointer-events","all"),nt.attr("cursor",M.overlay),Y.selection&&(X=Y.selection),l(X)&&(Y.selection=null,w.call(I)),tt.end()}if(i.event.touches){if(i.event.changedTouches.length<i.event.touches.length)return m()}else if(j)return;if(D.apply(this,arguments)){var s,f,h,d,p,C,N,O,R,L,P,z,B,I=this,q=i.event.target.__data__.type,U="selection"===(i.event.metaKey?q="overlay":q)?g:i.event.altKey?b:v,F=t===x?null:k[q],H=t===_?null:A[q],Y=c(I),W=Y.extent,X=Y.selection,G=W[0][0],V=W[0][1],$=W[1][0],Q=W[1][1],Z=F&&H&&i.event.shiftKey,K=i.mouse(I),J=K,tt=T(I,arguments).beforestart();"overlay"===q?Y.selection=X=[[s=t===x?G:K[0],h=t===_?V:K[1]],[p=t===x?$:s,N=t===_?Q:h]]:(s=X[0][0],h=X[0][1],p=X[1][0],N=X[1][1]),f=s,d=h,C=p,O=N;var et=i.select(I).attr("pointer-events","none"),nt=et.selectAll(".overlay").attr("cursor",M[q]);if(i.event.touches)et.on("touchmove.brush",e,!0).on("touchend.brush touchcancel.brush",u,!0);else{var rt=i.select(i.event.view).on("keydown.brush",function(){switch(i.event.keyCode){case 16:Z=F&&H;break;case 18:U===v&&(F&&(p=C-R*F,s=f+R*F),H&&(N=O-L*H,h=d+L*H),U=b,r());break;case 32:U!==v&&U!==b||(F<0?p=C-R:F>0&&(s=f-R),H<0?N=O-L:H>0&&(h=d-L),U=y,nt.attr("cursor",M.selection),r());break;default:return}m()},!0).on("keyup.brush",function(){switch(i.event.keyCode){case 16:Z&&(z=B=Z=!1,r());break;case 18:U===b&&(F<0?p=C:F>0&&(s=f),H<0?N=O:H>0&&(h=d),U=v,r());break;case 32:U===y&&(i.event.altKey?(F&&(p=C-R*F,s=f+R*F),H&&(N=O-L*H,h=d+L*H),U=b):(F<0?p=C:F>0&&(s=f),H<0?N=O:H>0&&(h=d),U=v),nt.attr("cursor",M[q]),r());break;default:return}m()},!0).on("mousemove.brush",e,!0).on("mouseup.brush",u,!0);n.dragDisable(i.event.view)}a(),o.interrupt(I),w.call(I),tt.start()}}function O(){var e=this.__brush||{selection:null};return e.extent=R.apply(this,arguments),e.dim=t,e}var j,R=f,D=s,L=e.dispatch(h,"start","brush","end"),P=6;return h.move=function(e,n){e.selection?e.on("start.brush",function(){T(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){T(this,arguments).end()}).tween("brush",function(){function e(t){o.selection=1===t&&l(s)?null:f(t),w.call(i),a.brush()}var i=this,o=i.__brush,a=T(i,arguments),u=o.selection,s=t.input("function"==typeof n?n.apply(this,arguments):n,o.extent),f=r.interpolate(u,s);return u&&s?e:e(1)}):e.each(function(){var e=this,r=arguments,i=e.__brush,a=t.input("function"==typeof n?n.apply(e,r):n,i.extent),u=T(e,r).beforestart();o.interrupt(e),i.selection=null==a||l(a)?null:a,w.call(e),u.start().brush().end()})},C.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){i.customEvent(new p(h,e,t.output(this.state.selection)),L.apply,L,[e,this.that,this.args])}},h.extent=function(t){return arguments.length?(R="function"==typeof t?t:d([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),h):R},h.filter=function(t){return arguments.length?(D="function"==typeof t?t:d(!!t),h):D},h.handleSize=function(t){return arguments.length?(P=+t,h):P},h.on=function(){var t=L.on.apply(L,arguments);return t===L?h:t},h}var d=function(t){return function(){return t}},p=function(t,e,n){this.target=t,this.type=e,this.selection=n},m=function(){i.event.preventDefault(),i.event.stopImmediatePropagation()},g={name:"drag"},y={name:"space"},v={name:"handle"},b={name:"center"},_={name:"x",handles:["e","w"].map(u),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},x={name:"y",handles:["n","s"].map(u),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},w={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(u),input:function(t){return t},output:function(t){return t}},M={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},E={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},S={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},k={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},A={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};t.brush=function(){return h(w)},t.brushX=function(){return h(_)},t.brushY=function(){return h(x)},t.brushSelection=function(t){var e=t.__brush;return e?e.dim.output(e.selection):null},Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-dispatch":13,"d3-drag":14,"d3-interpolate":21,"d3-selection":29,"d3-transition":34}],10:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-array"),t("d3-path")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-path"],i):i(r.d3=r.d3||{},r.d3,r.d3)}(this,function(t,e,n){"use strict";function r(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function i(t){return t.source}function o(t){return t.target}function a(t){return t.radius}function u(t){return t.startAngle}function s(t){return t.endAngle}var f=Math.cos,c=Math.sin,l=Math.PI,h=l/2,d=2*l,p=Math.max,m=Array.prototype.slice,g=function(t){return function(){return t}};t.chord=function(){function t(t){var r,u,s,f,c,l,h=t.length,m=[],g=e.range(h),y=[],v=[],b=v.groups=new Array(h),_=new Array(h*h);for(r=0,c=-1;++c<h;){for(u=0,l=-1;++l<h;)u+=t[c][l];m.push(u),y.push(e.range(h)),r+=u}for(i&&g.sort(function(t,e){return i(m[t],m[e])}),o&&y.forEach(function(e,n){e.sort(function(e,r){return o(t[n][e],t[n][r])})}),f=(r=p(0,d-n*h)/r)?n:d/h,u=0,c=-1;++c<h;){for(s=u,l=-1;++l<h;){var x=g[c],w=y[x][l],M=t[x][w],E=u,S=u+=M*r;_[w*h+x]={index:x,subindex:w,startAngle:E,endAngle:S,value:M}}b[x]={index:x,startAngle:s,endAngle:u,value:m[x]},u+=f}for(c=-1;++c<h;)for(l=c-1;++l<h;){var k=_[l*h+c],A=_[c*h+l];(k.value||A.value)&&v.push(k.value<A.value?{source:A,target:k}:{source:k,target:A})}return a?v.sort(a):v}var n=0,i=null,o=null,a=null;return t.padAngle=function(e){return arguments.length?(n=p(0,e),t):n},t.sortGroups=function(e){return arguments.length?(i=e,t):i},t.sortSubgroups=function(e){return arguments.length?(o=e,t):o},t.sortChords=function(e){return arguments.length?(null==e?a=null:(a=r(e))._=e,t):a&&a._},t},t.ribbon=function(){function t(){var t,i=m.call(arguments),o=e.apply(this,i),a=r.apply(this,i),u=+l.apply(this,(i[0]=o,i)),s=d.apply(this,i)-h,g=p.apply(this,i)-h,v=u*f(s),b=u*c(s),_=+l.apply(this,(i[0]=a,i)),x=d.apply(this,i)-h,w=p.apply(this,i)-h;if(y||(y=t=n.path()),y.moveTo(v,b),y.arc(0,0,u,s,g),s===x&&g===w||(y.quadraticCurveTo(0,0,_*f(x),_*c(x)),y.arc(0,0,_,x,w)),y.quadraticCurveTo(0,0,v,b),y.closePath(),t)return y=null,t+""||null}var e=i,r=o,l=a,d=u,p=s,y=null;return t.radius=function(e){return arguments.length?(l="function"==typeof e?e:g(+e),t):l},t.startAngle=function(e){return arguments.length?(d="function"==typeof e?e:g(+e),t):d},t.endAngle=function(e){return arguments.length?(p="function"==typeof e?e:g(+e),t):p},t.source=function(n){return arguments.length?(e=n,t):e},t.target=function(e){return arguments.length?(r=e,t):r},t.context=function(e){return arguments.length?(y=null==e?null:e,t):y},t},Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-array":7,"d3-path":22}],11:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(){}function n(t,n){var r=new e;if(t instanceof e)t.each(function(t,e){r.set(e,t)});else if(Array.isArray(t)){var i,o=-1,a=t.length;if(null==n)for(;++o<a;)r.set(o,t[o]);else for(;++o<a;)r.set(n(i=t[o],o,t),i)}else if(t)for(var u in t)r.set(u,t[u]);return r}function r(){return{}}function i(t,e,n){t[e]=n}function o(){return n()}function a(t,e,n){t.set(e,n)}function u(){}function s(t,e){var n=new u;if(t instanceof u)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}e.prototype=n.prototype={constructor:e,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var f=n.prototype;u.prototype=s.prototype={constructor:u,has:f.has,add:function(t){return t+="",this["$"+t]=t,this},remove:f.remove,clear:f.clear,values:f.keys,size:f.size,empty:f.empty,each:f.each};t.nest=function(){function t(e,r,i,o){if(r>=c.length)return null!=u&&e.sort(u),null!=s?s(e):e;for(var a,f,l,h=-1,d=e.length,p=c[r++],m=n(),g=i();++h<d;)(l=m.get(a=p(f=e[h])+""))?l.push(f):m.set(a,[f]);return m.each(function(e,n){o(g,n,t(e,r,i,o))}),g}function e(t,n){if(++n>c.length)return t;var r,i=l[n-1];return null!=s&&n>=c.length?r=t.entries():(r=[],t.each(function(t,i){r.push({key:i,values:e(t,n)})})),null!=i?r.sort(function(t,e){return i(t.key,e.key)}):r}var u,s,f,c=[],l=[];return f={object:function(e){return t(e,0,r,i)},map:function(e){return t(e,0,o,a)},entries:function(n){return e(t(n,0,o,a),0)},key:function(t){return c.push(t),f},sortKeys:function(t){return l[c.length-1]=t,f},sortValues:function(t){return u=t,f},rollup:function(t){return s=t,f}}},t.set=s,t.map=n,t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},Object.defineProperty(t,"__esModule",{value:!0})})},{}],12:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function n(){}function r(t){var e;return t=(t+"").trim().toLowerCase(),(e=O.exec(t))?(e=parseInt(e[1],16),new s(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=j.exec(t))?i(parseInt(e[1],16)):(e=R.exec(t))?new s(e[1],e[2],e[3],1):(e=D.exec(t))?new s(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=L.exec(t))?o(e[1],e[2],e[3],e[4]):(e=P.exec(t))?o(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=z.exec(t))?f(e[1],e[2]/100,e[3]/100,1):(e=B.exec(t))?f(e[1],e[2]/100,e[3]/100,e[4]):I.hasOwnProperty(t)?i(I[t]):"transparent"===t?new s(NaN,NaN,NaN,0):null}function i(t){return new s(t>>16&255,t>>8&255,255&t,1)}function o(t,e,n,r){return r<=0&&(t=e=n=NaN),new s(t,e,n,r)}function a(t){return t instanceof n||(t=r(t)),t?(t=t.rgb(),new s(t.r,t.g,t.b,t.opacity)):new s}function u(t,e,n,r){return 1===arguments.length?a(t):new s(t,e,n,null==r?1:r)}function s(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function f(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new h(t,e,n,r)}function c(t){if(t instanceof h)return new h(t.h,t.s,t.l,t.opacity);if(t instanceof n||(t=r(t)),!t)return new h;if(t instanceof h)return t;var e=(t=t.rgb()).r/255,i=t.g/255,o=t.b/255,a=Math.min(e,i,o),u=Math.max(e,i,o),s=NaN,f=u-a,c=(u+a)/2;return f?(s=e===u?(i-o)/f+6*(i<o):i===u?(o-e)/f+2:(e-i)/f+4,f/=c<.5?u+a:2-u-a,s*=60):f=c>0&&c<1?0:s,new h(s,f,c,t.opacity)}function l(t,e,n,r){return 1===arguments.length?c(t):new h(t,e,n,null==r?1:r)}function h(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function d(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function p(t){if(t instanceof g)return new g(t.l,t.a,t.b,t.opacity);if(t instanceof M){var e=t.h*q;return new g(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof s||(t=a(t));var n=_(t.r),r=_(t.g),i=_(t.b),o=y((.4124564*n+.3575761*r+.1804375*i)/F),u=y((.2126729*n+.7151522*r+.072175*i)/H);return new g(116*u-16,500*(o-u),200*(u-y((.0193339*n+.119192*r+.9503041*i)/Y)),t.opacity)}function m(t,e,n,r){return 1===arguments.length?p(t):new g(t,e,n,null==r?1:r)}function g(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function y(t){return t>V?Math.pow(t,1/3):t/G+W}function v(t){return t>X?t*t*t:G*(t-W)}function b(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function _(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function x(t){if(t instanceof M)return new M(t.h,t.c,t.l,t.opacity);t instanceof g||(t=p(t));var e=Math.atan2(t.b,t.a)*U;return new M(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function w(t,e,n,r){return 1===arguments.length?x(t):new M(t,e,n,null==r?1:r)}function M(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function E(t){if(t instanceof k)return new k(t.h,t.s,t.l,t.opacity);t instanceof s||(t=a(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(nt*r+tt*e-et*n)/(nt+tt-et),o=r-i,u=(J*(n-i)-Z*o)/K,f=Math.sqrt(u*u+o*o)/(J*i*(1-i)),c=f?Math.atan2(u,o)*U-120:NaN;return new k(c<0?c+360:c,f,i,t.opacity)}function S(t,e,n,r){return 1===arguments.length?E(t):new k(t,e,n,null==r?1:r)}function k(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}var A=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t},T="\\s*([+-]?\\d+)\\s*",C="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",N="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",O=/^#([0-9a-f]{3})$/,j=/^#([0-9a-f]{6})$/,R=new RegExp("^rgb\\("+[T,T,T]+"\\)$"),D=new RegExp("^rgb\\("+[N,N,N]+"\\)$"),L=new RegExp("^rgba\\("+[T,T,T,C]+"\\)$"),P=new RegExp("^rgba\\("+[N,N,N,C]+"\\)$"),z=new RegExp("^hsl\\("+[C,N,N]+"\\)$"),B=new RegExp("^hsla\\("+[C,N,N,C]+"\\)$"),I={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};A(n,r,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),A(s,u,e(n,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new s(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new s(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),A(h,l,e(n,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new h(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new h(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new s(d(t>=240?t-240:t+120,i,r),d(t,i,r),d(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var q=Math.PI/180,U=180/Math.PI,F=.95047,H=1,Y=1.08883,W=4/29,X=6/29,G=3*X*X,V=X*X*X;A(g,m,e(n,{brighter:function(t){return new g(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new g(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=H*v(t),e=F*v(e),n=Y*v(n),new s(b(3.2404542*e-1.5371385*t-.4985314*n),b(-.969266*e+1.8760108*t+.041556*n),b(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),A(M,w,e(n,{brighter:function(t){return new M(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new M(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return p(this).rgb()}}));var $=-.14861,Q=1.78277,Z=-.29227,K=-.90649,J=1.97294,tt=J*K,et=J*Q,nt=Q*Z-K*$;A(k,S,e(n,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new k(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new k(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*q,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new s(255*(e+n*($*r+Q*i)),255*(e+n*(Z*r+K*i)),255*(e+n*(J*r)),this.opacity)}})),t.color=r,t.rgb=u,t.hsl=l,t.lab=m,t.hcl=w,t.cubehelix=S,Object.defineProperty(t,"__esModule",{value:!0})})},{}],13:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(){for(var t,e=0,r=arguments.length,i={};e<r;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new n(i)}function n(t){this._=t}function r(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function i(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function o(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=a,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}var a={value:function(){}};n.prototype=e.prototype={constructor:n,on:function(t,e){var n,a=this._,u=r(t+"",a),s=-1,f=u.length;{if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<f;)if(n=(t=u[s]).type)a[n]=o(a[n],t.name,e);else if(null==e)for(n in a)a[n]=o(a[n],t.name,null);return this}for(;++s<f;)if((n=(t=u[s]).type)&&(n=i(a[n],t.name)))return n}},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new n(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}},t.dispatch=e,Object.defineProperty(t,"__esModule",{value:!0})})},{}],14:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-dispatch"),t("d3-selection")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-selection"],i):i(r.d3=r.d3||{},r.d3,r.d3)}(this,function(t,e,n){"use strict";function r(){n.event.stopImmediatePropagation()}function i(t,e){var r=t.document.documentElement,i=n.select(t).on("dragstart.drag",null);e&&(i.on("click.drag",c,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function o(t,e,n,r,i,o,a,u,s,f){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=u,this.dy=s,this._=f}function a(){return!n.event.button}function u(){return this.parentNode}function s(t){return null==t?{x:n.event.x,y:n.event.y}:t}function f(){return"ontouchstart"in this}var c=function(){n.event.preventDefault(),n.event.stopImmediatePropagation()},l=function(t){var e=t.document.documentElement,r=n.select(t).on("dragstart.drag",c,!0);"onselectstart"in e?r.on("selectstart.drag",c,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")},h=function(t){return function(){return t}};o.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};t.drag=function(){function t(t){t.on("mousedown.drag",d).filter(A).on("touchstart.drag",g).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!M&&E.apply(this,arguments)){var t=b("mouse",S.apply(this,arguments),n.mouse,this,arguments);t&&(n.select(n.event.view).on("mousemove.drag",p,!0).on("mouseup.drag",m,!0),l(n.event.view),r(),w=!1,_=n.event.clientX,x=n.event.clientY,t("start"))}}function p(){if(c(),!w){var t=n.event.clientX-_,e=n.event.clientY-x;w=t*t+e*e>O}T.mouse("drag")}function m(){n.select(n.event.view).on("mousemove.drag mouseup.drag",null),i(n.event.view,w),c(),T.mouse("end")}function g(){if(E.apply(this,arguments)){var t,e,i=n.event.changedTouches,o=S.apply(this,arguments),a=i.length;for(t=0;t<a;++t)(e=b(i[t].identifier,o,n.touch,this,arguments))&&(r(),e("start"))}}function y(){var t,e,r=n.event.changedTouches,i=r.length;for(t=0;t<i;++t)(e=T[r[t].identifier])&&(c(),e("drag"))}function v(){var t,e,i=n.event.changedTouches,o=i.length;for(M&&clearTimeout(M),M=setTimeout(function(){M=null},500),t=0;t<o;++t)(e=T[i[t].identifier])&&(r(),e("end"))}function b(e,r,i,a,u){var s,f,c,l=i(r,e),h=C.copy();if(n.customEvent(new o(t,"beforestart",s,e,N,l[0],l[1],0,0,h),function(){return null!=(n.event.subject=s=k.apply(a,u))&&(f=s.x-l[0]||0,c=s.y-l[1]||0,!0)}))return function d(p){var m,g=l;switch(p){case"start":T[e]=d,m=N++;break;case"end":delete T[e],--N;case"drag":l=i(r,e),m=N}n.customEvent(new o(t,p,s,e,m,l[0]+f,l[1]+c,l[0]-g[0],l[1]-g[1],h),h.apply,h,[p,a,u])}}var _,x,w,M,E=a,S=u,k=s,A=f,T={},C=e.dispatch("start","drag","end"),N=0,O=0;return t.filter=function(e){return arguments.length?(E="function"==typeof e?e:h(!!e),t):E},t.container=function(e){return arguments.length?(S="function"==typeof e?e:h(e),t):S},t.subject=function(e){return arguments.length?(k="function"==typeof e?e:h(e),t):k},t.touchable=function(e){return arguments.length?(A="function"==typeof e?e:h(!!e),t):A},t.on=function(){var e=C.on.apply(C,arguments);return e===C?t:e},t.clickDistance=function(e){return arguments.length?(O=(e=+e)*e,t):Math.sqrt(O)},t},t.dragDisable=l,t.dragEnable=i,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-dispatch":13,"d3-selection":29}],15:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function n(t,n){var r=e(t);return function(e,i){return n(r(e),i,t)}}function r(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}var i={},o={},a=34,u=10,s=13,f=function(t){function f(t,e){function n(){if(p)return o;if(m)return m=!1,i;var e,n,r=l;if(t.charCodeAt(r)===a){for(;l++<c&&t.charCodeAt(l)!==a||t.charCodeAt(++l)===a;);return(e=l)>=c?p=!0:(n=t.charCodeAt(l++))===u?m=!0:n===s&&(m=!0,t.charCodeAt(l)===u&&++l),t.slice(r+1,e-1).replace(/""/g,'"')}for(;l<c;){if((n=t.charCodeAt(e=l++))===u)m=!0;else if(n===s)m=!0,t.charCodeAt(l)===u&&++l;else if(n!==d)continue;return t.slice(r,e)}return p=!0,t.slice(r,c)}var r,f=[],c=t.length,l=0,h=0,p=c<=0,m=!1;for(t.charCodeAt(c-1)===u&&--c,t.charCodeAt(c-1)===s&&--c;(r=n())!==o;){for(var g=[];r!==i&&r!==o;)g.push(r),r=n();e&&null==(g=e(g,h++))||f.push(g)}return f}function c(e){return e.map(l).join(t)}function l(t){return null==t?"":h.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}var h=new RegExp('["'+t+"\n\r]"),d=t.charCodeAt(0);return{parse:function(t,r){var i,o,a=f(t,function(t,a){if(i)return i(t,a-1);o=t,i=r?n(t,r):e(t)});return a.columns=o,a},parseRows:f,format:function(e,n){return null==n&&(n=r(e)),[n.map(l).join(t)].concat(e.map(function(e){return n.map(function(t){return l(e[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(c).join("\n")}}},c=f(","),l=c.parse,h=c.parseRows,d=c.format,p=c.formatRows,m=f("\t"),g=m.parse,y=m.parseRows,v=m.format,b=m.formatRows;t.dsvFormat=f,t.csvParse=l,t.csvParseRows=h,t.csvFormat=d,t.csvFormatRows=p,t.tsvParse=g,t.tsvParseRows=y,t.tsvFormat=v,t.tsvFormatRows=b,Object.defineProperty(t,"__esModule",{value:!0})})},{}],16:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function n(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function r(t){return(1-Math.cos(c*t))/2}function i(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function o(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function a(t){return(t=+t)<h?x*t*t:t<p?x*(t-=d)*t+m:t<y?x*(t-=g)*t+v:x*(t-=b)*t+_}var u=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),s=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),f=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),c=Math.PI,l=c/2,h=4/11,d=6/11,p=8/11,m=.75,g=9/11,y=10/11,v=.9375,b=21/22,_=63/64,x=1/h/h,w=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),M=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),E=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),S=2*Math.PI,k=function t(e,n){function r(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/n)}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=S);return r.amplitude=function(e){return t(e,n*S)},r.period=function(n){return t(e,n)},r}(1,.3),A=function t(e,n){function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=S);return r.amplitude=function(e){return t(e,n*S)},r.period=function(n){return t(e,n)},r}(1,.3),T=function t(e,n){function r(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/n))/2}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=S);return r.amplitude=function(e){return t(e,n*S)},r.period=function(n){return t(e,n)},r}(1,.3);t.easeLinear=function(t){return+t},t.easeQuad=e,t.easeQuadIn=function(t){return t*t},t.easeQuadOut=function(t){return t*(2-t)},t.easeQuadInOut=e,t.easeCubic=n,t.easeCubicIn=function(t){return t*t*t},t.easeCubicOut=function(t){return--t*t*t+1},t.easeCubicInOut=n,t.easePoly=f,t.easePolyIn=u,t.easePolyOut=s,t.easePolyInOut=f,t.easeSin=r,t.easeSinIn=function(t){return 1-Math.cos(t*l)},t.easeSinOut=function(t){return Math.sin(t*l)},t.easeSinInOut=r,t.easeExp=i,t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeExpInOut=i,t.easeCircle=o,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCircleInOut=o,t.easeBounce=a,t.easeBounceIn=function(t){return 1-a(1-t)},t.easeBounceOut=a,t.easeBounceInOut=function(t){return((t*=2)<=1?1-a(1-t):a(t-1)+1)/2},t.easeBack=E,t.easeBackIn=w,t.easeBackOut=M,t.easeBackInOut=E,t.easeElastic=A,t.easeElasticIn=k,t.easeElasticOut=A,t.easeElasticInOut=T,Object.defineProperty(t,"__esModule",{value:!0})})},{}],17:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-quadtree"),t("d3-collection"),t("d3-dispatch"),t("d3-timer")):"function"==typeof define&&define.amd?define(["exports","d3-quadtree","d3-collection","d3-dispatch","d3-timer"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3)}(this,function(t,e,n,r,i){"use strict";function o(t){return t.x+t.vx}function a(t){return t.y+t.vy}function u(t){return t.index}function s(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function f(t){return t.x}function c(t){return t.y}var l=function(t){return function(){return t}},h=function(){return 1e-6*(Math.random()-.5)},d=10,p=Math.PI*(3-Math.sqrt(5));t.forceCenter=function(t,e){function n(){var n,i,o=r.length,a=0,u=0;for(n=0;n<o;++n)a+=(i=r[n]).x,u+=i.y;for(a=a/o-t,u=u/o-e,n=0;n<o;++n)(i=r[n]).x-=a,i.y-=u}var r;return null==t&&(t=0),null==e&&(e=0),n.initialize=function(t){r=t},n.x=function(e){return arguments.length?(t=+e,n):t},n.y=function(t){return arguments.length?(e=+t,n):e},n},t.forceCollide=function(t){function n(){for(var t,n,i,l,d,p,m,g=u.length,y=0;y<c;++y)for(n=e.quadtree(u,o,a).visitAfter(r),t=0;t<g;++t)i=u[t],p=s[i.index],m=p*p,l=i.x+i.vx,d=i.y+i.vy,n.visit(function(t,e,n,r,o){var a=t.data,u=t.r,s=p+u;if(!a)return e>l+s||r<l-s||n>d+s||o<d-s;if(a.index>i.index){var c=l-a.x-a.vx,g=d-a.y-a.vy,y=c*c+g*g;y<s*s&&(0===c&&(c=h(),y+=c*c),0===g&&(g=h(),y+=g*g),y=(s-(y=Math.sqrt(y)))/y*f,i.vx+=(c*=y)*(s=(u*=u)/(m+u)),i.vy+=(g*=y)*s,a.vx-=c*(s=1-s),a.vy-=g*s)}})}function r(t){if(t.data)return t.r=s[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function i(){if(u){var e,n,r=u.length;for(s=new Array(r),e=0;e<r;++e)n=u[e],s[n.index]=+t(n,e,u)}}var u,s,f=1,c=1;return"function"!=typeof t&&(t=l(null==t?1:+t)),n.initialize=function(t){u=t,i()},n.iterations=function(t){return arguments.length?(c=+t,n):c},n.strength=function(t){return arguments.length?(f=+t,n):f},n.radius=function(e){return arguments.length?(t="function"==typeof e?e:l(+e),i(),n):t},n},t.forceLink=function(t){function e(e){for(var n=0,r=t.length;n<v;++n)for(var i,o,u,s,c,l,d,m=0;m<r;++m)o=(i=t[m]).source,s=(u=i.target).x+u.vx-o.x-o.vx||h(),c=u.y+u.vy-o.y-o.vy||h(),s*=l=((l=Math.sqrt(s*s+c*c))-f[m])/l*e*a[m],c*=l,u.vx-=s*(d=p[m]),u.vy-=c*d,o.vx+=s*(d=1-d),o.vy+=c*d}function r(){if(c){var e,r,u=c.length,l=t.length,h=n.map(c,m);for(e=0,d=new Array(u);e<l;++e)(r=t[e]).index=e,"object"!=typeof r.source&&(r.source=s(h,r.source)),"object"!=typeof r.target&&(r.target=s(h,r.target)),d[r.source.index]=(d[r.source.index]||0)+1,d[r.target.index]=(d[r.target.index]||0)+1;for(e=0,p=new Array(l);e<l;++e)r=t[e],p[e]=d[r.source.index]/(d[r.source.index]+d[r.target.index]);a=new Array(l),i(),f=new Array(l),o()}}function i(){if(c)for(var e=0,n=t.length;e<n;++e)a[e]=+g(t[e],e,t)}function o(){if(c)for(var e=0,n=t.length;e<n;++e)f[e]=+y(t[e],e,t)}var a,f,c,d,p,m=u,g=function(t){return 1/Math.min(d[t.source.index],d[t.target.index])},y=l(30),v=1;return null==t&&(t=[]),e.initialize=function(t){c=t,r()},e.links=function(n){return arguments.length?(t=n,r(),e):t},e.id=function(t){return arguments.length?(m=t,e):m},e.iterations=function(t){return arguments.length?(v=+t,e):v},e.strength=function(t){return arguments.length?(g="function"==typeof t?t:l(+t),i(),e):g},e.distance=function(t){return arguments.length?(y="function"==typeof t?t:l(+t),o(),e):y},e},t.forceManyBody=function(){function t(t){var n,s=o.length,l=e.quadtree(o,f,c).visitAfter(r);for(u=t,n=0;n<s;++n)a=o[n],l.visit(i)}function n(){if(o){var t,e,n=o.length;for(s=new Array(n),t=0;t<n;++t)e=o[t],s[e.index]=+d(e,t,o)}}function r(t){var e,n,r,i,o,a=0,u=0;if(t.length){for(r=i=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(a+=e.value,u+=n,r+=n*e.x,i+=n*e.y);t.x=r/u,t.y=i/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{a+=s[e.data.index]}while(e=e.next)}t.value=a}function i(t,e,n,r){if(!t.value)return!0;var i=t.x-a.x,o=t.y-a.y,f=r-e,c=i*i+o*o;if(f*f/g<c)return c<m&&(0===i&&(i=h(),c+=i*i),0===o&&(o=h(),c+=o*o),c<p&&(c=Math.sqrt(p*c)),a.vx+=i*t.value*u/c,a.vy+=o*t.value*u/c),!0;if(!(t.length||c>=m)){(t.data!==a||t.next)&&(0===i&&(i=h(),c+=i*i),0===o&&(o=h(),c+=o*o),c<p&&(c=Math.sqrt(p*c)));do{t.data!==a&&(f=s[t.data.index]*u/c,a.vx+=i*f,a.vy+=o*f)}while(t=t.next)}}var o,a,u,s,d=l(-30),p=1,m=1/0,g=.81;return t.initialize=function(t){o=t,n()},t.strength=function(e){return arguments.length?(d="function"==typeof e?e:l(+e),n(),t):d},t.distanceMin=function(e){return arguments.length?(p=e*e,t):Math.sqrt(p)},t.distanceMax=function(e){return arguments.length?(m=e*e,t):Math.sqrt(m)},t.theta=function(e){return arguments.length?(g=e*e,t):Math.sqrt(g)},t},t.forceRadial=function(t,e,n){function r(t){for(var r=0,i=o.length;r<i;++r){var s=o[r],f=s.x-e||1e-6,c=s.y-n||1e-6,l=Math.sqrt(f*f+c*c),h=(u[r]-l)*a[r]*t/l;s.vx+=f*h,s.vy+=c*h}}function i(){if(o){var e,n=o.length;for(a=new Array(n),u=new Array(n),e=0;e<n;++e)u[e]=+t(o[e],e,o),a[e]=isNaN(u[e])?0:+s(o[e],e,o)}}var o,a,u,s=l(.1);return"function"!=typeof t&&(t=l(+t)),null==e&&(e=0),null==n&&(n=0),r.initialize=function(t){o=t,i()},r.strength=function(t){return arguments.length?(s="function"==typeof t?t:l(+t),i(),r):s},r.radius=function(e){return arguments.length?(t="function"==typeof e?e:l(+e),i(),r):t},r.x=function(t){return arguments.length?(e=+t,r):e},r.y=function(t){return arguments.length?(n=+t,r):n},r},t.forceSimulation=function(t){function e(){o(),v.call("tick",s),f<c&&(y.stop(),v.call("end",s))}function o(){var e,n,r=t.length;for(f+=(h-f)*l,g.each(function(t){t(f)}),e=0;e<r;++e)null==(n=t[e]).fx?n.x+=n.vx*=m:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=m:(n.y=n.fy,n.vy=0)}function a(){for(var e,n=0,r=t.length;n<r;++n){if(e=t[n],e.index=n,isNaN(e.x)||isNaN(e.y)){var i=d*Math.sqrt(n),o=n*p;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function u(e){return e.initialize&&e.initialize(t),e}var s,f=1,c=.001,l=1-Math.pow(c,1/300),h=0,m=.6,g=n.map(),y=i.timer(e),v=r.dispatch("tick","end");return null==t&&(t=[]),a(),s={tick:o,restart:function(){return y.restart(e),s},stop:function(){return y.stop(),s},nodes:function(e){return arguments.length?(t=e,a(),g.each(u),s):t},alpha:function(t){return arguments.length?(f=+t,s):f},alphaMin:function(t){return arguments.length?(c=+t,s):c},alphaDecay:function(t){return arguments.length?(l=+t,s):+l},alphaTarget:function(t){return arguments.length?(h=+t,s):h},velocityDecay:function(t){return arguments.length?(m=1-t,s):1-m},force:function(t,e){return arguments.length>1?(null==e?g.remove(t):g.set(t,u(e)),s):g.get(t)},find:function(e,n,r){var i,o,a,u,s,f=0,c=t.length;for(null==r?r=1/0:r*=r,f=0;f<c;++f)(a=(i=e-(u=t[f]).x)*i+(o=n-u.y)*o)<r&&(s=u,r=a);return s},on:function(t,e){return arguments.length>1?(v.on(t,e),s):v.on(t)}}},t.forceX=function(t){function e(t){for(var e,n=0,a=r.length;n<a;++n)(e=r[n]).vx+=(o[n]-e.x)*i[n]*t}function n(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)i[e]=isNaN(o[e]=+t(r[e],e,r))?0:+a(r[e],e,r)}}var r,i,o,a=l(.1);return"function"!=typeof t&&(t=l(null==t?0:+t)),e.initialize=function(t){r=t,n()},e.strength=function(t){return arguments.length?(a="function"==typeof t?t:l(+t),n(),e):a},e.x=function(r){return arguments.length?(t="function"==typeof r?r:l(+r),n(),e):t},e},t.forceY=function(t){function e(t){for(var e,n=0,a=r.length;n<a;++n)(e=r[n]).vy+=(o[n]-e.y)*i[n]*t}function n(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)i[e]=isNaN(o[e]=+t(r[e],e,r))?0:+a(r[e],e,r)}}var r,i,o,a=l(.1);return"function"!=typeof t&&(t=l(null==t?0:+t)),e.initialize=function(t){r=t,n()},e.strength=function(t){return arguments.length?(a="function"==typeof t?t:l(+t),n(),e):a},e.y=function(r){return arguments.length?(t="function"==typeof r?r:l(+r),n(),e):t},e},Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-collection":11,"d3-dispatch":13,"d3-quadtree":24,"d3-timer":33}],18:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return new n(t)}function n(t){if(!(e=l.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",o=e[4]||"",a=!!e[5],u=e[6]&&+e[6],s=!!e[7],f=e[8]&&+e[8].slice(1),h=e[9]||"";"n"===h?(s=!0,h="g"):c[h]||(h=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=u,this.comma=s,this.precision=f,this.type=h}function r(e){return h=m(e),t.format=h.format,t.formatPrefix=h.formatPrefix,h}var i,o=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},a=function(t){return(t=o(Math.abs(t)))?t[1]:NaN},u=function(t,e){return function(n,r){for(var i=n.length,o=[],a=0,u=t[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),o.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=t[a=(a+1)%t.length];return o.reverse().join(e)}},s=function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}},f=function(t,e){var n=o(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},c={"":function(t,e){t:for(var n,r=(t=t.toPrecision(e)).length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return f(100*t,e)},r:f,s:function(t,e){var n=o(t,e);if(!n)return t+"";var r=n[0],a=n[1],u=a-(i=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=r.length;return u===s?r:u>s?r+new Array(u-s+1).join("0"):u>0?r.slice(0,u)+"."+r.slice(u):"0."+new Array(1-u).join("0")+o(t,Math.max(0,e+u-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},l=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;e.prototype=n.prototype,n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var h,d=function(t){return t},p=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],m=function(t){function n(t){function n(t){var e,n,o,c=_,h=x;if("c"===b)h=w(t)+h,t="";else{var d=(t=+t)<0;if(t=w(Math.abs(t),v),d&&0==+t&&(d=!1),c=(d?"("===s?s:"-":"-"===s||"("===s?"":s)+c,h=h+("s"===b?p[8+i/3]:"")+(d&&"("===s?")":""),M)for(e=-1,n=t.length;++e<n;)if(48>(o=t.charCodeAt(e))||o>57){h=(46===o?f+t.slice(e+1):t.slice(e))+h,t=t.slice(0,e);break}}y&&!m&&(t=r(t,1/0));var E=c.length+t.length+h.length,S=E<g?new Array(g-E+1).join(a):"";switch(y&&m&&(t=r(S+t,S.length?g-h.length:1/0),S=""),u){case"<":t=c+t+h+S;break;case"=":t=c+S+t+h;break;case"^":t=S.slice(0,E=S.length>>1)+c+t+h+S.slice(E);break;default:t=S+c+t+h}return l(t)}var a=(t=e(t)).fill,u=t.align,s=t.sign,d=t.symbol,m=t.zero,g=t.width,y=t.comma,v=t.precision,b=t.type,_="$"===d?o[0]:"#"===d&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",x="$"===d?o[1]:/[%p]/.test(b)?h:"",w=c[b],M=!b||/[defgprs%]/.test(b);return v=null==v?b?6:12:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),n.toString=function(){return t+""},n}var r=t.grouping&&t.thousands?u(t.grouping,t.thousands):d,o=t.currency,f=t.decimal,l=t.numerals?s(t.numerals):d,h=t.percent||"%";return{format:n,formatPrefix:function(t,r){var i=n((t=e(t),t.type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor(a(r)/3))),u=Math.pow(10,-o),s=p[8+o/3];return function(t){return i(u*t)+s}}}};r({decimal:".",thousands:",",grouping:[3],currency:["$",""]});t.formatDefaultLocale=r,t.formatLocale=m,t.formatSpecifier=e,t.precisionFixed=function(t){return Math.max(0,-a(Math.abs(t)))},t.precisionPrefix=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(a(e)/3)))-a(Math.abs(t)))},t.precisionRound=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,a(e)-a(t))+1},Object.defineProperty(t,"__esModule",{value:!0})})},{}],19:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],i):i(r.d3=r.d3||{},r.d3)}(this,function(t,e){"use strict";function n(){this.reset()}function r(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function i(t){return t>1?0:t<-1?Be:Math.acos(t)}function o(t){return t>1?Ie:t<-1?-Ie:Math.asin(t)}function a(t){return(t=Ke(t/2))*t}function u(){}function s(t,e){t&&rn.hasOwnProperty(t.type)&&rn[t.type](t,e)}function f(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function c(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)f(t[n],e,1);e.polygonEnd()}function l(){sn.point=d}function h(){p(oe,ae)}function d(t,e){sn.point=p,oe=t,ae=e,ue=t*=He,se=Ge(e=(e*=He)/2+qe),fe=Ke(e)}function p(t,e){e=(e*=He)/2+qe;var n=(t*=He)-ue,r=n>=0?1:-1,i=r*n,o=Ge(e),a=Ke(e),u=fe*a,s=se*o+u*Ge(i),f=u*r*Ke(i);an.add(Xe(f,s)),ue=t,se=o,fe=a}function m(t){return[Xe(t[1],t[0]),o(t[2])]}function g(t){var e=t[0],n=t[1],r=Ge(n);return[r*Ge(e),r*Ke(e),Ke(n)]}function y(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function v(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function b(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function _(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function x(t){var e=tn(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function w(t,e){ve.push(be=[ce=t,he=t]),e<le&&(le=e),e>de&&(de=e)}function M(t,e){var n=g([t*He,e*He]);if(ye){var r=v(ye,n),i=v([r[1],-r[0],0],r);x(i),i=m(i);var o,a=t-pe,u=a>0?1:-1,s=i[0]*Fe*u,f=Ye(a)>180;f^(u*pe<s&&s<u*t)?(o=i[1]*Fe)>de&&(de=o):(s=(s+360)%360-180,f^(u*pe<s&&s<u*t)?(o=-i[1]*Fe)<le&&(le=o):(e<le&&(le=e),e>de&&(de=e))),f?t<pe?C(ce,t)>C(ce,he)&&(he=t):C(t,he)>C(ce,he)&&(ce=t):he>=ce?(t<ce&&(ce=t),t>he&&(he=t)):t>pe?C(ce,t)>C(ce,he)&&(he=t):C(t,he)>C(ce,he)&&(ce=t)}else ve.push(be=[ce=t,he=t]);e<le&&(le=e),e>de&&(de=e),ye=n,pe=t}function E(){cn.point=M}function S(){be[0]=ce,be[1]=he,cn.point=w,ye=null}function k(t,e){if(ye){var n=t-pe;fn.add(Ye(n)>180?n+(n>0?360:-360):n)}else me=t,ge=e;sn.point(t,e),M(t,e)}function A(){sn.lineStart()}function T(){k(me,ge),sn.lineEnd(),Ye(fn)>ze&&(ce=-(he=180)),be[0]=ce,be[1]=he,ye=null}function C(t,e){return(e-=t)<0?e+360:e}function N(t,e){return t[0]-e[0]}function O(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function j(t,e){t*=He;var n=Ge(e*=He);R(n*Ge(t),n*Ke(t),Ke(e))}function R(t,e,n){we+=(t-we)/++_e,Me+=(e-Me)/_e,Ee+=(n-Ee)/_e}function D(){ln.point=L}function L(t,e){t*=He;var n=Ge(e*=He);Re=n*Ge(t),De=n*Ke(t),Le=Ke(e),ln.point=P,R(Re,De,Le)}function P(t,e){t*=He;var n=Ge(e*=He),r=n*Ge(t),i=n*Ke(t),o=Ke(e),a=Xe(tn((a=De*o-Le*i)*a+(a=Le*r-Re*o)*a+(a=Re*i-De*r)*a),Re*r+De*i+Le*o);xe+=a,Se+=a*(Re+(Re=r)),ke+=a*(De+(De=i)),Ae+=a*(Le+(Le=o)),R(Re,De,Le)}function z(){ln.point=j}function B(){ln.point=q}function I(){U(Oe,je),ln.point=j}function q(t,e){Oe=t,je=e,t*=He,e*=He,ln.point=U;var n=Ge(e);Re=n*Ge(t),De=n*Ke(t),Le=Ke(e),R(Re,De,Le)}function U(t,e){t*=He;var n=Ge(e*=He),r=n*Ge(t),i=n*Ke(t),a=Ke(e),u=De*a-Le*i,s=Le*r-Re*a,f=Re*i-De*r,c=tn(u*u+s*s+f*f),l=o(c),h=c&&-l/c;Te+=h*u,Ce+=h*s,Ne+=h*f,xe+=l,Se+=l*(Re+(Re=r)),ke+=l*(De+(De=i)),Ae+=l*(Le+(Le=a)),R(Re,De,Le)}function F(t,e){return[t>Be?t-Ue:t<-Be?t+Ue:t,e]}function H(t,e,n){return(t%=Ue)?e||n?dn(W(t),X(e,n)):W(t):e||n?X(e,n):F}function Y(t){return function(e,n){return e+=t,[e>Be?e-Ue:e<-Be?e+Ue:e,n]}}function W(t){var e=Y(t);return e.invert=Y(-t),e}function X(t,e){function n(t,e){var n=Ge(e),s=Ge(t)*n,f=Ke(t)*n,c=Ke(e),l=c*r+s*i;return[Xe(f*a-l*u,s*r-c*i),o(l*a+f*u)]}var r=Ge(t),i=Ke(t),a=Ge(e),u=Ke(e);return n.invert=function(t,e){var n=Ge(e),s=Ge(t)*n,f=Ke(t)*n,c=Ke(e),l=c*a-f*u;return[Xe(f*a+c*u,s*r+l*i),o(l*r-s*i)]},n}function G(t,e,n,r,i,o){if(n){var a=Ge(e),u=Ke(e),s=r*n;null==i?(i=e+r*Ue,o=e-s/2):(i=V(a,i),o=V(a,o),(r>0?i<o:i>o)&&(i+=r*Ue));for(var f,c=i;r>0?c>o:c<o;c-=s)f=m([a,-u*Ge(c),-u*Ke(c)]),t.point(f[0],f[1])}}function V(t,e){(e=g(e))[0]-=t,x(e);var n=i(-e[1]);return((-e[2]<0?-n:n)+Ue-ze)%Ue}function $(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Q(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Z(t){return t.length>1}function K(t,e){return((t=t.x)[0]<0?t[1]-Ie-ze:Ie-t[1])-((e=e.x)[0]<0?e[1]-Ie-ze:Ie-e[1])}function J(t,e,n,r){var i,o,a=Ke(t-n);return Ye(a)>ze?We((Ke(e)*(o=Ge(r))*Ke(n)-Ke(r)*(i=Ge(e))*Ke(t))/(i*o*a)):(e+r)/2}function tt(t,n,r,i){function o(e,o){return t<=e&&e<=r&&n<=o&&o<=i}function a(e,o,a,s){var c=0,l=0;if(null==e||(c=u(e,a))!==(l=u(o,a))||f(e,o)<0^a>0)do{s.point(0===c||3===c?t:r,c>1?i:n)}while((c=(c+a+4)%4)!==l);else s.point(o[0],o[1])}function u(e,i){return Ye(e[0]-t)<ze?i>0?0:3:Ye(e[0]-r)<ze?i>0?2:1:Ye(e[1]-n)<ze?i>0?1:0:i>0?3:2}function s(t,e){return f(t.x,e.x)}function f(t,e){var n=u(t,1),r=u(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(u){function f(t,e){o(t,e)&&M.point(t,e)}function c(){for(var e=0,n=0,r=d.length;n<r;++n)for(var o,a,u=d[n],s=1,f=u.length,c=u[0],l=c[0],h=c[1];s<f;++s)o=l,a=h,l=(c=u[s])[0],h=c[1],a<=i?h>i&&(l-o)*(i-a)>(h-a)*(t-o)&&++e:h<=i&&(l-o)*(i-a)<(h-a)*(t-o)&&--e;return e}function l(e,a){var u=o(e,a);if(d&&p.push([e,a]),x)m=e,g=a,y=u,x=!1,u&&(M.lineStart(),M.point(e,a));else if(u&&_)M.point(e,a);else{var s=[v=Math.max(Pn,Math.min(Ln,v)),b=Math.max(Pn,Math.min(Ln,b))],f=[e=Math.max(Pn,Math.min(Ln,e)),a=Math.max(Pn,Math.min(Ln,a))];Dn(s,f,t,n,r,i)?(_||(M.lineStart(),M.point(s[0],s[1])),M.point(f[0],f[1]),u||M.lineEnd(),w=!1):u&&(M.lineStart(),M.point(e,a),w=!1)}v=e,b=a,_=u}var h,d,p,m,g,y,v,b,_,x,w,M=u,E=kn(),S={point:f,lineStart:function(){S.point=l,d&&d.push(p=[]),x=!0,_=!1,v=b=NaN},lineEnd:function(){h&&(l(m,g),y&&_&&E.rejoin(),h.push(E.result())),S.point=f,_&&M.lineEnd()},polygonStart:function(){M=E,h=[],d=[],w=!0},polygonEnd:function(){var t=c(),n=w&&t,r=(h=e.merge(h)).length;(n||r)&&(u.polygonStart(),n&&(u.lineStart(),a(null,null,1,u),u.lineEnd()),r&&Tn(h,s,t,a,u),u.polygonEnd()),M=u,h=d=p=null}};return S}}function et(){Bn.point=Bn.lineEnd=u}function nt(t,e){pn=t*=He,mn=Ke(e*=He),gn=Ge(e),Bn.point=rt}function rt(t,e){t*=He;var n=Ke(e*=He),r=Ge(e),i=Ye(t-pn),o=Ge(i),a=r*Ke(i),u=gn*n-mn*r*o,s=mn*n+gn*r*o;zn.add(Xe(tn(a*a+u*u),s)),pn=t,mn=n,gn=r}function it(t,e){return!(!t||!Yn.hasOwnProperty(t.type))&&Yn[t.type](t,e)}function ot(t,e){return 0===Fn(t,e)}function at(t,e){var n=Fn(t[0],t[1]);return Fn(t[0],e)+Fn(e,t[1])<=n+ze}function ut(t,e){return!!Nn(t.map(st),ft(e))}function st(t){return(t=t.map(ft)).pop(),t}function ft(t){return[t[0]*He,t[1]*He]}function ct(t,n,r){var i=e.range(t,n-ze,r).concat(n);return function(t){return i.map(function(e){return[t,e]})}}function lt(t,n,r){var i=e.range(t,n-ze,r).concat(n);return function(t){return i.map(function(e){return[e,t]})}}function ht(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return e.range(Ve(a/y)*y,o,y).map(d).concat(e.range(Ve(c/v)*v,f,v).map(p)).concat(e.range(Ve(i/m)*m,r,m).filter(function(t){return Ye(t%y)>ze}).map(l)).concat(e.range(Ve(s/g)*g,u,g).filter(function(t){return Ye(t%v)>ze}).map(h))}var r,i,o,a,u,s,f,c,l,h,d,p,m=10,g=m,y=90,v=360,b=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(p(f).slice(1),d(o).reverse().slice(1),p(c).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(a=+e[0][0],o=+e[1][0],c=+e[0][1],f=+e[1][1],a>o&&(e=a,a=o,o=e),c>f&&(e=c,c=f,f=e),t.precision(b)):[[a,c],[o,f]]},t.extentMinor=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],s=+e[0][1],u=+e[1][1],i>r&&(e=i,i=r,r=e),s>u&&(e=s,s=u,u=e),t.precision(b)):[[i,s],[r,u]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(y=+e[0],v=+e[1],t):[y,v]},t.stepMinor=function(e){return arguments.length?(m=+e[0],g=+e[1],t):[m,g]},t.precision=function(e){return arguments.length?(b=+e,l=ct(s,u,90),h=lt(i,r,b),d=ct(c,f,90),p=lt(a,o,b),t):b},t.extentMajor([[-180,-90+ze],[180,90-ze]]).extentMinor([[-180,-80-ze],[180,80+ze]])}function dt(){Vn.point=pt}function pt(t,e){Vn.point=mt,yn=bn=t,vn=_n=e}function mt(t,e){Gn.add(_n*t-bn*e),bn=t,_n=e}function gt(){mt(yn,vn)}function yt(t,e){tr+=t,er+=e,++nr}function vt(){fr.point=bt}function bt(t,e){fr.point=_t,yt(Mn=t,En=e)}function _t(t,e){var n=t-Mn,r=e-En,i=tn(n*n+r*r);rr+=i*(Mn+t)/2,ir+=i*(En+e)/2,or+=i,yt(Mn=t,En=e)}function xt(){fr.point=yt}function wt(){fr.point=Et}function Mt(){St(xn,wn)}function Et(t,e){fr.point=St,yt(xn=Mn=t,wn=En=e)}function St(t,e){var n=t-Mn,r=e-En,i=tn(n*n+r*r);rr+=i*(Mn+t)/2,ir+=i*(En+e)/2,or+=i,ar+=(i=En*t-Mn*e)*(Mn+t),ur+=i*(En+e),sr+=3*i,yt(Mn=t,En=e)}function kt(t){this._context=t}function At(t,e){gr.point=Tt,lr=dr=t,hr=pr=e}function Tt(t,e){dr-=t,pr-=e,mr.add(tn(dr*dr+pr*pr)),dr=t,pr=e}function Ct(){this._string=[]}function Nt(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ot(t){return function(e){var n=new jt;for(var r in t)n[r]=t[r];return n.stream=e,n}}function jt(){}function Rt(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),on(n,t.stream(Jn));var a=Jn.result(),u=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),s=+e[0][0]+(r-u*(a[1][0]+a[0][0]))/2,f=+e[0][1]+(i-u*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*u).translate([s,f])}function Dt(t,e,n){return Rt(t,[[0,0],e],n)}function Lt(t){return Ot({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Pt(t,e){function n(r,i,a,u,s,f,c,l,h,d,p,m,g,y){var v=c-r,b=l-i,_=v*v+b*b;if(_>4*e&&g--){var x=u+d,w=s+p,M=f+m,E=tn(x*x+w*w+M*M),S=o(M/=E),k=Ye(Ye(M)-1)<ze||Ye(a-h)<ze?(a+h)/2:Xe(w,x),A=t(k,S),T=A[0],C=A[1],N=T-r,O=C-i,j=b*N-v*O;(j*j/_>e||Ye((v*N+b*O)/_-.5)>.3||u*d+s*p+f*m<vr)&&(n(r,i,a,u,s,f,T,C,k,x/=E,w/=E,M,g,y),y.point(T,C),n(T,C,k,x,w,M,c,l,h,d,p,m,g,y))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){v=NaN,M.point=o,e.lineStart()}function o(r,i){var o=g([r,i]),a=t(r,i);n(v,b,y,_,x,w,v=a[0],b=a[1],y=r,_=o[0],x=o[1],w=o[2],yr,e),e.point(v,b)}function a(){M.point=r,e.lineEnd()}function u(){i(),M.point=s,M.lineEnd=f}function s(t,e){o(c=t,e),l=v,h=b,d=_,p=x,m=w,M.point=o}function f(){n(v,b,y,_,x,w,l,h,c,d,p,m,yr,e),M.lineEnd=a,a()}var c,l,h,d,p,m,y,v,b,_,x,w,M={point:r,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),M.lineStart=u},polygonEnd:function(){e.polygonEnd(),M.lineStart=i}};return M}}function zt(t){return Ot({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function Bt(t){return It(function(){return t})()}function It(t){function e(t){return t=c(t[0]*He,t[1]*He),[t[0]*g+u,s-t[1]*g]}function n(t){return(t=c.invert((t[0]-u)/g,(s-t[1])/g))&&[t[0]*Fe,t[1]*Fe]}function r(t,e){return t=a(t,e),[t[0]*g+u,s-t[1]*g]}function i(){c=dn(f=H(x,w,M),a);var t=a(b,_);return u=y-t[0]*g,s=v+t[1]*g,o()}function o(){return p=m=null,e}var a,u,s,f,c,l,h,d,p,m,g=150,y=480,v=250,b=0,_=0,x=0,w=0,M=0,E=null,S=jn,k=null,A=Wn,T=.5,C=br(r,T);return e.stream=function(t){return p&&m===t?p:p=_r(zt(f)(S(C(A(m=t)))))},e.preclip=function(t){return arguments.length?(S=t,E=void 0,o()):S},e.postclip=function(t){return arguments.length?(A=t,k=l=h=d=null,o()):A},e.clipAngle=function(t){return arguments.length?(S=+t?Rn(E=t*He):(E=null,jn),o()):E*Fe},e.clipExtent=function(t){return arguments.length?(A=null==t?(k=l=h=d=null,Wn):tt(k=+t[0][0],l=+t[0][1],h=+t[1][0],d=+t[1][1]),o()):null==k?null:[[k,l],[h,d]]},e.scale=function(t){return arguments.length?(g=+t,i()):g},e.translate=function(t){return arguments.length?(y=+t[0],v=+t[1],i()):[y,v]},e.center=function(t){return arguments.length?(b=t[0]%360*He,_=t[1]%360*He,i()):[b*Fe,_*Fe]},e.rotate=function(t){return arguments.length?(x=t[0]%360*He,w=t[1]%360*He,M=t.length>2?t[2]%360*He:0,i()):[x*Fe,w*Fe,M*Fe]},e.precision=function(t){return arguments.length?(C=br(r,T=t*t),o()):tn(T)},e.fitExtent=function(t,n){return Rt(e,t,n)},e.fitSize=function(t,n){return Dt(e,t,n)},function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,i()}}function qt(t){var e=0,n=Be/3,r=It(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*He,n=t[1]*He):[e*Fe,n*Fe]},i}function Ut(t){function e(t,e){return[t*n,Ke(e)/n]}var n=Ge(t);return e.invert=function(t,e){return[t/n,o(e*n)]},e}function Ft(t,e){function n(t,e){var n=tn(a-2*i*Ke(e))/i;return[n*Ke(t*=i),u-n*Ge(t)]}var r=Ke(t),i=(r+Ke(e))/2;if(Ye(i)<ze)return Ut(t);var a=1+r*(2*i-r),u=tn(a)/i;return n.invert=function(t,e){var n=u-e;return[Xe(t,Ye(n))/i*Je(n),o((a-(t*t+n*n)*i*i)/(2*i))]},n}function Ht(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function Yt(t){return function(e,n){var r=Ge(e),i=Ge(n),o=t(r*i);return[o*i*Ke(e),o*Ke(n)]}}function Wt(t){return function(e,n){var r=tn(e*e+n*n),i=t(r),a=Ke(i),u=Ge(i);return[Xe(e*a,r*u),o(r&&n*a/r)]}}function Xt(t,e){return[t,Qe(en((Ie+e)/2))]}function Gt(t){function e(){var e=Be*u(),a=o(Sn(o.rotate()).invert([0,0]));return f(null==c?[[a[0]-e,a[1]-e],[a[0]+e,a[1]+e]]:t===Xt?[[Math.max(a[0]-e,c),n],[Math.min(a[0]+e,r),i]]:[[c,Math.max(a[1]-e,n)],[r,Math.min(a[1]+e,i)]])}var n,r,i,o=Bt(t),a=o.center,u=o.scale,s=o.translate,f=o.clipExtent,c=null;return o.scale=function(t){return arguments.length?(u(t),e()):u()},o.translate=function(t){return arguments.length?(s(t),e()):s()},o.center=function(t){return arguments.length?(a(t),e()):a()},o.clipExtent=function(t){return arguments.length?(null==t?c=n=r=i=null:(c=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),e()):null==c?null:[[c,n],[r,i]]},e()}function Vt(t){return en((Ie+t)/2)}function $t(t,e){function n(t,e){o>0?e<-Ie+ze&&(e=-Ie+ze):e>Ie-ze&&(e=Ie-ze);var n=o/Ze(Vt(e),i);return[n*Ke(i*t),o-n*Ge(i*t)]}var r=Ge(t),i=t===e?Ke(t):Qe(r/Ge(e))/Qe(Vt(e)/Vt(t)),o=r*Ze(Vt(t),i)/i;return i?(n.invert=function(t,e){var n=o-e,r=Je(i)*tn(t*t+n*n);return[Xe(t,Ye(n))/i*Je(n),2*We(Ze(o/r,1/i))-Ie]},n):Xt}function Qt(t,e){return[t,e]}function Zt(t,e){function n(t,e){var n=o-e,r=i*t;return[n*Ke(r),o-n*Ge(r)]}var r=Ge(t),i=t===e?Ke(t):(r-Ge(e))/(e-t),o=r/i+t;return Ye(i)<ze?Qt:(n.invert=function(t,e){var n=o-e;return[Xe(t,Ye(n))/i*Je(n),o-Je(i)*tn(t*t+n*n)]},n)}function Kt(t,e){var n=Ge(e),r=Ge(t)*n;return[n*Ke(t)/r,Ke(e)/r]}function Jt(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?Wn:Ot({point:function(i,o){this.stream.point(i*t+n,o*e+r)}})}function te(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function ee(t,e){return[Ge(e)*Ke(t),Ke(e)]}function ne(t,e){var n=Ge(e),r=1+Ge(t)*n;return[n*Ke(t)/r,Ke(e)/r]}function re(t,e){return[Qe(en((Ie+e)/2)),-t]}var ie=function(){return new n};n.prototype={constructor:n,reset:function(){this.s=this.t=0},add:function(t){r(Pe,t,this.t),r(this,Pe.s,this.s),this.s?this.t+=Pe.t:this.s=Pe.t},valueOf:function(){return this.s}};var oe,ae,ue,se,fe,ce,le,he,de,pe,me,ge,ye,ve,be,_e,xe,we,Me,Ee,Se,ke,Ae,Te,Ce,Ne,Oe,je,Re,De,Le,Pe=new n,ze=1e-6,Be=Math.PI,Ie=Be/2,qe=Be/4,Ue=2*Be,Fe=180/Be,He=Be/180,Ye=Math.abs,We=Math.atan,Xe=Math.atan2,Ge=Math.cos,Ve=Math.ceil,$e=Math.exp,Qe=Math.log,Ze=Math.pow,Ke=Math.sin,Je=Math.sign||function(t){return t>0?1:t<0?-1:0},tn=Math.sqrt,en=Math.tan,nn={Feature:function(t,e){s(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)s(n[r].geometry,e)}},rn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){f(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)f(n[r],e,0)},Polygon:function(t,e){c(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)c(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)s(n[r],e)}},on=function(t,e){t&&nn.hasOwnProperty(t.type)?nn[t.type](t,e):s(t,e)},an=ie(),un=ie(),sn={point:u,lineStart:u,lineEnd:u,polygonStart:function(){an.reset(),sn.lineStart=l,sn.lineEnd=h},polygonEnd:function(){var t=+an;un.add(t<0?Ue+t:t),this.lineStart=this.lineEnd=this.point=u},sphere:function(){un.add(Ue)}},fn=ie(),cn={point:w,lineStart:E,lineEnd:S,polygonStart:function(){cn.point=k,cn.lineStart=A,cn.lineEnd=T,fn.reset(),sn.polygonStart()},polygonEnd:function(){sn.polygonEnd(),cn.point=w,cn.lineStart=E,cn.lineEnd=S,an<0?(ce=-(he=180),le=-(de=90)):fn>ze?de=90:fn<-ze&&(le=-90),be[0]=ce,be[1]=he}},ln={sphere:u,point:j,lineStart:D,lineEnd:z,polygonStart:function(){ln.lineStart=B,ln.lineEnd=I},polygonEnd:function(){ln.lineStart=D,ln.lineEnd=z}},hn=function(t){return function(){return t}},dn=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};F.invert=F;var pn,mn,gn,yn,vn,bn,_n,xn,wn,Mn,En,Sn=function(t){function e(e){return e=t(e[0]*He,e[1]*He),e[0]*=Fe,e[1]*=Fe,e}return t=H(t[0]*He,t[1]*He,t.length>2?t[2]*He:0),e.invert=function(e){return e=t.invert(e[0]*He,e[1]*He),e[0]*=Fe,e[1]*=Fe,e},e},kn=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:u,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},An=function(t,e){return Ye(t[0]-e[0])<ze&&Ye(t[1]-e[1])<ze},Tn=function(t,e,n,r,i){var o,a,u=[],s=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(An(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else u.push(n=new $(r,t,null,!0)),s.push(n.o=new $(r,null,n,!1)),u.push(n=new $(a,t,null,!1)),s.push(n.o=new $(a,null,n,!0))}}),u.length){for(s.sort(e),Q(u),Q(s),o=0,a=s.length;o<a;++o)s[o].e=n=!n;for(var f,c,l=u[0];;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;f=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=f.length;o<a;++o)i.point((c=f[o])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(f=h.p.z,o=f.length-1;o>=0;--o)i.point((c=f[o])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}f=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}},Cn=ie(),Nn=function(t,e){var n=e[0],r=e[1],i=[Ke(n),-Ge(n),0],a=0,u=0;Cn.reset();for(var s=0,f=t.length;s<f;++s)if(l=(c=t[s]).length)for(var c,l,h=c[l-1],d=h[0],p=h[1]/2+qe,m=Ke(p),y=Ge(p),b=0;b<l;++b,d=w,m=E,y=S,h=_){var _=c[b],w=_[0],M=_[1]/2+qe,E=Ke(M),S=Ge(M),k=w-d,A=k>=0?1:-1,T=A*k,C=T>Be,N=m*E;if(Cn.add(Xe(N*A*Ke(T),y*S+N*Ge(T))),a+=C?k+A*Ue:k,C^d>=n^w>=n){var O=v(g(h),g(_));x(O);var j=v(i,O);x(j);var R=(C^k>=0?-1:1)*o(j[2]);(r>R||r===R&&(O[0]||O[1]))&&(u+=C^k>=0?1:-1)}}return(a<-ze||a<ze&&Cn<-ze)^1&u},On=function(t,n,r,i){return function(o){function a(e,n){t(e,n)&&o.point(e,n)}function u(t,e){g.point(t,e)}function s(){_.point=u,g.lineStart()}function f(){_.point=a,g.lineEnd()}function c(t,e){m.push([t,e]),v.point(t,e)}function l(){v.lineStart(),m=[]}function h(){c(m[0][0],m[0][1]),v.lineEnd();var t,e,n,r,i=v.clean(),a=y.result(),u=a.length;if(m.pop(),d.push(m),m=null,u)if(1&i){if(n=a[0],(e=n.length-1)>0){for(b||(o.polygonStart(),b=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else u>1&&2&i&&a.push(a.pop().concat(a.shift())),p.push(a.filter(Z))}var d,p,m,g=n(o),y=kn(),v=n(y),b=!1,_={point:a,lineStart:s,lineEnd:f,polygonStart:function(){_.point=c,_.lineStart=l,_.lineEnd=h,p=[],d=[]},polygonEnd:function(){_.point=a,_.lineStart=s,_.lineEnd=f,p=e.merge(p);var t=Nn(d,i);p.length?(b||(o.polygonStart(),b=!0),Tn(p,K,t,r,o)):t&&(b||(o.polygonStart(),b=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),p=d=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return _}},jn=On(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var u=o>0?Be:-Be,s=Ye(o-n);Ye(s-Be)<ze?(t.point(n,r=(r+a)/2>0?Ie:-Ie),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),e=0):i!==u&&s>=Be&&(Ye(n-i)<ze&&(n-=i*ze),Ye(o-u)<ze&&(o-=u*ze),r=J(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),e=0),t.point(n=o,r=a),i=u},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*Ie,r.point(-Be,i),r.point(0,i),r.point(Be,i),r.point(Be,0),r.point(Be,-i),r.point(0,-i),r.point(-Be,-i),r.point(-Be,0),r.point(-Be,i);else if(Ye(t[0]-e[0])>ze){var o=t[0]<e[0]?Be:-Be;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-Be,-Ie]),Rn=function(t){function e(t,e){return Ge(t)*Ge(e)>i}function n(t,e,n){var r=[1,0,0],o=v(g(t),g(e)),a=y(o,o),u=o[0],s=a-u*u;if(!s)return!n&&t;var f=i*a/s,c=-i*u/s,l=v(r,o),h=_(r,f);b(h,_(o,c));var d=l,p=y(h,d),x=y(d,d),w=p*p-x*(y(h,h)-1);if(!(w<0)){var M=tn(w),E=_(d,(-p-M)/x);if(b(E,h),E=m(E),!n)return E;var S,k=t[0],A=e[0],T=t[1],C=e[1];A<k&&(S=k,k=A,A=S);var N=A-k,O=Ye(N-Be)<ze,j=O||N<ze;if(!O&&C<T&&(S=T,T=C,C=S),j?O?T+C>0^E[1]<(Ye(E[0]-k)<ze?T:C):T<=E[1]&&E[1]<=C:N>Be^(k<=E[0]&&E[0]<=A)){var R=_(d,(-p+M)/x);return b(R,h),[E,m(R)]}}}function r(e,n){var r=a?t:Be-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var i=Ge(t),o=6*He,a=i>0,u=Ye(i)>ze;return On(e,function(t){var i,o,s,f,c;return{lineStart:function(){f=s=!1,c=1},point:function(l,h){var d,p=[l,h],m=e(l,h),g=a?m?0:r(l,h):m?r(l+(l<0?Be:-Be),h):0;if(!i&&(f=s=m)&&t.lineStart(),m!==s&&(!(d=n(i,p))||An(i,d)||An(p,d))&&(p[0]+=ze,p[1]+=ze,m=e(p[0],p[1])),m!==s)c=0,m?(t.lineStart(),d=n(p,i),t.point(d[0],d[1])):(d=n(i,p),t.point(d[0],d[1]),t.lineEnd()),i=d;else if(u&&i&&a^m){var y;g&o||!(y=n(p,i,!0))||(c=0,a?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!m||i&&An(i,p)||t.point(p[0],p[1]),i=p,s=m,o=g},lineEnd:function(){s&&t.lineEnd(),i=null},clean:function(){return c|(f&&s)<<1}}},function(e,n,r,i){G(i,t,o,r,e,n)},a?[0,-t]:[-Be,t-Be])},Dn=function(t,e,n,r,i,o){var a,u=t[0],s=t[1],f=0,c=1,l=e[0]-u,h=e[1]-s;if(a=n-u,l||!(a>0)){if(a/=l,l<0){if(a<f)return;a<c&&(c=a)}else if(l>0){if(a>c)return;a>f&&(f=a)}if(a=i-u,l||!(a<0)){if(a/=l,l<0){if(a>c)return;a>f&&(f=a)}else if(l>0){if(a<f)return;a<c&&(c=a)}if(a=r-s,h||!(a>0)){if(a/=h,h<0){if(a<f)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>f&&(f=a)}if(a=o-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>f&&(f=a)}else if(h>0){if(a<f)return;a<c&&(c=a)}return f>0&&(t[0]=u+f*l,t[1]=s+f*h),c<1&&(e[0]=u+c*l,e[1]=s+c*h),!0}}}}},Ln=1e9,Pn=-Ln,zn=ie(),Bn={sphere:u,point:u,lineStart:function(){Bn.point=nt,Bn.lineEnd=et},lineEnd:u,polygonStart:u,polygonEnd:u},In=function(t){return zn.reset(),on(t,Bn),+zn},qn=[null,null],Un={type:"LineString",coordinates:qn},Fn=function(t,e){return qn[0]=t,qn[1]=e,In(Un)},Hn={Feature:function(t,e){return it(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(it(n[r].geometry,e))return!0;return!1}},Yn={Sphere:function(){return!0},Point:function(t,e){return ot(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(ot(n[r],e))return!0;return!1},LineString:function(t,e){return at(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(at(n[r],e))return!0;return!1},Polygon:function(t,e){return ut(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(ut(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(it(n[r],e))return!0;return!1}},Wn=function(t){return t},Xn=ie(),Gn=ie(),Vn={point:u,lineStart:u,lineEnd:u,polygonStart:function(){Vn.lineStart=dt,Vn.lineEnd=gt},polygonEnd:function(){Vn.lineStart=Vn.lineEnd=Vn.point=u,Xn.add(Ye(Gn)),Gn.reset()},result:function(){var t=Xn/2;return Xn.reset(),t}},$n=1/0,Qn=$n,Zn=-$n,Kn=Zn,Jn={point:function(t,e){t<$n&&($n=t),t>Zn&&(Zn=t),e<Qn&&(Qn=e),e>Kn&&(Kn=e)},lineStart:u,lineEnd:u,polygonStart:u,polygonEnd:u,result:function(){var t=[[$n,Qn],[Zn,Kn]];return Zn=Kn=-(Qn=$n=1/0),t}},tr=0,er=0,nr=0,rr=0,ir=0,or=0,ar=0,ur=0,sr=0,fr={point:yt,lineStart:vt,lineEnd:xt,polygonStart:function(){fr.lineStart=wt,fr.lineEnd=Mt},polygonEnd:function(){fr.point=yt,fr.lineStart=vt,fr.lineEnd=xt},result:function(){var t=sr?[ar/sr,ur/sr]:or?[rr/or,ir/or]:nr?[tr/nr,er/nr]:[NaN,NaN];return tr=er=nr=rr=ir=or=ar=ur=sr=0,t}};kt.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Ue)}},result:u};var cr,lr,hr,dr,pr,mr=ie(),gr={point:u,lineStart:function(){gr.point=At},lineEnd:function(){cr&&Tt(lr,hr),gr.point=u},polygonStart:function(){cr=!0},polygonEnd:function(){cr=null},result:function(){var t=+mr;return mr.reset(),t}};Ct.prototype={_radius:4.5,_circle:Nt(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Nt(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};jt.prototype={constructor:jt,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var yr=16,vr=Ge(30*He),br=function(t,e){return+e?Pt(t,e):Lt(t)},_r=Ot({point:function(t,e){this.stream.point(t*He,e*He)}}),xr=function(){return qt(Ft).scale(155.424).center([0,33.6442])},wr=function(){return xr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},Mr=Yt(function(t){return tn(2/(1+t))});Mr.invert=Wt(function(t){return 2*o(t/2)});var Er=Yt(function(t){return(t=i(t))&&t/Ke(t)});Er.invert=Wt(function(t){return t});Xt.invert=function(t,e){return[t,2*We($e(e))-Ie]};Qt.invert=Qt;Kt.invert=Wt(We);te.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Ye(n)>ze&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};ee.invert=Wt(o);ne.invert=Wt(function(t){return 2*We(t)});re.invert=function(t,e){return[-e,2*We($e(t))-Ie]};t.geoArea=function(t){return un.reset(),on(t,sn),2*un},t.geoBounds=function(t){var e,n,r,i,o,a,u;if(de=he=-(ce=le=1/0),ve=[],on(t,cn),n=ve.length){for(ve.sort(N),e=1,o=[r=ve[0]];e<n;++e)O(r,(i=ve[e])[0])||O(r,i[1])?(C(r[0],i[1])>C(r[0],r[1])&&(r[1]=i[1]),C(i[0],r[1])>C(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(u=C(r[1],i[0]))>a&&(a=u,ce=i[0],he=r[1])}return ve=be=null,ce===1/0||le===1/0?[[NaN,NaN],[NaN,NaN]]:[[ce,le],[he,de]]},t.geoCentroid=function(t){_e=xe=we=Me=Ee=Se=ke=Ae=Te=Ce=Ne=0,on(t,ln);var e=Te,n=Ce,r=Ne,i=e*e+n*n+r*r;return i<1e-12&&(e=Se,n=ke,r=Ae,xe<ze&&(e=we,n=Me,r=Ee),(i=e*e+n*n+r*r)<1e-12)?[NaN,NaN]:[Xe(n,e)*Fe,o(r/tn(i))*Fe]},t.geoCircle=function(){function t(){var t=r.apply(this,arguments),u=i.apply(this,arguments)*He,s=o.apply(this,arguments)*He;return e=[],n=H(-t[0]*He,-t[1]*He,0).invert,G(a,u,s,1),t={type:"Polygon",coordinates:[e]},e=n=null,t}var e,n,r=hn([0,0]),i=hn(90),o=hn(6),a={point:function(t,r){e.push(t=n(t,r)),t[0]*=Fe,t[1]*=Fe}};return t.center=function(e){return arguments.length?(r="function"==typeof e?e:hn([+e[0],+e[1]]),t):r},t.radius=function(e){return arguments.length?(i="function"==typeof e?e:hn(+e),t):i},t.precision=function(e){return arguments.length?(o="function"==typeof e?e:hn(+e),t):o},t},t.geoClipAntimeridian=jn,t.geoClipCircle=Rn,t.geoClipExtent=function(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=tt(r,i,o,a)(e=n)},extent:function(u){return arguments.length?(r=+u[0][0],i=+u[0][1],o=+u[1][0],a=+u[1][1],t=e=null,n):[[r,i],[o,a]]}}},t.geoClipRectangle=tt,t.geoContains=function(t,e){return(t&&Hn.hasOwnProperty(t.type)?Hn[t.type]:it)(t,e)},t.geoDistance=Fn,t.geoGraticule=ht,t.geoGraticule10=function(){return ht()()},t.geoInterpolate=function(t,e){var n=t[0]*He,r=t[1]*He,i=e[0]*He,u=e[1]*He,s=Ge(r),f=Ke(r),c=Ge(u),l=Ke(u),h=s*Ge(n),d=s*Ke(n),p=c*Ge(i),m=c*Ke(i),g=2*o(tn(a(u-r)+s*c*a(i-n))),y=Ke(g),v=g?function(t){var e=Ke(t*=g)/y,n=Ke(g-t)/y,r=n*h+e*p,i=n*d+e*m,o=n*f+e*l;return[Xe(i,r)*Fe,Xe(o,tn(r*r+i*i))*Fe]}:function(){return[n*Fe,r*Fe]};return v.distance=g,v},t.geoLength=In,t.geoPath=function(t,e){function n(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),on(t,r(i))),i.result()}var r,i,o=4.5;return n.area=function(t){return on(t,r(Vn)),Vn.result()},n.measure=function(t){return on(t,r(gr)),gr.result()},n.bounds=function(t){return on(t,r(Jn)),Jn.result()},n.centroid=function(t){return on(t,r(fr)),fr.result()},n.projection=function(e){return arguments.length?(r=null==e?(t=null,Wn):(t=e).stream,n):t},n.context=function(t){return arguments.length?(i=null==t?(e=null,new Ct):new kt(e=t),"function"!=typeof o&&i.pointRadius(o),n):e},n.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),n):o},n.projection(t).context(e)},t.geoAlbers=wr,t.geoAlbersUsa=function(){function t(t){var e=t[0],n=t[1];return u=null,i.point(e,n),u||(o.point(e,n),u)||(a.point(e,n),u)}function e(){return n=r=null,t}var n,r,i,o,a,u,s=wr(),f=xr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=xr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){u=[t,e]}};return t.invert=function(t){var e=s.scale(),n=s.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?f:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:s).invert(t)},t.stream=function(t){return n&&r===t?n:n=Ht([s.stream(r=t),f.stream(t),c.stream(t)])},t.precision=function(t){return arguments.length?(s.precision(t),f.precision(t),c.precision(t),e()):s.precision()},t.scale=function(e){return arguments.length?(s.scale(e),f.scale(.35*e),c.scale(e),t.translate(s.translate())):s.scale()},t.translate=function(t){if(!arguments.length)return s.translate();var n=s.scale(),r=+t[0],u=+t[1];return i=s.translate(t).clipExtent([[r-.455*n,u-.238*n],[r+.455*n,u+.238*n]]).stream(l),o=f.translate([r-.307*n,u+.201*n]).clipExtent([[r-.425*n+ze,u+.12*n+ze],[r-.214*n-ze,u+.234*n-ze]]).stream(l),a=c.translate([r-.205*n,u+.212*n]).clipExtent([[r-.214*n+ze,u+.166*n+ze],[r-.115*n-ze,u+.234*n-ze]]).stream(l),e()},t.fitExtent=function(e,n){return Rt(t,e,n)},t.fitSize=function(e,n){return Dt(t,e,n)},t.scale(1070)},t.geoAzimuthalEqualArea=function(){return Bt(Mr).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=Mr,t.geoAzimuthalEquidistant=function(){return Bt(Er).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=Er,t.geoConicConformal=function(){return qt($t).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=$t,t.geoConicEqualArea=xr,t.geoConicEqualAreaRaw=Ft,t.geoConicEquidistant=function(){return qt(Zt).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=Zt,t.geoEquirectangular=function(){return Bt(Qt).scale(152.63)},t.geoEquirectangularRaw=Qt,t.geoGnomonic=function(){return Bt(Kt).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=Kt,t.geoIdentity=function(){function t(){return i=o=null,a}var e,n,r,i,o,a,u=1,s=0,f=0,c=1,l=1,h=Wn,d=null,p=Wn;return a={stream:function(t){return i&&o===t?i:i=h(p(o=t))},postclip:function(i){return arguments.length?(p=i,d=e=n=r=null,t()):p},clipExtent:function(i){return arguments.length?(p=null==i?(d=e=n=r=null,Wn):tt(d=+i[0][0],e=+i[0][1],n=+i[1][0],r=+i[1][1]),t()):null==d?null:[[d,e],[n,r]]},scale:function(e){return arguments.length?(h=Jt((u=+e)*c,u*l,s,f),t()):u},translate:function(e){return arguments.length?(h=Jt(u*c,u*l,s=+e[0],f=+e[1]),t()):[s,f]},reflectX:function(e){return arguments.length?(h=Jt(u*(c=e?-1:1),u*l,s,f),t()):c<0},reflectY:function(e){return arguments.length?(h=Jt(u*c,u*(l=e?-1:1),s,f),t()):l<0},fitExtent:function(t,e){return Rt(a,t,e)},fitSize:function(t,e){return Dt(a,t,e)}}},t.geoProjection=Bt,t.geoProjectionMutator=It,t.geoMercator=function(){return Gt(Xt).scale(961/Ue)},t.geoMercatorRaw=Xt,t.geoNaturalEarth1=function(){return Bt(te).scale(175.295)},t.geoNaturalEarth1Raw=te,t.geoOrthographic=function(){return Bt(ee).scale(249.5).clipAngle(90+ze)},t.geoOrthographicRaw=ee,t.geoStereographic=function(){return Bt(ne).scale(250).clipAngle(142)},t.geoStereographicRaw=ne,t.geoTransverseMercator=function(){var t=Gt(re),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=re,t.geoRotation=Sn,t.geoStream=on,t.geoTransform=function(t){return{stream:Ot(t)}},Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-array":7}],20:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,e){return t.parent===e.parent?1:2}function n(t){return t.reduce(r,0)/t.length}function r(t,e){return t+e.x}function i(t){return 1+t.reduce(o,0)}function o(t,e){return Math.max(t,e.y)}function a(t){for(var e;e=t.children;)t=e[0];return t}function u(t){for(var e;e=t.children;)t=e[e.length-1];return t}function s(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function f(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function c(t,e){var n,r,i,o,a,u=new p(t),s=+t.value&&(u.value=t.value),f=[u];for(null==e&&(e=l);n=f.pop();)if(s&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)f.push(r=n.children[o]=new p(i[o])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(d)}function l(t){return t.children}function h(t){t.data=t.data.data}function d(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function p(t){this.data=t,this.depth=this.height=0,this.parent=null}function m(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}function g(t,e){var n,r;if(b(e,t))return[e];for(n=0;n<t.length;++n)if(y(e,t[n])&&b(w(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(y(w(t[n],t[r]),e)&&y(w(t[n],e),t[r])&&y(w(t[r],e),t[n])&&b(M(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function y(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function v(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function b(t,e){for(var n=0;n<e.length;++n)if(!v(t,e[n]))return!1;return!0}function _(t){switch(t.length){case 1:return x(t[0]);case 2:return w(t[0],t[1]);case 3:return M(t[0],t[1],t[2])}}function x(t){return{x:t.x,y:t.y,r:t.r}}function w(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,u=e.r,s=o-n,f=a-r,c=u-i,l=Math.sqrt(s*s+f*f);return{x:(n+o+s/l*c)/2,y:(r+a+f/l*c)/2,r:(l+i+u)/2}}function M(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,u=e.y,s=e.r,f=n.x,c=n.y,l=n.r,h=r-a,d=r-f,p=i-u,m=i-c,g=s-o,y=l-o,v=r*r+i*i-o*o,b=v-a*a-u*u+s*s,_=v-f*f-c*c+l*l,x=d*p-h*m,w=(p*_-m*b)/(2*x)-r,M=(m*g-p*y)/x,E=(d*b-h*_)/(2*x)-i,S=(h*y-d*g)/x,k=M*M+S*S-1,A=2*(o+w*M+E*S),T=w*w+E*E-o*o,C=-(k?(A+Math.sqrt(A*A-4*k*T))/(2*k):T/A);return{x:r+w+M*C,y:i+E+S*C,r:C}}function E(t,e,n){var r=t.x,i=t.y,o=e.r+n.r,a=t.r+n.r,u=e.x-r,s=e.y-i,f=u*u+s*s;if(f){var c=.5+((a*=a)-(o*=o))/(2*f),l=Math.sqrt(Math.max(0,2*o*(a+f)-(a-=f)*a-o*o))/(2*f);n.x=r+c*u+l*s,n.y=i+c*s-l*u}else n.x=r+a,n.y=i}function S(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return i*i-1e-6>n*n+r*r}function k(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function A(t){this._=t,this.next=null,this.previous=null}function T(t){if(!(i=t.length))return 0;var e,n,r,i,o,a,u,s,f,c,l;if(e=t[0],e.x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;E(n,e,r=t[2]),e=new A(e),n=new A(n),r=new A(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(u=3;u<i;++u){E(e._,n._,r=t[u]),r=new A(r),s=n.next,f=e.previous,c=n._.r,l=e._.r;do{if(c<=l){if(S(s._,r._)){n=s,e.next=n,n.previous=e,--u;continue t}c+=s._.r,s=s.next}else{if(S(f._,r._)){(e=f).next=n,n.previous=e,--u;continue t}l+=f._.r,f=f.previous}}while(s!==f.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,o=k(e);(r=r.next)!==n;)(a=k(r))<o&&(e=r,o=a);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=V(e),u=0;u<i;++u)e=t[u],e.x-=r.x,e.y-=r.y;return r.r}function C(t){return null==t?null:N(t)}function N(t){if("function"!=typeof t)throw new Error;return t}function O(){return 0}function j(t){return Math.sqrt(t.value)}function R(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function D(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,u=t(n)*e||0;if(u)for(i=0;i<a;++i)r[i].r+=u;if(o=T(r),u)for(i=0;i<a;++i)r[i].r-=u;n.r=o+u}}}function L(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function P(t){return t.id}function z(t){return t.parentId}function B(t,e){return t.parent===e.parent?1:2}function I(t){var e=t.children;return e?e[0]:t.t}function q(t){var e=t.children;return e?e[e.length-1]:t.t}function U(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function F(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}function H(t,e,n){return t.a.parent===e.parent?t.a:n}function Y(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function W(t){for(var e,n,r,i,o,a=new Y(t,0),u=[a];e=u.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)u.push(n=e.children[i]=new Y(r[i],i)),n.parent=e;return(a.parent=new Y(null,0)).children=[a],a}function X(t,e,n,r,i,o){for(var a,u,s,f,c,l,h,d,p,m,g,y=[],v=e.children,b=0,_=0,x=v.length,w=e.value;b<x;){s=i-n,f=o-r;do{c=v[_++].value}while(!c&&_<x);for(l=h=c,g=c*c*(m=Math.max(f/s,s/f)/(w*t)),p=Math.max(h/g,g/l);_<x;++_){if(c+=u=v[_].value,u<l&&(l=u),u>h&&(h=u),g=c*c*m,(d=Math.max(h/g,g/l))>p){c-=u;break}p=d}y.push(a={value:c,dice:s<f,children:v.slice(b,_)}),a.dice?Z(a,n,r,i,w?r+=f*c/w:o):et(a,n,r,w?n+=s*c/w:i,o),w-=c,b=_}return y}p.prototype=c.prototype={constructor:p,count:function(){return this.eachAfter(s)},each:function(t){var e,n,r,i,o=this,a=[o];do{for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},eachAfter:function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=f(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return c(this).eachBefore(h)}};var G=Array.prototype.slice,V=function(t){for(var e,n,r=0,i=(t=m(G.call(t))).length,o=[];r<i;)e=t[r],n&&v(n,e)?++r:(n=_(o=g(o,e)),r=0);return n},$=function(t){return function(){return t}},Q=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},Z=function(t,e,n,r,i){for(var o,a=t.children,u=-1,s=a.length,f=t.value&&(r-e)/t.value;++u<s;)(o=a[u]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*f},K="$",J={depth:-1},tt={};Y.prototype=Object.create(p.prototype);var et=function(t,e,n,r,i){for(var o,a=t.children,u=-1,s=a.length,f=t.value&&(i-n)/t.value;++u<s;)(o=a[u]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*f},nt=(1+Math.sqrt(5))/2,rt=function t(e){function n(t,n,r,i,o){X(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(nt),it=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,u,s,f,c,l=-1,h=a.length,d=t.value;++l<h;){for(s=(u=a[l]).children,f=u.value=0,c=s.length;f<c;++f)u.value+=s[f].value;u.dice?Z(u,n,r,i,r+=(o-r)*u.value/d):et(u,n,r,n+=(i-n)*u.value/d,o),d-=u.value}else t._squarify=a=X(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(nt);t.cluster=function(){function t(t){var e,c=0;t.eachAfter(function(t){var o=t.children;o?(t.x=n(o),t.y=i(o)):(t.x=e?c+=r(t,e):0,t.y=0,e=t)});var l=a(t),h=u(t),d=l.x-r(l,h)/2,p=h.x+r(h,l)/2;return t.eachAfter(f?function(e){e.x=(e.x-t.x)*o,e.y=(t.y-e.y)*s}:function(e){e.x=(e.x-d)/(p-d)*o,e.y=(1-(t.y?e.y/t.y:1))*s})}var r=e,o=1,s=1,f=!1;return t.separation=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(f=!1,o=+e[0],s=+e[1],t):f?null:[o,s]},t.nodeSize=function(e){return arguments.length?(f=!0,o=+e[0],s=+e[1],t):f?[o,s]:null},t},t.hierarchy=c,t.pack=function(){function t(t){return t.x=n/2,t.y=r/2,e?t.eachBefore(R(e)).eachAfter(D(i,.5)).eachBefore(L(1)):t.eachBefore(R(j)).eachAfter(D(O,1)).eachAfter(D(i,t.r/Math.min(n,r))).eachBefore(L(Math.min(n,r)/(2*t.r))),t}var e=null,n=1,r=1,i=O;return t.radius=function(n){return arguments.length?(e=C(n),t):e},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i="function"==typeof e?e:$(+e),t):i},t},t.packSiblings=function(t){return T(t),t},t.packEnclose=V,t.partition=function(){function t(t){var a=t.height+1;return t.x0=t.y0=i,t.x1=n,t.y1=r/a,t.eachBefore(e(r,a)),o&&t.eachBefore(Q),t}function e(t,e){return function(n){n.children&&Z(n,n.x0,t*(n.depth+1)/e,n.x1,t*(n.depth+2)/e);var r=n.x0,o=n.y0,a=n.x1-i,u=n.y1-i;a<r&&(r=a=(r+a)/2),u<o&&(o=u=(o+u)/2),n.x0=r,n.y0=o,n.x1=a,n.y1=u}}var n=1,r=1,i=0,o=!1;return t.round=function(e){return arguments.length?(o=!!e,t):o},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i=+e,t):i},t},t.stratify=function(){function t(t){var r,i,o,a,u,s,f,c=t.length,l=new Array(c),h={};for(i=0;i<c;++i)r=t[i],u=l[i]=new p(r),null!=(s=e(r,i,t))&&(s+="")&&(h[f=K+(u.id=s)]=f in h?tt:u);for(i=0;i<c;++i)if(u=l[i],null!=(s=n(t[i],i,t))&&(s+="")){if(!(a=h[K+s]))throw new Error("missing: "+s);if(a===tt)throw new Error("ambiguous: "+s);a.children?a.children.push(u):a.children=[u],u.parent=a}else{if(o)throw new Error("multiple roots");o=u}if(!o)throw new Error("no root");if(o.parent=J,o.eachBefore(function(t){t.depth=t.parent.depth+1,--c}).eachBefore(d),o.parent=null,c>0)throw new Error("cycle");return o}var e=P,n=z;return t.id=function(n){return arguments.length?(e=N(n),t):e},t.parentId=function(e){return arguments.length?(n=N(e),t):n},t},t.tree=function(){function t(t){var r=W(t);if(r.eachAfter(e),r.parent.m=-r.z,r.eachBefore(n),s)t.eachBefore(i);else{var f=t,c=t,l=t;t.eachBefore(function(t){t.x<f.x&&(f=t),t.x>c.x&&(c=t),t.depth>l.depth&&(l=t)});var h=f===c?1:o(f,c)/2,d=h-f.x,p=a/(c.x+h+d),m=u/(l.depth||1);t.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*m})}return t}function e(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e){F(t);var a=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+o(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+o(t._,i._));t.parent.A=r(t,i,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var r,i=t,a=t,u=e,s=i.parent.children[0],f=i.m,c=a.m,l=u.m,h=s.m;u=q(u),i=I(i),u&&i;)s=I(s),(a=q(a)).a=t,(r=u.z+l-i.z-f+o(u._,i._))>0&&(U(H(u,t,n),t,r),f+=r,c+=r),l+=u.m,f+=i.m,h+=s.m,c+=a.m;u&&!q(a)&&(a.t=u,a.m+=l-c),i&&!I(s)&&(s.t=i,s.m+=f-h,n=t)}return n}function i(t){t.x*=a,t.y=t.depth*u}var o=B,a=1,u=1,s=null;return t.separation=function(e){return arguments.length?(o=e,t):o},t.size=function(e){return arguments.length?(s=!1,a=+e[0],u=+e[1],t):s?null:[a,u]},t.nodeSize=function(e){return arguments.length?(s=!0,a=+e[0],u=+e[1],t):s?[a,u]:null},t},t.treemap=function(){function t(t){return t.x0=t.y0=0,t.x1=i,t.y1=o,t.eachBefore(e),a=[0],r&&t.eachBefore(Q),t}function e(t){var e=a[t.depth],r=t.x0+e,i=t.y0+e,o=t.x1-e,h=t.y1-e;o<r&&(r=o=(r+o)/2),h<i&&(i=h=(i+h)/2),t.x0=r,t.y0=i,t.x1=o,t.y1=h,t.children&&(e=a[t.depth+1]=u(t)/2,r+=l(t)-e,i+=s(t)-e,o-=f(t)-e,h-=c(t)-e,o<r&&(r=o=(r+o)/2),h<i&&(i=h=(i+h)/2),n(t,r,i,o,h))}var n=rt,r=!1,i=1,o=1,a=[0],u=O,s=O,f=O,c=O,l=O;return t.round=function(e){return arguments.length?(r=!!e,t):r},t.size=function(e){return arguments.length?(i=+e[0],o=+e[1],t):[i,o]},t.tile=function(e){return arguments.length?(n=N(e),t):n},t.padding=function(e){return arguments.length?t.paddingInner(e).paddingOuter(e):t.paddingInner()},t.paddingInner=function(e){return arguments.length?(u="function"==typeof e?e:$(+e),t):u},t.paddingOuter=function(e){return arguments.length?t.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):t.paddingTop()},t.paddingTop=function(e){return arguments.length?(s="function"==typeof e?e:$(+e),t):s},t.paddingRight=function(e){return arguments.length?(f="function"==typeof e?e:$(+e),t):f},t.paddingBottom=function(e){return arguments.length?(c="function"==typeof e?e:$(+e),t):c},t.paddingLeft=function(e){return arguments.length?(l="function"==typeof e?e:$(+e),t):l},t},t.treemapBinary=function(t,e,n,r,i){function o(t,e,n,r,i,a,u){if(t>=e-1){var f=s[t];return f.x0=r,f.y0=i,f.x1=a,void(f.y1=u)}for(var l=c[t],h=n/2+l,d=t+1,p=e-1;d<p;){var m=d+p>>>1;c[m]<h?d=m+1:p=m}h-c[d-1]<c[d]-h&&t+1<d&&--d;var g=c[d]-l,y=n-g;if(a-r>u-i){var v=(r*y+a*g)/n;o(t,d,g,r,i,v,u),o(d,e,y,v,i,a,u)}else{var b=(i*y+u*g)/n;o(t,d,g,r,i,a,b),o(d,e,y,r,b,a,u)}}var a,u,s=t.children,f=s.length,c=new Array(f+1);for(c[0]=u=a=0;a<f;++a)c[a+1]=u+=s[a].value;o(0,f,t.value,e,n,r,i)},t.treemapDice=Z,t.treemapSlice=et,t.treemapSliceDice=function(t,e,n,r,i){(1&t.depth?et:Z)(t,e,n,r,i)},t.treemapSquarify=rt,t.treemapResquarify=it,Object.defineProperty(t,"__esModule",{value:!0})})},{}],21:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-color"],i):i(r.d3=r.d3||{},r.d3)}(this,function(t,e){"use strict";function n(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function r(t,e){return function(n){return t+n*e}}function i(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function o(t,e){var n=e-t;return n?r(t,n>180||n<-180?n-360*Math.round(n/360):n):E(isNaN(t)?e:t)}function a(t){return 1==(t=+t)?u:function(e,n){return n-e?i(e,n,t):E(isNaN(e)?n:e)}}function u(t,e){var n=e-t;return n?r(t,n):E(isNaN(t)?e:t)}function s(t){return function(n){var r,i,o=n.length,a=new Array(o),u=new Array(o),s=new Array(o);for(r=0;r<o;++r)i=e.rgb(n[r]),a[r]=i.r||0,u[r]=i.g||0,s[r]=i.b||0;return a=t(a),u=t(u),s=t(s),i.opacity=1,function(t){return i.r=a(t),i.g=u(t),i.b=s(t),i+""}}}function f(t){return function(){return t}}function c(t){return function(e){return t(e)+""}}function l(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,a,u){if(t!==i||r!==o){var s=a.push("translate(",null,e,null,n);u.push({i:s-4,x:N(t,i)},{i:s-2,x:N(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}function a(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:N(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function u(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:N(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function s(t,e,n,r,o,a){if(t!==n||e!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:N(t,n)},{i:u-2,x:N(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),o(e.translateX,e.translateY,n.translateX,n.translateY,r,i),a(e.rotate,n.rotate,r,i),u(e.skewX,n.skewX,r,i),s(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e,n=-1,o=i.length;++n<o;)r[(e=i[n]).i]=e.x(t);return r.join("")}}}function h(t){return((t=Math.exp(t))+1/t)/2}function d(t){return((t=Math.exp(t))-1/t)/2}function p(t){return((t=Math.exp(2*t))-1)/(t+1)}function m(t){return function(n,r){var i=t((n=e.hsl(n)).h,(r=e.hsl(r)).h),o=u(n.s,r.s),a=u(n.l,r.l),s=u(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=a(t),n.opacity=s(t),n+""}}}function g(t){return function(n,r){var i=t((n=e.hcl(n)).h,(r=e.hcl(r)).h),o=u(n.c,r.c),a=u(n.l,r.l),s=u(n.opacity,r.opacity);return function(t){return n.h=i(t),n.c=o(t),n.l=a(t),n.opacity=s(t),n+""}}}function y(t){return function n(r){function i(n,i){var o=t((n=e.cubehelix(n)).h,(i=e.cubehelix(i)).h),a=u(n.s,i.s),s=u(n.l,i.l),f=u(n.opacity,i.opacity);return function(t){return n.h=o(t),n.s=a(t),n.l=s(Math.pow(t,r)),n.opacity=f(t),n+""}}return r=+r,i.gamma=n,i}(1)}var v,b,_,x,w=function(t){var e=t.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),o=t[i],a=t[i+1],u=i>0?t[i-1]:2*o-a,s=i<e-1?t[i+2]:2*a-o;return n((r-i/e)*e,u,o,a,s)}},M=function(t){var e=t.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*e),o=t[(i+e-1)%e],a=t[i%e],u=t[(i+1)%e],s=t[(i+2)%e];return n((r-i/e)*e,o,a,u,s)}},E=function(t){return function(){return t}},S=function t(n){function r(t,n){var r=i((t=e.rgb(t)).r,(n=e.rgb(n)).r),o=i(t.g,n.g),a=i(t.b,n.b),s=u(t.opacity,n.opacity);return function(e){return t.r=r(e),t.g=o(e),t.b=a(e),t.opacity=s(e),t+""}}var i=a(n);return r.gamma=t,r}(1),k=s(w),A=s(M),T=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(r),a=new Array(r);for(n=0;n<i;++n)o[n]=L(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}},C=function(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}},N=function(t,e){return t=+t,e-=t,function(n){return t+e*n}},O=function(t,e){var n,r={},i={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?r[n]=L(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},j=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,R=new RegExp(j.source,"g"),D=function(t,e){var n,r,i,o=j.lastIndex=R.lastIndex=0,a=-1,u=[],s=[];for(t+="",e+="";(n=j.exec(t))&&(r=R.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,s.push({i:a,x:N(n,r)})),o=R.lastIndex;return o<e.length&&(i=e.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?c(s[0].x):f(e):(e=s.length,function(t){for(var n,r=0;r<e;++r)u[(n=s[r]).i]=n.x(t);return u.join("")})},L=function(t,n){var r,i=typeof n;return null==n||"boolean"===i?E(n):("number"===i?N:"string"===i?(r=e.color(n))?(n=r,S):D:n instanceof e.color?S:n instanceof Date?C:Array.isArray(n)?T:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?O:N)(t,n)},P=180/Math.PI,z={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},B=function(t,e,n,r,i,o){var a,u,s;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),t*r<e*n&&(t=-t,e=-e,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*P,skewX:Math.atan(s)*P,scaleX:a,scaleY:u}},I=l(function(t){return"none"===t?z:(v||(v=document.createElement("DIV"),b=document.documentElement,_=document.defaultView),v.style.transform=t,t=_.getComputedStyle(b.appendChild(v),null).getPropertyValue("transform"),b.removeChild(v),t=t.slice(7,-1).split(","),B(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),q=l(function(t){return null==t?z:(x||(x=document.createElementNS("http://www.w3.org/2000/svg","g")),x.setAttribute("transform",t),(t=x.transform.baseVal.consolidate())?(t=t.matrix,B(t.a,t.b,t.c,t.d,t.e,t.f)):z)},", ",")",")"),U=Math.SQRT2,F=m(o),H=m(u),Y=g(o),W=g(u),X=y(o),G=y(u);t.interpolate=L,t.interpolateArray=T,t.interpolateBasis=w,t.interpolateBasisClosed=M,t.interpolateDate=C,t.interpolateNumber=N,t.interpolateObject=O,t.interpolateRound=function(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}},t.interpolateString=D,t.interpolateTransformCss=I,t.interpolateTransformSvg=q,t.interpolateZoom=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],u=e[0],s=e[1],f=e[2],c=u-i,l=s-o,m=c*c+l*l;if(m<1e-12)r=Math.log(f/a)/U,n=function(t){return[i+t*c,o+t*l,a*Math.exp(U*t*r)]};else{var g=Math.sqrt(m),y=(f*f-a*a+4*m)/(2*a*2*g),v=(f*f-a*a-4*m)/(2*f*2*g),b=Math.log(Math.sqrt(y*y+1)-y),_=Math.log(Math.sqrt(v*v+1)-v);r=(_-b)/U,n=function(t){var e=t*r,n=h(b),u=a/(2*g)*(n*p(U*e+b)-d(b));return[i+u*c,o+u*l,a*n/h(U*e+b)]}}return n.duration=1e3*r,n},t.interpolateRgb=S,t.interpolateRgbBasis=k,t.interpolateRgbBasisClosed=A,t.interpolateHsl=F,t.interpolateHslLong=H,t.interpolateLab=function(t,n){var r=u((t=e.lab(t)).l,(n=e.lab(n)).l),i=u(t.a,n.a),o=u(t.b,n.b),a=u(t.opacity,n.opacity);return function(e){return t.l=r(e),t.a=i(e),t.b=o(e),t.opacity=a(e),t+""}},t.interpolateHcl=Y,t.interpolateHclLong=W,t.interpolateCubehelix=X,t.interpolateCubehelixLong=G,t.quantize=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-color":12}],22:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new e}var r=Math.PI,i=2*r,o=i-1e-6;e.prototype=n.prototype={constructor:e,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,i,o){t=+t,e=+e,n=+n,i=+i,o=+o;var a=this._x1,u=this._y1,s=n-t,f=i-e,c=a-t,l=u-e,h=c*c+l*l;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(l*s-f*c)>1e-6&&o){var d=n-a,p=i-u,m=s*s+f*f,g=d*d+p*p,y=Math.sqrt(m),v=Math.sqrt(h),b=o*Math.tan((r-Math.acos((m+h-g)/(2*y*v)))/2),_=b/v,x=b/y;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*c)+","+(e+_*l)),this._+="A"+o+","+o+",0,0,"+ +(l*d>c*p)+","+(this._x1=t+x*s)+","+(this._y1=e+x*f)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,a,u,s){t=+t,e=+e;var f=(n=+n)*Math.cos(a),c=n*Math.sin(a),l=t+f,h=e+c,d=1^s,p=s?a-u:u-a;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+h:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-h)>1e-6)&&(this._+="L"+l+","+h),n&&(p<0&&(p=p%i+i),p>o?this._+="A"+n+","+n+",0,1,"+d+","+(t-f)+","+(e-c)+"A"+n+","+n+",0,1,"+d+","+(this._x1=l)+","+(this._y1=h):p>1e-6&&(this._+="A"+n+","+n+",0,"+ +(p>=r)+","+d+","+(this._x1=t+n*Math.cos(u))+","+(this._y1=e+n*Math.sin(u))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},t.path=n,Object.defineProperty(t,"__esModule",{value:!0})})},{}],23:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,e){return t[0]-e[0]||t[1]-e[1]}function n(t){for(var e=t.length,n=[0,1],i=2,o=2;o<e;++o){for(;i>1&&r(t[n[i-2]],t[n[i-1]],t[o])<=0;)--i;n[i++]=o}return n.slice(0,i)}var r=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])};t.polygonArea=function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2},t.polygonCentroid=function(t){for(var e,n,r=-1,i=t.length,o=0,a=0,u=t[i-1],s=0;++r<i;)e=u,u=t[r],s+=n=e[0]*u[1]-u[0]*e[1],o+=(e[0]+u[0])*n,a+=(e[1]+u[1])*n;return s*=3,[o/s,a/s]},t.polygonHull=function(t){if((i=t.length)<3)return null;var r,i,o=new Array(i),a=new Array(i);for(r=0;r<i;++r)o[r]=[+t[r][0],+t[r][1],r];for(o.sort(e),r=0;r<i;++r)a[r]=[o[r][0],-o[r][1]];var u=n(o),s=n(a),f=s[0]===u[0],c=s[s.length-1]===u[u.length-1],l=[];for(r=u.length-1;r>=0;--r)l.push(t[o[u[r]][2]]);for(r=+f;r<s.length-c;++r)l.push(t[o[s[r]][2]]);return l},t.polygonContains=function(t,e){for(var n,r,i=t.length,o=t[i-1],a=e[0],u=e[1],s=o[0],f=o[1],c=!1,l=0;l<i;++l)n=(o=t[l])[0],(r=o[1])>u!=f>u&&a<(s-n)*(u-r)/(f-r)+n&&(c=!c),s=n,f=r;return c},t.polygonLength=function(t){for(var e,n,r=-1,i=t.length,o=t[i-1],a=o[0],u=o[1],s=0;++r<i;)e=a,n=u,e-=a=(o=t[r])[0],n-=u=o[1],s+=Math.sqrt(e*e+n*n);return s},Object.defineProperty(t,"__esModule",{value:!0})})},{}],24:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,u,s,f,c,l,h,d=t._root,p={data:r},m=t._x0,g=t._y0,y=t._x1,v=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((f=e>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a,i=d,!(d=d[l=c<<1|f]))return i[l]=p,t;if(u=+t._x.call(null,d.data),s=+t._y.call(null,d.data),e===u&&n===s)return p.next=d,i?i[l]=p:t._root=p,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(f=e>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a}while((l=c<<1|f)==(h=(s>=a)<<1|u>=o));return i[h]=d,i[l]=p,t}function n(t){return t[0]}function r(t){return t[1]}function i(t,e,i){var a=new o(null==e?n:e,null==i?r:i,NaN,NaN,NaN,NaN);return null==t?a:a.addAll(t)}function o(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function a(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var u=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i},s=i.prototype=o.prototype;s.copy=function(){var t,e,n=new o(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=a(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=a(e));return n},s.add=function(t){var n=+this._x.call(null,t),r=+this._y.call(null,t);return e(this.cover(n,r),n,r,t)},s.addAll=function(t){var n,r,i,o,a=t.length,u=new Array(a),s=new Array(a),f=1/0,c=1/0,l=-1/0,h=-1/0;for(r=0;r<a;++r)isNaN(i=+this._x.call(null,n=t[r]))||isNaN(o=+this._y.call(null,n))||(u[r]=i,s[r]=o,i<f&&(f=i),i>l&&(l=i),o<c&&(c=o),o>h&&(h=o));for(l<f&&(f=this._x0,l=this._x1),h<c&&(c=this._y0,h=this._y1),this.cover(f,c).cover(l,h),r=0;r<a;++r)e(this,u[r],s[r],t[r]);return this},s.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{if(!(n>t||t>i||r>e||e>o))return this;var a,u,s=i-n,f=this._root;switch(u=(e<(r+o)/2)<<1|t<(n+i)/2){case 0:do{a=new Array(4),a[u]=f,f=a}while(s*=2,i=n+s,o=r+s,t>i||e>o);break;case 1:do{a=new Array(4),a[u]=f,f=a}while(s*=2,n=i-s,o=r+s,n>t||e>o);break;case 2:do{a=new Array(4),a[u]=f,f=a}while(s*=2,i=n+s,r=o-s,t>i||r>e);break;case 3:do{a=new Array(4),a[u]=f,f=a}while(s*=2,n=i-s,r=o-s,n>t||r>e)}this._root&&this._root.length&&(this._root=f)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},s.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},s.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},s.find=function(t,e,n){var r,i,o,a,s,f,c,l=this._x0,h=this._y0,d=this._x1,p=this._y1,m=[],g=this._root;for(g&&m.push(new u(g,l,h,d,p)),null==n?n=1/0:(l=t-n,h=e-n,d=t+n,p=e+n,n*=n);f=m.pop();)if(!(!(g=f.node)||(i=f.x0)>d||(o=f.y0)>p||(a=f.x1)<l||(s=f.y1)<h))if(g.length){var y=(i+a)/2,v=(o+s)/2;m.push(new u(g[3],y,v,a,s),new u(g[2],i,v,y,s),new u(g[1],y,o,a,v),new u(g[0],i,o,y,v)),(c=(e>=v)<<1|t>=y)&&(f=m[m.length-1],m[m.length-1]=m[m.length-1-c],m[m.length-1-c]=f)}else{var b=t-+this._x.call(null,g.data),_=e-+this._y.call(null,g.data),x=b*b+_*_;if(x<n){var w=Math.sqrt(n=x);l=t-w,h=e-w,d=t+w,p=e+w,r=g.data}}return r},s.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,u,s,f,c,l,h,d=this._root,p=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((f=o>=(u=(p+g)/2))?p=u:g=u,(c=a>=(s=(m+y)/2))?m=s:y=s,e=d,!(d=d[l=c<<1|f]))return this;if(!d.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[l]=i:delete e[l],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)},s.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},s.root=function(){return this._root},s.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},s.visit=function(t){var e,n,r,i,o,a,s=[],f=this._root;for(f&&s.push(new u(f,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(f=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&f.length){var c=(r+o)/2,l=(i+a)/2;(n=f[3])&&s.push(new u(n,c,l,o,a)),(n=f[2])&&s.push(new u(n,r,l,c,a)),(n=f[1])&&s.push(new u(n,c,i,o,l)),(n=f[0])&&s.push(new u(n,r,i,c,l))}return this},s.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new u(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,f=e.x1,c=e.y1,l=(a+f)/2,h=(s+c)/2;(o=i[0])&&n.push(new u(o,a,s,l,h)),(o=i[1])&&n.push(new u(o,l,s,f,h)),(o=i[2])&&n.push(new u(o,a,h,l,c)),(o=i[3])&&n.push(new u(o,l,h,f,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},s.x=function(t){return arguments.length?(this._x=t,this):this._x},s.y=function(t){return arguments.length?(this._y=t,this):this._y},t.quadtree=i,Object.defineProperty(t,"__esModule",{value:!0})})},{}],25:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function n(t){if(!t._start)try{r(t)}catch(e){if(t._tasks[t._ended+t._active-1])o(t,e);else if(!t._data)throw e}}function r(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],r=n.length-1,o=n[r];n[r]=i(t,e),--t._waiting,++t._active,n=o.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||f)}}function i(t,e){return function(r,i){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=r?o(t,r):(t._data[e]=i,t._waiting?n(t):a(t))))}}function o(t,e){var n,r=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--r>=0;)if((n=t._tasks[r])&&(t._tasks[r]=null,n.abort))try{n.abort()}catch(e){}t._active=NaN,a(t)}function a(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function u(t){if(null==t)t=1/0;else if(!((t=+t)>=1))throw new Error("invalid concurrency");return new e(t)}var s=[].slice,f={};e.prototype=u.prototype={constructor:e,defer:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var e=s.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),n(this),this},abort:function(){return null==this._error&&o(this,new Error("abort")),this},await:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(e,n){t.apply(null,[e].concat(n))},a(this),this},awaitAll:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=t,a(this),this}},t.queue=u,Object.defineProperty(t,"__esModule",{value:!0})})},{}],26:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";var e=function(){return Math.random()},n=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(e),r=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*e()-1,o=2*e()-1,i=r*r+o*o}while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(e),i=function t(e){function n(){var t=r.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(e),o=function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(e),a=function t(e){function n(t){var n=o.source(e)(t);return function(){return n()/t}}return n.source=t,n}(e),u=function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(e);t.randomUniform=n,t.randomNormal=r,t.randomLogNormal=i,t.randomBates=a,t.randomIrwinHall=o,t.randomExponential=u,Object.defineProperty(t,"__esModule",{value:!0})})},{}],27:[function(t,e,n){"use strict";function r(t){return function(e,n){t(null==e?n:null)}}function i(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function o(t,e){return function(n){return t(n.responseText,e)}}var a=t("xmlhttprequest").XMLHttpRequest;Object.defineProperty(n,"__esModule",{value:!0});var u=t("d3-collection"),s=t("d3-dispatch"),f=t("d3-dsv"),c=function(t,e){function n(t){var e,n=p.status;if(!n&&i(p)||n>=200&&n<300||304===n){if(c)try{e=c.call(o,p)}catch(t){return void h.call("error",o,t)}else e=p;h.call("load",o,e)}else h.call("error",o,t)}var o,f,c,l,h=s.dispatch("beforesend","progress","load","error"),d=u.map(),p=new a,m=null,g=null,y=0;if("undefined"==typeof XDomainRequest||"withCredentials"in p||!/^(http(s)?:)?\/\//.test(t)||(p=new XDomainRequest),"onload"in p?p.onload=p.onerror=p.ontimeout=n:p.onreadystatechange=function(t){p.readyState>3&&n(t)},p.onprogress=function(t){h.call("progress",o,t)},o={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?d.get(t):(null==e?d.remove(t):d.set(t,e+""),o)},mimeType:function(t){return arguments.length?(f=null==t?null:t+"",o):f},responseType:function(t){return arguments.length?(l=t,o):l},timeout:function(t){return arguments.length?(y=+t,o):y},user:function(t){return arguments.length<1?m:(m=null==t?null:t+"",o)},password:function(t){return arguments.length<1?g:(g=null==t?null:t+"",o)},response:function(t){return c=t,o},get:function(t,e){return o.send("GET",t,e)},post:function(t,e){return o.send("POST",t,e)},send:function(e,n,i){return p.open(e,t,!0,m,g),null==f||d.has("accept")||d.set("accept",f+",*/*"),p.setRequestHeader&&d.each(function(t,e){p.setRequestHeader(e,t)}),null!=f&&p.overrideMimeType&&p.overrideMimeType(f),null!=l&&(p.responseType=l),y>0&&(p.timeout=y),null==i&&"function"==typeof n&&(i=n,n=null),null!=i&&1===i.length&&(i=r(i)),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),h.call("beforesend",o,p),p.send(null==n?null:n),o},abort:function(){return p.abort(),o},on:function(){var t=h.on.apply(h,arguments);return t===h?o:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return o.get(e)}return o},l=function(t,e){return function(n,r){var i=c(n).mimeType(t).response(e);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}},h=l("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)}),d=l("application/json",function(t){return JSON.parse(t.responseText)}),p=l("text/plain",function(t){return t.responseText}),m=l("application/xml",function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e}),g=function(t,e){return function(n,r,i){arguments.length<3&&(i=r,r=null);var a=c(n).mimeType(t);return a.row=function(t){return arguments.length?a.response(o(e,r=t)):r},a.row(r),i?a.get(i):a}},y=g("text/csv",f.csvParse),v=g("text/tab-separated-values",f.tsvParse);n.request=c,n.html=h,n.json=d,n.text=p,n.xml=m,n.csv=y,n.tsv=v},{"d3-collection":11,"d3-dispatch":13,"d3-dsv":15,xmlhttprequest:70}],28:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-array"),t("d3-collection"),t("d3-interpolate"),t("d3-format"),t("d3-time"),t("d3-time-format"),t("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-collection","d3-interpolate","d3-format","d3-time","d3-time-format","d3-color"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3,r.d3,r.d3)}(this,function(t,e,n,r,i,o,a,u){"use strict";function s(t){function e(e){var n=e+"",a=r.get(n);if(!a){if(o!==U)return o;r.set(n,a=i.push(e))}return t[(a-1)%t.length]}var r=n.map(),i=[],o=U;return t=null==t?[]:q.call(t),e.domain=function(t){if(!arguments.length)return i.slice();i=[],r=n.map();for(var o,a,u=-1,s=t.length;++u<s;)r.has(a=(o=t[u])+"")||r.set(a,i.push(o));return e},e.range=function(n){return arguments.length?(t=q.call(n),e):t.slice()},e.unknown=function(t){return arguments.length?(o=t,e):o},e.copy=function(){return s().domain(i).range(t).unknown(o)},e}function f(){function t(){var t=o().length,i=u[1]<u[0],s=u[i-0],f=u[1-i];n=(f-s)/Math.max(1,t-l+2*h),c&&(n=Math.floor(n)),s+=(f-s-n*(t-l))*d,r=n*(1-l),c&&(s=Math.round(s),r=Math.round(r));var p=e.range(t).map(function(t){return s+n*t});return a(i?p.reverse():p)}var n,r,i=s().unknown(void 0),o=i.domain,a=i.range,u=[0,1],c=!1,l=0,h=0,d=.5;return delete i.unknown,i.domain=function(e){return arguments.length?(o(e),t()):o()},i.range=function(e){return arguments.length?(u=[+e[0],+e[1]],t()):u.slice()},i.rangeRound=function(e){return u=[+e[0],+e[1]],c=!0,t()},i.bandwidth=function(){return r},i.step=function(){return n},i.round=function(e){return arguments.length?(c=!!e,t()):c},i.padding=function(e){return arguments.length?(l=h=Math.max(0,Math.min(1,e)),t()):l},i.paddingInner=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),t()):l},i.paddingOuter=function(e){return arguments.length?(h=Math.max(0,Math.min(1,e)),t()):h},i.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),t()):d},i.copy=function(){return f().domain(o()).range(u).round(c).paddingInner(l).paddingOuter(h).align(d)},t()}function c(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return c(e())},t}function l(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:F(e)}function h(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}function d(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}function p(t,e,n,r){var i=t[0],o=t[1],a=e[0],u=e[1];return o<i?(i=n(o,i),a=r(u,a)):(i=n(i,o),a=r(a,u)),function(t){return a(i(t))}}function m(t,n,r,i){var o=Math.min(t.length,n.length)-1,a=new Array(o),u=new Array(o),s=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++s<o;)a[s]=r(t[s],t[s+1]),u[s]=i(n[s],n[s+1]);return function(n){var r=e.bisect(t,n,1,o)-1;return u[r](a[r](n))}}function g(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function y(t,e){function n(){return o=Math.min(s.length,f.length)>2?m:p,a=u=null,i}function i(e){return(a||(a=o(s,f,g?h(t):t,c)))(+e)}var o,a,u,s=Y,f=Y,c=r.interpolate,g=!1;return i.invert=function(t){return(u||(u=o(f,s,l,g?d(e):e)))(+t)},i.domain=function(t){return arguments.length?(s=I.call(t,H),n()):s.slice()},i.range=function(t){return arguments.length?(f=q.call(t),n()):f.slice()},i.rangeRound=function(t){return f=q.call(t),c=r.interpolateRound,n()},i.clamp=function(t){return arguments.length?(g=!!t,n()):g},i.interpolate=function(t){return arguments.length?(c=t,n()):c},n()}function v(t){var n=t.domain;return t.ticks=function(t){var r=n();return e.ticks(r[0],r[r.length-1],null==t?10:t)},t.tickFormat=function(t,e){return W(n(),t,e)},t.nice=function(r){null==r&&(r=10);var i,o=n(),a=0,u=o.length-1,s=o[a],f=o[u];return f<s&&(i=s,s=f,f=i,i=a,a=u,u=i),(i=e.tickIncrement(s,f,r))>0?(s=Math.floor(s/i)*i,f=Math.ceil(f/i)*i,i=e.tickIncrement(s,f,r)):i<0&&(s=Math.ceil(s*i)/i,f=Math.floor(f*i)/i,i=e.tickIncrement(s,f,r)),i>0?(o[a]=Math.floor(s/i)*i,o[u]=Math.ceil(f/i)*i,n(o)):i<0&&(o[a]=Math.ceil(s*i)/i,o[u]=Math.floor(f*i)/i,n(o)),t},t}function b(){var t=y(l,r.interpolateNumber);return t.copy=function(){return g(t,b())},v(t)}function _(){function t(t){return+t}var e=[0,1];return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=I.call(n,H),t):e.slice()},t.copy=function(){return _().domain(e)},v(t)}function x(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:F(e)}function w(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function M(t){return isFinite(t)?+("1e"+t):t<0?0:t}function E(t){return 10===t?M:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function S(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function k(t){return function(e){return-t(-e)}}function A(){function t(){return a=S(o),u=E(o),r()[0]<0&&(a=k(a),u=k(u)),n}var n=y(x,w).domain([1,10]),r=n.domain,o=10,a=S(10),u=E(10);return n.base=function(e){return arguments.length?(o=+e,t()):o},n.domain=function(e){return arguments.length?(r(e),t()):r()},n.ticks=function(t){var n,i=r(),s=i[0],f=i[i.length-1];(n=f<s)&&(d=s,s=f,f=d);var c,l,h,d=a(s),p=a(f),m=null==t?10:+t,g=[];if(!(o%1)&&p-d<m){if(d=Math.round(d)-1,p=Math.round(p)+1,s>0){for(;d<p;++d)for(l=1,c=u(d);l<o;++l)if(!((h=c*l)<s)){if(h>f)break;g.push(h)}}else for(;d<p;++d)for(l=o-1,c=u(d);l>=1;--l)if(!((h=c*l)<s)){if(h>f)break;g.push(h)}}else g=e.ticks(d,p,Math.min(p-d,m)).map(u);return n?g.reverse():g},n.tickFormat=function(t,e){if(null==e&&(e=10===o?".0e":","),"function"!=typeof e&&(e=i.format(e)),t===1/0)return e;null==t&&(t=10);var r=Math.max(1,o*t/n.ticks().length);return function(t){var n=t/u(Math.round(a(t)));return n*o<o-.5&&(n*=o),n<=r?e(t):""}},n.nice=function(){return r(X(r(),{floor:function(t){return u(Math.floor(a(t)))},ceil:function(t){return u(Math.ceil(a(t)))}}))},n.copy=function(){return g(n,A().base(o))},n}function T(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function C(){var t=1,e=y(function(e,n){return(n=T(n,t)-(e=T(e,t)))?function(r){return(T(r,t)-e)/n}:F(n)},function(e,n){return n=T(n,t)-(e=T(e,t)),function(r){return T(e+n*r,1/t)}}),n=e.domain;return e.exponent=function(e){return arguments.length?(t=+e,n(n())):t},e.copy=function(){return g(e,C().exponent(t))},v(e)}function N(){function t(){var t=0,a=Math.max(1,i.length);for(o=new Array(a-1);++t<a;)o[t-1]=e.quantile(r,t/a);return n}function n(t){if(!isNaN(t=+t))return i[e.bisect(o,t)]}var r=[],i=[],o=[];return n.invertExtent=function(t){var e=i.indexOf(t);return e<0?[NaN,NaN]:[e>0?o[e-1]:r[0],e<o.length?o[e]:r[r.length-1]]},n.domain=function(n){if(!arguments.length)return r.slice();r=[];for(var i,o=0,a=n.length;o<a;++o)null==(i=n[o])||isNaN(i=+i)||r.push(i);return r.sort(e.ascending),t()},n.range=function(e){return arguments.length?(i=q.call(e),t()):i.slice()},n.quantiles=function(){return o.slice()},n.copy=function(){return N().domain(r).range(i)},n}function O(){function t(t){if(t<=t)return u[e.bisect(a,t,0,o)]}function n(){var e=-1;for(a=new Array(o);++e<o;)a[e]=((e+1)*i-(e-o)*r)/(o+1);return t}var r=0,i=1,o=1,a=[.5],u=[0,1];return t.domain=function(t){return arguments.length?(r=+t[0],i=+t[1],n()):[r,i]},t.range=function(t){return arguments.length?(o=(u=q.call(t)).length-1,n()):u.slice()},t.invertExtent=function(t){var e=u.indexOf(t);return e<0?[NaN,NaN]:e<1?[r,a[0]]:e>=o?[a[o-1],i]:[a[e-1],a[e]]},t.copy=function(){return O().domain([r,i]).range(u)},v(t)}function j(){function t(t){if(t<=t)return r[e.bisect(n,t,0,i)]}var n=[.5],r=[0,1],i=1;return t.domain=function(e){return arguments.length?(n=q.call(e),i=Math.min(n.length,r.length-1),t):n.slice()},t.range=function(e){return arguments.length?(r=q.call(e),i=Math.min(n.length,r.length-1),t):r.slice()},t.invertExtent=function(t){var e=r.indexOf(t);return[n[e-1],n[e]]},t.copy=function(){return j().domain(n).range(r)},t}function R(t){return new Date(t)}function D(t){return t instanceof Date?+t:+new Date(+t)}function L(t,n,i,o,a,u,s,f,c){function h(e){return(s(e)<e?b:u(e)<e?_:a(e)<e?x:o(e)<e?w:n(e)<e?i(e)<e?M:E:t(e)<e?S:k)(e)}function d(n,r,i,o){if(null==n&&(n=10),"number"==typeof n){var a=Math.abs(i-r)/n,u=e.bisector(function(t){return t[2]}).right(A,a);u===A.length?(o=e.tickStep(r/J,i/J,n),n=t):u?(o=(u=A[a/A[u-1][2]<A[u][2]/a?u-1:u])[1],n=u[0]):(o=e.tickStep(r,i,n),n=f)}return null==o?n:n.every(o)}var p=y(l,r.interpolateNumber),m=p.invert,v=p.domain,b=c(".%L"),_=c(":%S"),x=c("%I:%M"),w=c("%I %p"),M=c("%a %d"),E=c("%b %d"),S=c("%B"),k=c("%Y"),A=[[s,1,G],[s,5,5*G],[s,15,15*G],[s,30,30*G],[u,1,V],[u,5,5*V],[u,15,15*V],[u,30,30*V],[a,1,$],[a,3,3*$],[a,6,6*$],[a,12,12*$],[o,1,Q],[o,2,2*Q],[i,1,Z],[n,1,K],[n,3,3*K],[t,1,J]];return p.invert=function(t){return new Date(m(t))},p.domain=function(t){return arguments.length?v(I.call(t,D)):v().map(R)},p.ticks=function(t,e){var n,r=v(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=d(t,i,o,e),n=n?n.range(i,o+1):[],a?n.reverse():n},p.tickFormat=function(t,e){return null==e?h:c(e)},p.nice=function(t,e){var n=v();return(t=d(t,n[0],n[n.length-1],e))?v(X(n,t)):p},p.copy=function(){return g(p,L(t,n,i,o,a,u,s,f,c))},p}function P(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function z(t){function e(e){var o=(e-n)/(r-n);return t(i?Math.max(0,Math.min(1,o)):o)}var n=0,r=1,i=!1;return e.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.clamp=function(t){return arguments.length?(i=!!t,e):i},e.interpolator=function(n){return arguments.length?(t=n,e):t},e.copy=function(){return z(t).domain([n,r]).clamp(i)},v(e)}var B=Array.prototype,I=B.map,q=B.slice,U={name:"implicit"},F=function(t){return function(){return t}},H=function(t){return+t},Y=[0,1],W=function(t,n,r){var o,a=t[0],u=t[t.length-1],s=e.tickStep(a,u,null==n?10:n);switch((r=i.formatSpecifier(null==r?",f":r)).type){case"s":var f=Math.max(Math.abs(a),Math.abs(u));return null!=r.precision||isNaN(o=i.precisionPrefix(s,f))||(r.precision=o),i.formatPrefix(r,f);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=i.precisionRound(s,Math.max(Math.abs(a),Math.abs(u))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=i.precisionFixed(s))||(r.precision=o-2*("%"===r.type))}return i.format(r)},X=function(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t},G=1e3,V=60*G,$=60*V,Q=24*$,Z=7*Q,K=30*Q,J=365*Q,tt=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})},et=tt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),nt=tt("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),rt=tt("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),it=tt("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),ot=r.interpolateCubehelixLong(u.cubehelix(300,.5,0),u.cubehelix(-240,.5,1)),at=r.interpolateCubehelixLong(u.cubehelix(-100,.75,.35),u.cubehelix(80,1.5,.8)),ut=r.interpolateCubehelixLong(u.cubehelix(260,.75,.35),u.cubehelix(80,1.5,.8)),st=u.cubehelix(),ft=P(tt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),ct=P(tt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),lt=P(tt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ht=P(tt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));t.scaleBand=f,t.scalePoint=function(){return c(f().paddingInner(1))},t.scaleIdentity=_,t.scaleLinear=b,t.scaleLog=A,t.scaleOrdinal=s,t.scaleImplicit=U,t.scalePow=C,t.scaleSqrt=function(){return C().exponent(.5)},t.scaleQuantile=N,t.scaleQuantize=O,t.scaleThreshold=j,t.scaleTime=function(){return L(o.timeYear,o.timeMonth,o.timeWeek,o.timeDay,o.timeHour,o.timeMinute,o.timeSecond,o.timeMillisecond,a.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},t.scaleUtc=function(){return L(o.utcYear,o.utcMonth,o.utcWeek,o.utcDay,o.utcHour,o.utcMinute,o.utcSecond,o.utcMillisecond,a.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},t.schemeCategory10=et,t.schemeCategory20b=nt,t.schemeCategory20c=rt,t.schemeCategory20=it,t.interpolateCubehelixDefault=ot,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return st.h=360*t-100,st.s=1.5-1.5*e,st.l=.8-.9*e,st+""},t.interpolateWarm=at,t.interpolateCool=ut,t.interpolateViridis=ft,t.interpolateMagma=ct,t.interpolateInferno=lt,t.interpolatePlasma=ht,t.scaleSequential=z,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-array":7,"d3-collection":11,"d3-color":12,"d3-format":18,"d3-interpolate":21,"d3-time":32,"d3-time-format":31}],29:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===K&&e.documentElement.namespaceURI===K?e.createElement(t):e.createElementNS(n,t)}}function n(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function r(){return new i}function i(){this._="@"+(++nt).toString(36)}function o(t,e,n){return t=a(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function a(e,n,r){return function(i){var o=t.event;t.event=i;try{e.call(this,this.__data__,n,r)}finally{t.event=o}}}function u(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function s(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function f(t,e,n){var r=ut.hasOwnProperty(t.type)?o:a;return function(i,o,a){var u,s=this.__on,f=r(e,o,a);if(s)for(var c=0,l=s.length;c<l;++c)if((u=s[c]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=f,u.capture=n),void(u.value=e);this.addEventListener(t.type,f,n),u={type:t.type,name:t.name,value:e,listener:f,capture:n},s?s.push(u):this.__on=[u]}}function c(){}function l(){return[]}function h(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function d(t,e,n,r,i,o){for(var a,u=0,s=e.length,f=o.length;u<f;++u)(a=e[u])?(a.__data__=o[u],r[u]=a):n[u]=new h(t,o[u]);for(;u<s;++u)(a=e[u])&&(i[u]=a)}function p(t,e,n,r,i,o,a){var u,s,f,c={},l=e.length,d=o.length,p=new Array(l);for(u=0;u<l;++u)(s=e[u])&&(p[u]=f=pt+a.call(s,s.__data__,u,e),f in c?i[u]=s:c[f]=s);for(u=0;u<d;++u)(s=c[f=pt+a.call(t,o[u],u,o)])?(r[u]=s,s.__data__=o[u],c[f]=null):n[u]=new h(t,o[u]);for(u=0;u<l;++u)(s=e[u])&&c[p[u]]===s&&(i[u]=s)}function m(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function g(t){return function(){this.removeAttribute(t)}}function y(t){return function(){this.removeAttributeNS(t.space,t.local)}}function v(t,e){return function(){this.setAttribute(t,e)}}function b(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function _(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function x(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function w(t){return function(){this.style.removeProperty(t)}}function M(t,e,n){return function(){this.style.setProperty(t,e,n)}}function E(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function S(t,e){return t.style.getPropertyValue(e)||mt(t).getComputedStyle(t,null).getPropertyValue(e)}function k(t){return function(){delete this[t]}}function A(t,e){return function(){this[t]=e}}function T(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function C(t){return t.trim().split(/^|\s+/)}function N(t){return t.classList||new O(t)}function O(t){this._node=t,this._names=C(t.getAttribute("class")||"")}function j(t,e){for(var n=N(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function R(t,e){for(var n=N(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function D(t){return function(){j(this,t)}}function L(t){return function(){R(this,t)}}function P(t,e){return function(){(e.apply(this,arguments)?j:R)(this,t)}}function z(){this.textContent=""}function B(t){return function(){this.textContent=t}}function I(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function q(){this.innerHTML=""}function U(t){return function(){this.innerHTML=t}}function F(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function H(){this.nextSibling&&this.parentNode.appendChild(this)}function Y(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function W(){return null}function X(){var t=this.parentNode;t&&t.removeChild(this)}function G(t,e,n){var r=mt(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function V(t,e){return function(){return G(this,t,e)}}function $(t,e){return function(){return G(this,t,e.apply(this,arguments))}}function Q(t,e){this._groups=t,this._parents=e}function Z(){return new Q([[document.documentElement]],gt)}var K="http://www.w3.org/1999/xhtml",J={svg:"http://www.w3.org/2000/svg",xhtml:K,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tt=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),J.hasOwnProperty(e)?{space:J[e],local:t}:t},et=function(t){var r=tt(t);return(r.local?n:e)(r)},nt=0;i.prototype=r.prototype={constructor:i,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var rt=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var it=document.documentElement;if(!it.matches){var ot=it.webkitMatchesSelector||it.msMatchesSelector||it.mozMatchesSelector||it.oMatchesSelector;rt=function(t){return function(){return ot.call(this,t)}}}}var at=rt,ut={};t.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(ut={mouseenter:"mouseover",mouseleave:"mouseout"}));var st=function(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n},ft=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},ct=function(t){return null==t?c:function(){return this.querySelector(t)}},lt=function(t){return null==t?l:function(){return this.querySelectorAll(t)}},ht=function(t){return new Array(t.length)};h.prototype={constructor:h,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var dt=function(t){return function(){return t}},pt="$",mt=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};O.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var gt=[null];Q.prototype=Z.prototype={constructor:Q,select:function(t){"function"!=typeof t&&(t=ct(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,u=e[i],s=u.length,f=r[i]=new Array(s),c=0;c<s;++c)(o=u[c])&&(a=t.call(o,o.__data__,c,u))&&("__data__"in o&&(a.__data__=o.__data__),f[c]=a);return new Q(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=lt(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,u=e[o],s=u.length,f=0;f<s;++f)(a=u[f])&&(r.push(t.call(a,a.__data__,f,u)),i.push(a));return new Q(r,i)},filter:function(t){"function"!=typeof t&&(t=at(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],u=a.length,s=r[i]=[],f=0;f<u;++f)(o=a[f])&&t.call(o,o.__data__,f,a)&&s.push(o);return new Q(r,this._parents)},data:function(t,e){if(!t)return m=new Array(this.size()),f=-1,this.each(function(t){m[++f]=t}),m;var n=e?p:d,r=this._parents,i=this._groups;"function"!=typeof t&&(t=dt(t));for(var o=i.length,a=new Array(o),u=new Array(o),s=new Array(o),f=0;f<o;++f){var c=r[f],l=i[f],h=l.length,m=t.call(c,c&&c.__data__,f,r),g=m.length,y=u[f]=new Array(g),v=a[f]=new Array(g);n(c,l,y,v,s[f]=new Array(h),m,e);for(var b,_,x=0,w=0;x<g;++x)if(b=y[x]){for(x>=w&&(w=x+1);!(_=v[w])&&++w<g;);b._next=_||null}}return a=new Q(a,r),a._enter=u,a._exit=s,a},enter:function(){return new Q(this._enter||this._groups.map(ht),this._parents)},exit:function(){return new Q(this._exit||this._groups.map(ht),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,f=e[u],c=n[u],l=f.length,h=a[u]=new Array(l),d=0;d<l;++d)(s=f[d]||c[d])&&(h[d]=s);for(;u<r;++u)a[u]=e[u];return new Q(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){t||(t=m);for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i){for(var o,a=e[i],u=a.length,s=r[i]=new Array(u),f=0;f<u;++f)(o=a[f])&&(s[f]=o);s.sort(function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n})}return new Q(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=tt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?y:g:"function"==typeof e?n.local?x:_:n.local?b:v)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?w:"function"==typeof e?E:M)(t,e,null==n?"":n)):S(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?k:"function"==typeof e?T:A)(t,e)):this.node()[t]},classed:function(t,e){var n=C(t+"");if(arguments.length<2){for(var r=N(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?P:e?D:L)(n,e))},text:function(t){return arguments.length?this.each(null==t?z:("function"==typeof t?I:B)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?q:("function"==typeof t?F:U)(t)):this.node().innerHTML},raise:function(){return this.each(H)},lower:function(){return this.each(Y)},append:function(t){var e="function"==typeof t?t:et(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:et(t),r=null==e?W:"function"==typeof e?e:ct(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(X)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=u(t+""),a=o.length;{if(!(arguments.length<2)){for(c=e?f:s,null==n&&(n=!1),r=0;r<a;++r)this.each(c(o[r],e,n));return this}var c=this.node().__on;if(c)for(var l,h=0,d=c.length;h<d;++h)for(r=0,l=c[h];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value}},dispatch:function(t,e){return this.each(("function"==typeof e?$:V)(t,e))}};t.creator=et,t.local=r,t.matcher=at,t.mouse=function(t){var e=st();return e.changedTouches&&(e=e.changedTouches[0]),ft(t,e)},t.namespace=tt,t.namespaces=J,t.select=function(t){return"string"==typeof t?new Q([[document.querySelector(t)]],[document.documentElement]):new Q([[t]],gt)},t.selectAll=function(t){return"string"==typeof t?new Q([document.querySelectorAll(t)],[document.documentElement]):new Q([null==t?[]:t],gt)},t.selection=Z,t.selector=ct,t.selectorAll=lt,t.style=S,t.touch=function(t,e,n){arguments.length<3&&(n=e,e=st().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return ft(t,r);return null},t.touches=function(t,e){null==e&&(e=st().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=ft(t,e[n]);return i},t.window=mt,t.customEvent=function(e,n,r,i){var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(r,i)}finally{t.event=o}},Object.defineProperty(t,"__esModule",{value:!0})})},{}],30:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-path")):"function"==typeof define&&define.amd?define(["exports","d3-path"],i):i(r.d3=r.d3||{},r.d3)}(this,function(t,e){"use strict";function n(t){return t>1?0:t<-1?it:Math.acos(t)}function r(t){return t>=1?ot:t<=-1?-ot:Math.asin(t)}function i(t){return t.innerRadius}function o(t){return t.outerRadius}function a(t){return t.startAngle}function u(t){return t.endAngle}function s(t){return t&&t.padAngle}function f(t,e,n,r,i,o,a,u){var s=n-t,f=r-e,c=a-i,l=u-o,h=(c*(e-o)-l*(t-i))/(l*s-c*f);return[t+h*s,e+h*f]}function c(t,e,n,r,i,o,a){var u=t-n,s=e-r,f=(a?o:-o)/nt(u*u+s*s),c=f*s,l=-f*u,h=t+c,d=e+l,p=n+c,m=r+l,g=(h+p)/2,y=(d+m)/2,v=p-h,b=m-d,_=v*v+b*b,x=i-o,w=h*m-p*d,M=(b<0?-1:1)*nt(J(0,x*x*_-w*w)),E=(w*b-v*M)/_,S=(-w*v-b*M)/_,k=(w*b+v*M)/_,A=(-w*v+b*M)/_,T=E-g,C=S-y,N=k-g,O=A-y;return T*T+C*C>N*N+O*O&&(E=k,S=A),{cx:E,cy:S,x01:-c,y01:-l,x11:E*(i/x-1),y11:S*(i/x-1)}}function l(t){this._context=t}function h(t){return t[0]}function d(t){return t[1]}function p(t){this._curve=t}function m(t){function e(e){return new p(t(e))}return e._curve=t,e}function g(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(m(t)):e()._curve},t}function y(t){return t.source}function v(t){return t.target}function b(t){function n(){var n,s=gt.call(arguments),f=r.apply(this,s),c=i.apply(this,s);if(u||(u=n=e.path()),t(u,+o.apply(this,(s[0]=f,s)),+a.apply(this,s),+o.apply(this,(s[0]=c,s)),+a.apply(this,s)),n)return u=null,n+""||null}var r=y,i=v,o=h,a=d,u=null;return n.source=function(t){return arguments.length?(r=t,n):r},n.target=function(t){return arguments.length?(i=t,n):i},n.x=function(t){return arguments.length?(o="function"==typeof t?t:$(+t),n):o},n.y=function(t){return arguments.length?(a="function"==typeof t?t:$(+t),n):a},n.context=function(t){return arguments.length?(u=null==t?null:t,n):u},n}function _(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function x(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function w(t,e,n,r,i){var o=mt(e,n),a=mt(e,n=(n+i)/2),u=mt(r,n),s=mt(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],u[0],u[1],s[0],s[1])}function M(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function E(t){this._context=t}function S(t){this._context=t}function k(t){this._context=t}function A(t,e){this._basis=new E(t),this._beta=e}function T(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function C(t,e){this._context=t,this._k=(1-e)/6}function N(t,e){this._context=t,this._k=(1-e)/6}function O(t,e){this._context=t,this._k=(1-e)/6}function j(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>rt){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,s=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/s,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/s}if(t._l23_a>rt){var f=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*f+t._x1*t._l23_2a-e*t._l12_2a)/c,a=(a*f+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function R(t,e){this._context=t,this._alpha=e}function D(t,e){this._context=t,this._alpha=e}function L(t,e){this._context=t,this._alpha=e}function P(t){this._context=t}function z(t){return t<0?-1:1}function B(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),u=(o*i+a*r)/(r+i);return(z(o)+z(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(u))||0}function I(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function q(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*e,o-u,a-u*n,o,a)}function U(t){this._context=t}function F(t){this._context=new H(t)}function H(t){this._context=t}function Y(t){this._context=t}function W(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function X(t,e){this._context=t,this._t=e}function G(t,e){return t[e]}function V(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}var $=function(t){return function(){return t}},Q=Math.abs,Z=Math.atan2,K=Math.cos,J=Math.max,tt=Math.min,et=Math.sin,nt=Math.sqrt,rt=1e-12,it=Math.PI,ot=it/2,at=2*it;l.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var ut=function(t){return new l(t)},st=function(){function t(t){var s,f,c,l=t.length,h=!1;for(null==o&&(u=a(c=e.path())),s=0;s<=l;++s)!(s<l&&i(f=t[s],s,t))===h&&((h=!h)?u.lineStart():u.lineEnd()),h&&u.point(+n(f,s,t),+r(f,s,t));if(c)return u=null,c+""||null}var n=h,r=d,i=$(!0),o=null,a=ut,u=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:$(+e),t):n},t.y=function(e){return arguments.length?(r="function"==typeof e?e:$(+e),t):r},t.defined=function(e){return arguments.length?(i="function"==typeof e?e:$(!!e),t):i},t.curve=function(e){return arguments.length?(a=e,null!=o&&(u=a(o)),t):a},t.context=function(e){return arguments.length?(null==e?o=u=null:u=a(o=e),t):o},t},ft=function(){function t(t){var n,l,h,d,p,m=t.length,g=!1,y=new Array(m),v=new Array(m);for(null==s&&(c=f(p=e.path())),n=0;n<=m;++n){if(!(n<m&&u(d=t[n],n,t))===g)if(g=!g)l=n,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),h=n-1;h>=l;--h)c.point(y[h],v[h]);c.lineEnd(),c.areaEnd()}g&&(y[n]=+r(d,n,t),v[n]=+o(d,n,t),c.point(i?+i(d,n,t):y[n],a?+a(d,n,t):v[n]))}if(p)return c=null,p+""||null}function n(){return st().defined(u).curve(f).context(s)}var r=h,i=null,o=$(0),a=d,u=$(!0),s=null,f=ut,c=null;return t.x=function(e){return arguments.length?(r="function"==typeof e?e:$(+e),i=null,t):r},t.x0=function(e){return arguments.length?(r="function"==typeof e?e:$(+e),t):r},t.x1=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:$(+e),t):i},t.y=function(e){return arguments.length?(o="function"==typeof e?e:$(+e),a=null,t):o},t.y0=function(e){return arguments.length?(o="function"==typeof e?e:$(+e),t):o},t.y1=function(e){return arguments.length?(a=null==e?null:"function"==typeof e?e:$(+e),t):a},t.lineX0=t.lineY0=function(){return n().x(r).y(o)},t.lineY1=function(){return n().x(r).y(a)},t.lineX1=function(){return n().x(i).y(o)},t.defined=function(e){return arguments.length?(u="function"==typeof e?e:$(!!e),t):u},t.curve=function(e){return arguments.length?(f=e,null!=s&&(c=f(s)),t):f},t.context=function(e){return arguments.length?(null==e?s=c=null:c=f(s=e),t):s},t},ct=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},lt=function(t){return t},ht=m(ut);p.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var dt=function(){return g(st().curve(ht))},pt=function(){var t=ft().curve(ht),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return g(n())},delete t.lineX0,t.lineEndAngle=function(){return g(r())},delete t.lineX1,t.lineInnerRadius=function(){return g(i())},delete t.lineY0,t.lineOuterRadius=function(){return g(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(m(t)):e()._curve},t},mt=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},gt=Array.prototype.slice,yt={draw:function(t,e){var n=Math.sqrt(e/it);t.moveTo(n,0),t.arc(0,0,n,0,at)}},vt={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},bt=Math.sqrt(1/3),_t=2*bt,xt={draw:function(t,e){var n=Math.sqrt(e/_t),r=n*bt;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},wt=Math.sin(it/10)/Math.sin(7*it/10),Mt=Math.sin(at/10)*wt,Et=-Math.cos(at/10)*wt,St={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=Mt*n,i=Et*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=at*o/5,u=Math.cos(a),s=Math.sin(a);t.lineTo(s*n,-u*n),t.lineTo(u*r-s*i,s*r+u*i)}t.closePath()}},kt={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},At=Math.sqrt(3),Tt={draw:function(t,e){var n=-Math.sqrt(e/(3*At));t.moveTo(0,2*n),t.lineTo(-At*n,-n),t.lineTo(At*n,-n),t.closePath()}},Ct=-.5,Nt=Math.sqrt(3)/2,Ot=1/Math.sqrt(12),jt=3*(Ot/2+1),Rt={draw:function(t,e){var n=Math.sqrt(e/jt),r=n/2,i=n*Ot,o=r,a=n*Ot+n,u=-o,s=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(u,s),t.lineTo(Ct*r-Nt*i,Nt*r+Ct*i),t.lineTo(Ct*o-Nt*a,Nt*o+Ct*a),t.lineTo(Ct*u-Nt*s,Nt*u+Ct*s),t.lineTo(Ct*r+Nt*i,Ct*i-Nt*r),t.lineTo(Ct*o+Nt*a,Ct*a-Nt*o),t.lineTo(Ct*u+Nt*s,Ct*s-Nt*u),t.closePath()}},Dt=[yt,vt,xt,kt,St,Tt,Rt],Lt=function(){};E.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:M(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:M(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};S.prototype={areaStart:Lt,areaEnd:Lt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:M(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};k.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:M(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};A.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,u=e[n]-o,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(i+r*a),this._beta*e[s]+(1-this._beta)*(o+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Pt=function t(e){function n(t){return 1===e?new E(t):new A(t,e)}return n.beta=function(e){return t(+e)},n}(.85);C.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:T(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:T(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var zt=function t(e){function n(t){return new C(t,e)}return n.tension=function(e){return t(+e)},n}(0);N.prototype={areaStart:Lt,areaEnd:Lt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:T(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Bt=function t(e){function n(t){return new N(t,e)}return n.tension=function(e){return t(+e)},n}(0);O.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:T(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var It=function t(e){function n(t){return new O(t,e)}return n.tension=function(e){return t(+e)},n}(0);R.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:j(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var qt=function t(e){function n(t){return e?new R(t,e):new C(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);D.prototype={areaStart:Lt,areaEnd:Lt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:j(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ut=function t(e){function n(t){return e?new D(t,e):new N(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);L.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:j(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ft=function t(e){function n(t){return e?new L(t,e):new O(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);P.prototype={areaStart:Lt,areaEnd:Lt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};U.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:q(this,this._t0,I(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,q(this,I(this,n=B(this,t,e)),n);break;default:q(this,this._t0,n=B(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(F.prototype=Object.create(U.prototype)).point=function(t,e){U.prototype.point.call(this,e,t)},H.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},Y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=W(t),i=W(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};X.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Ht=function(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],u=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<u;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},Yt=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n},Wt=function(t){var e=t.map(V);return Yt(t).sort(function(t,n){return e[t]-e[n]})};t.arc=function(){function t(){var t,i,o=+l.apply(this,arguments),a=+h.apply(this,arguments),u=m.apply(this,arguments)-ot,s=g.apply(this,arguments)-ot,b=Q(s-u),_=s>u;if(v||(v=t=e.path()),a<o&&(i=a,a=o,o=i),a>rt)if(b>at-rt)v.moveTo(a*K(u),a*et(u)),v.arc(0,0,a,u,s,!_),o>rt&&(v.moveTo(o*K(s),o*et(s)),v.arc(0,0,o,s,u,_));else{var x,w,M=u,E=s,S=u,k=s,A=b,T=b,C=y.apply(this,arguments)/2,N=C>rt&&(p?+p.apply(this,arguments):nt(o*o+a*a)),O=tt(Q(a-o)/2,+d.apply(this,arguments)),j=O,R=O;if(N>rt){var D=r(N/o*et(C)),L=r(N/a*et(C));(A-=2*D)>rt?(D*=_?1:-1,S+=D,k-=D):(A=0,S=k=(u+s)/2),(T-=2*L)>rt?(L*=_?1:-1,M+=L,E-=L):(T=0,M=E=(u+s)/2)}var P=a*K(M),z=a*et(M),B=o*K(k),I=o*et(k);if(O>rt){var q=a*K(E),U=a*et(E),F=o*K(S),H=o*et(S);if(b<it){var Y=A>rt?f(P,z,F,H,q,U,B,I):[B,I],W=P-Y[0],X=z-Y[1],G=q-Y[0],V=U-Y[1],$=1/et(n((W*G+X*V)/(nt(W*W+X*X)*nt(G*G+V*V)))/2),J=nt(Y[0]*Y[0]+Y[1]*Y[1]);j=tt(O,(o-J)/($-1)),R=tt(O,(a-J)/($+1))}}T>rt?R>rt?(x=c(F,H,P,z,a,R,_),w=c(q,U,B,I,a,R,_),v.moveTo(x.cx+x.x01,x.cy+x.y01),R<O?v.arc(x.cx,x.cy,R,Z(x.y01,x.x01),Z(w.y01,w.x01),!_):(v.arc(x.cx,x.cy,R,Z(x.y01,x.x01),Z(x.y11,x.x11),!_),v.arc(0,0,a,Z(x.cy+x.y11,x.cx+x.x11),Z(w.cy+w.y11,w.cx+w.x11),!_),v.arc(w.cx,w.cy,R,Z(w.y11,w.x11),Z(w.y01,w.x01),!_))):(v.moveTo(P,z),v.arc(0,0,a,M,E,!_)):v.moveTo(P,z),o>rt&&A>rt?j>rt?(x=c(B,I,q,U,o,-j,_),w=c(P,z,F,H,o,-j,_),v.lineTo(x.cx+x.x01,x.cy+x.y01),j<O?v.arc(x.cx,x.cy,j,Z(x.y01,x.x01),Z(w.y01,w.x01),!_):(v.arc(x.cx,x.cy,j,Z(x.y01,x.x01),Z(x.y11,x.x11),!_),v.arc(0,0,o,Z(x.cy+x.y11,x.cx+x.x11),Z(w.cy+w.y11,w.cx+w.x11),_),v.arc(w.cx,w.cy,j,Z(w.y11,w.x11),Z(w.y01,w.x01),!_))):v.arc(0,0,o,k,S,_):v.lineTo(B,I)}else v.moveTo(0,0);if(v.closePath(),t)return v=null,t+""||null}var l=i,h=o,d=$(0),p=null,m=a,g=u,y=s,v=null;return t.centroid=function(){var t=(+l.apply(this,arguments)+ +h.apply(this,arguments))/2,e=(+m.apply(this,arguments)+ +g.apply(this,arguments))/2-it/2;return[K(e)*t,et(e)*t]},t.innerRadius=function(e){return arguments.length?(l="function"==typeof e?e:$(+e),t):l},t.outerRadius=function(e){return arguments.length?(h="function"==typeof e?e:$(+e),t):h},t.cornerRadius=function(e){return arguments.length?(d="function"==typeof e?e:$(+e),t):d},t.padRadius=function(e){return arguments.length?(p=null==e?null:"function"==typeof e?e:$(+e),t):p},t.startAngle=function(e){return arguments.length?(m="function"==typeof e?e:$(+e),t):m},t.endAngle=function(e){return arguments.length?(g="function"==typeof e?e:$(+e),t):g},t.padAngle=function(e){return arguments.length?(y="function"==typeof e?e:$(+e),t):y},t.context=function(e){return arguments.length?(v=null==e?null:e,t):v},t},t.area=ft,t.line=st,t.pie=function(){function t(t){var u,s,f,c,l,h=t.length,d=0,p=new Array(h),m=new Array(h),g=+i.apply(this,arguments),y=Math.min(at,Math.max(-at,o.apply(this,arguments)-g)),v=Math.min(Math.abs(y)/h,a.apply(this,arguments)),b=v*(y<0?-1:1);for(u=0;u<h;++u)(l=m[p[u]=u]=+e(t[u],u,t))>0&&(d+=l);for(null!=n?p.sort(function(t,e){return n(m[t],m[e])}):null!=r&&p.sort(function(e,n){return r(t[e],t[n])}),u=0,f=d?(y-h*b)/d:0;u<h;++u,g=c)s=p[u],c=g+((l=m[s])>0?l*f:0)+b,m[s]={data:t[s],index:u,value:l,startAngle:g,endAngle:c,padAngle:v};return m}var e=lt,n=ct,r=null,i=$(0),o=$(at),a=$(0);return t.value=function(n){return arguments.length?(e="function"==typeof n?n:$(+n),t):e},t.sortValues=function(e){return arguments.length?(n=e,r=null,t):n},t.sort=function(e){return arguments.length?(r=e,n=null,t):r},t.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:$(+e),t):i},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:$(+e),t):o},t.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:$(+e),t):a},t},t.areaRadial=pt,t.radialArea=pt,t.lineRadial=dt,t.radialLine=dt,t.pointRadial=mt,t.linkHorizontal=function(){return b(_)},t.linkVertical=function(){return b(x)},t.linkRadial=function(){var t=b(w);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.symbol=function(){function t(){var t;if(i||(i=t=e.path()),n.apply(this,arguments).draw(i,+r.apply(this,arguments)),t)return i=null,t+""||null}var n=$(yt),r=$(64),i=null;return t.type=function(e){return arguments.length?(n="function"==typeof e?e:$(e),t):n},t.size=function(e){return arguments.length?(r="function"==typeof e?e:$(+e),t):r},t.context=function(e){return arguments.length?(i=null==e?null:e,t):i},t},t.symbols=Dt,t.symbolCircle=yt,t.symbolCross=vt,t.symbolDiamond=xt,t.symbolSquare=kt,t.symbolStar=St,t.symbolTriangle=Tt,t.symbolWye=Rt,t.curveBasisClosed=function(t){return new S(t)},t.curveBasisOpen=function(t){return new k(t)},t.curveBasis=function(t){return new E(t)},t.curveBundle=Pt,t.curveCardinalClosed=Bt,t.curveCardinalOpen=It,t.curveCardinal=zt,t.curveCatmullRomClosed=Ut,t.curveCatmullRomOpen=Ft,t.curveCatmullRom=qt,t.curveLinearClosed=function(t){return new P(t)},t.curveLinear=ut,t.curveMonotoneX=function(t){return new U(t)},t.curveMonotoneY=function(t){return new F(t)},t.curveNatural=function(t){return new Y(t)},t.curveStep=function(t){return new X(t,.5)},t.curveStepAfter=function(t){return new X(t,1)},t.curveStepBefore=function(t){return new X(t,0)},t.stack=function(){function t(t){var o,a,u=e.apply(this,arguments),s=t.length,f=u.length,c=new Array(f);for(o=0;o<f;++o){for(var l,h=u[o],d=c[o]=new Array(s),p=0;p<s;++p)d[p]=l=[0,+i(t[p],h,p,t)],l.data=t[p];d.key=h}for(o=0,a=n(c);o<f;++o)c[a[o]].index=o;return r(c,a),c}var e=$([]),n=Yt,r=Ht,i=G;return t.keys=function(n){return arguments.length?(e="function"==typeof n?n:$(gt.call(n)),t):e},t.value=function(e){return arguments.length?(i="function"==typeof e?e:$(+e),t):i},t.order=function(e){return arguments.length?(n=null==e?Yt:"function"==typeof e?e:$(gt.call(e)),t):n},t.offset=function(e){return arguments.length?(r=null==e?Ht:e,t):r},t},t.stackOffsetExpand=function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}Ht(t,e)}},t.stackOffsetDiverging=function(t,e){if((u=t.length)>1)for(var n,r,i,o,a,u,s=0,f=t[e[0]].length;s<f;++s)for(o=a=0,n=0;n<u;++n)(i=(r=t[e[n]][s])[1]-r[0])>=0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):r[0]=o},t.stackOffsetNone=Ht,t.stackOffsetSilhouette=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,u=0;a<n;++a)u+=t[a][r][1]||0;i[r][1]+=i[r][0]=-u/2}Ht(t,e)}},t.stackOffsetWiggle=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var u=0,s=0,f=0;u<i;++u){for(var c=t[e[u]],l=c[a][1]||0,h=(l-(c[a-1][1]||0))/2,d=0;d<u;++d){var p=t[e[d]];h+=(p[a][1]||0)-(p[a-1][1]||0)}s+=l,f+=h*l}n[a-1][1]+=n[a-1][0]=o,s&&(o-=f/s)}n[a-1][1]+=n[a-1][0]=o,Ht(t,e)}},t.stackOrderAscending=Wt,t.stackOrderDescending=function(t){return Wt(t).reverse()},t.stackOrderInsideOut=function(t){var e,n,r=t.length,i=t.map(V),o=Yt(t).sort(function(t,e){return i[e]-i[t]}),a=0,u=0,s=[],f=[];for(e=0;e<r;++e)n=o[e],a<u?(a+=i[n],s.push(n)):(u+=i[n],f.push(n));return f.reverse().concat(s)},t.stackOrderNone=Yt,t.stackOrderReverse=function(t){return Yt(t).reverse()},Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-path":22}],31:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-time")):"function"==typeof define&&define.amd?define(["exports","d3-time"],i):i(r.d3=r.d3||{},r.d3)}(this,function(t,e){"use strict";function n(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function r(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function i(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function o(t){function e(t,e){return function(n){var r,i,o,a=[],u=-1,s=0,f=t.length;for(n instanceof Date||(n=new Date(+n));++u<f;)37===t.charCodeAt(u)&&(a.push(t.slice(s,u)),null!=(i=et[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),s=u+1);return a.push(t.slice(s,u)),a.join("")}}function o(t,e){return function(n){var o=i(1900);if(a(o,t,n+="",0)!=n.length)return null;if("p"in o&&(o.H=o.H%12+12*o.p),"W"in o||"U"in o){"w"in o||(o.w="W"in o?1:0);var u="Z"in o?r(i(o.y)).getUTCDay():e(i(o.y)).getDay();o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(u+5)%7:o.w+7*o.U-(u+6)%7}return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,r(o)):e(o)}}function a(t,e,n,r){for(var i,o,a=0,u=e.length,s=n.length;a<u;){if(r>=s)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=bt[i in et?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}var u=t.dateTime,J=t.date,tt=t.time,nt=t.periods,rt=t.days,it=t.shortDays,ot=t.months,at=t.shortMonths,ut=s(nt),st=f(nt),ft=s(rt),ct=f(rt),lt=s(it),ht=f(it),dt=s(ot),pt=f(ot),mt=s(at),gt=f(at),yt={a:function(t){return it[t.getDay()]},A:function(t){return rt[t.getDay()]},b:function(t){return at[t.getMonth()]},B:function(t){return ot[t.getMonth()]},c:null,d:E,e:E,H:S,I:k,j:A,L:T,m:C,M:N,p:function(t){return nt[+(t.getHours()>=12)]},S:O,U:j,w:R,W:D,x:null,X:null,y:L,Y:P,Z:z,"%":K},vt={a:function(t){return it[t.getUTCDay()]},A:function(t){return rt[t.getUTCDay()]},b:function(t){return at[t.getUTCMonth()]},B:function(t){return ot[t.getUTCMonth()]},c:null,d:B,e:B,H:I,I:q,j:U,L:F,m:H,M:Y,p:function(t){return nt[+(t.getUTCHours()>=12)]},S:W,U:X,w:G,W:V,x:null,X:null,y:$,Y:Q,Z:Z,"%":K},bt={a:function(t,e,n){var r=lt.exec(e.slice(n));return r?(t.w=ht[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=ft.exec(e.slice(n));return r?(t.w=ct[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=mt.exec(e.slice(n));return r?(t.m=gt[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=dt.exec(e.slice(n));return r?(t.m=pt[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,e,n){return a(t,u,e,n)},d:y,e:y,H:b,I:b,j:v,L:w,m:g,M:_,p:function(t,e,n){var r=ut.exec(e.slice(n));return r?(t.p=st[r[0].toLowerCase()],n+r[0].length):-1},S:x,U:l,w:c,W:h,x:function(t,e,n){return a(t,J,e,n)},X:function(t,e,n){return a(t,tt,e,n)},y:p,Y:d,Z:m,"%":M};return yt.x=e(J,yt),yt.X=e(tt,yt),yt.c=e(u,yt),vt.x=e(J,vt),vt.X=e(tt,vt),vt.c=e(u,vt),{format:function(t){var n=e(t+="",yt);return n.toString=function(){return t},n},parse:function(t){var e=o(t+="",n);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",vt);return n.toString=function(){return t},n},utcParse:function(t){var e=o(t,r);return e.toString=function(){return t},e}}}function a(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function u(t){return t.replace(it,"\\$&")}function s(t){return new RegExp("^(?:"+t.map(u).join("|")+")","i")}function f(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function c(t,e,n){var r=nt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function l(t,e,n){var r=nt.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function h(t,e,n){var r=nt.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function d(t,e,n){var r=nt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function p(t,e,n){var r=nt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function m(t,e,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function g(t,e,n){var r=nt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function y(t,e,n){var r=nt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function v(t,e,n){var r=nt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function b(t,e,n){var r=nt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function _(t,e,n){var r=nt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function x(t,e,n){var r=nt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function w(t,e,n){var r=nt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function M(t,e,n){var r=rt.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function E(t,e){return a(t.getDate(),e,2)}function S(t,e){return a(t.getHours(),e,2)}function k(t,e){return a(t.getHours()%12||12,e,2)}function A(t,n){return a(1+e.timeDay.count(e.timeYear(t),t),n,3)}function T(t,e){return a(t.getMilliseconds(),e,3)}function C(t,e){return a(t.getMonth()+1,e,2)}function N(t,e){return a(t.getMinutes(),e,2)}function O(t,e){return a(t.getSeconds(),e,2)}function j(t,n){return a(e.timeSunday.count(e.timeYear(t),t),n,2)}function R(t){return t.getDay()}function D(t,n){return a(e.timeMonday.count(e.timeYear(t),t),n,2)}function L(t,e){return a(t.getFullYear()%100,e,2)}function P(t,e){return a(t.getFullYear()%1e4,e,4)}function z(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+a(e/60|0,"0",2)+a(e%60,"0",2)}function B(t,e){return a(t.getUTCDate(),e,2)}function I(t,e){return a(t.getUTCHours(),e,2)}function q(t,e){return a(t.getUTCHours()%12||12,e,2)}function U(t,n){return a(1+e.utcDay.count(e.utcYear(t),t),n,3)}function F(t,e){return a(t.getUTCMilliseconds(),e,3)}function H(t,e){return a(t.getUTCMonth()+1,e,2)}function Y(t,e){return a(t.getUTCMinutes(),e,2)}function W(t,e){return a(t.getUTCSeconds(),e,2)}function X(t,n){return a(e.utcSunday.count(e.utcYear(t),t),n,2)}function G(t){return t.getUTCDay()}function V(t,n){return a(e.utcMonday.count(e.utcYear(t),t),n,2)}function $(t,e){return a(t.getUTCFullYear()%100,e,2)}function Q(t,e){return a(t.getUTCFullYear()%1e4,e,4)}function Z(){return"+0000"}function K(){return"%"}function J(e){return tt=o(e),t.timeFormat=tt.format,t.timeParse=tt.parse,t.utcFormat=tt.utcFormat,t.utcParse=tt.utcParse,tt}var tt,et={"-":"",_:" ",0:"0"},nt=/^\s*\d+/,rt=/^%/,it=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;J({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ot=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),at=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:t.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");t.timeFormatDefaultLocale=J,t.timeFormatLocale=o,t.isoFormat=ot,t.isoParse=at,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-time":32}],32:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,n,r,a){function u(e){return t(e=new Date(+e)),e}return u.floor=u,u.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},u.round=function(t){var e=u(t),n=u.ceil(t);return t-e<n-t?e:n},u.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},u.range=function(e,r,i){var o=[];if(e=u.ceil(e),i=null==i?1:Math.floor(i),!(e<r&&i>0))return o;do{o.push(new Date(+e))}while(n(e,i),t(e),e<r);return o},u.filter=function(r){return e(function(e){if(e>=e)for(;t(e),!r(e);)e.setTime(e-1)},function(t,e){if(t>=t)if(e<0)for(;++e<=0;)for(;n(t,-1),!r(t););else for(;--e>=0;)for(;n(t,1),!r(t););})},r&&(u.count=function(e,n){return i.setTime(+e),o.setTime(+n),t(i),t(o),Math.floor(r(i,o))},u.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?u.filter(a?function(e){return a(e)%t==0}:function(e){return u.count(0,e)%t==0}):u:null}),u}function n(t){return e(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*s)/f})}function r(t){return e(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/f})}var i=new Date,o=new Date,a=e(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});a.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?e(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):a:null};var u=a.range,s=6e4,f=6048e5,c=e(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),l=c.range,h=e(function(t){t.setTime(Math.floor(t/s)*s)},function(t,e){t.setTime(+t+e*s)},function(t,e){return(e-t)/s},function(t){return t.getMinutes()}),d=h.range,p=e(function(t){var e=t.getTimezoneOffset()*s%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),m=p.range,g=e(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*s)/864e5},function(t){return t.getDate()-1}),y=g.range,v=n(0),b=n(1),_=n(2),x=n(3),w=n(4),M=n(5),E=n(6),S=v.range,k=b.range,A=_.range,T=x.range,C=w.range,N=M.range,O=E.range,j=e(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),R=j.range,D=e(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});D.every=function(t){return isFinite(t=Math.floor(t))&&t>0?e(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var L=D.range,P=e(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*s)},function(t,e){return(e-t)/s},function(t){return t.getUTCMinutes()}),z=P.range,B=e(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),I=B.range,q=e(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),U=q.range,F=r(0),H=r(1),Y=r(2),W=r(3),X=r(4),G=r(5),V=r(6),$=F.range,Q=H.range,Z=Y.range,K=W.range,J=X.range,tt=G.range,et=V.range,nt=e(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),rt=nt.range,it=e(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});it.every=function(t){return isFinite(t=Math.floor(t))&&t>0?e(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var ot=it.range;t.timeInterval=e,t.timeMillisecond=a,t.timeMilliseconds=u,t.utcMillisecond=a,t.utcMilliseconds=u,t.timeSecond=c,t.timeSeconds=l,t.utcSecond=c,t.utcSeconds=l,t.timeMinute=h,t.timeMinutes=d,t.timeHour=p,t.timeHours=m,t.timeDay=g,t.timeDays=y,t.timeWeek=v,t.timeWeeks=S,t.timeSunday=v,t.timeSundays=S,t.timeMonday=b,t.timeMondays=k,t.timeTuesday=_,t.timeTuesdays=A,t.timeWednesday=x,t.timeWednesdays=T,t.timeThursday=w,t.timeThursdays=C,t.timeFriday=M,t.timeFridays=N,t.timeSaturday=E,t.timeSaturdays=O,t.timeMonth=j,t.timeMonths=R,t.timeYear=D,t.timeYears=L,t.utcMinute=P,t.utcMinutes=z,t.utcHour=B,t.utcHours=I,t.utcDay=q,t.utcDays=U,t.utcWeek=F,t.utcWeeks=$,t.utcSunday=F,t.utcSundays=$,t.utcMonday=H,t.utcMondays=Q,t.utcTuesday=Y,t.utcTuesdays=Z,t.utcWednesday=W,t.utcWednesdays=K,t.utcThursday=X,t.utcThursdays=J,t.utcFriday=G,t.utcFridays=tt,t.utcSaturday=V,t.utcSaturdays=et,t.utcMonth=nt,t.utcMonths=rt,t.utcYear=it,t.utcYears=ot,Object.defineProperty(t,"__esModule",{value:!0})})},{}],33:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(){return y||(_(n),y=b.now()+v)}function n(){y=0}function r(){this._call=this._time=this._next=null}function i(t,e,n){var i=new r;return i.restart(t,e,n),i}function o(){e(),++h;for(var t,n=c;n;)(t=y-n._time)>=0&&n._call.call(null,t),n=n._next;--h}function a(){y=(g=b.now())+v,h=d=0;try{o()}finally{h=0,s(),y=0}}function u(){var t=b.now(),e=t-g;e>m&&(v-=e,g=t)}function s(){for(var t,e,n=c,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:c=e);l=t,f(r)}function f(t){h||(d&&(d=clearTimeout(d)),t-y>24?(t<1/0&&(d=setTimeout(a,t-b.now()-v)),p&&(p=clearInterval(p))):(p||(g=b.now(),p=setInterval(u,m)),h=1,_(a)))}var c,l,h=0,d=0,p=0,m=1e3,g=0,y=0,v=0,b="object"==typeof performance&&performance.now?performance:Date,_="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};r.prototype=i.prototype={constructor:r,restart:function(t,n,r){if("function"!=typeof t)throw new TypeError("callback is not a function");r=(null==r?e():+r)+(null==n?0:+n),this._next||l===this||(l?l._next=this:c=this,l=this),this._call=t,this._time=r,f()},stop:function(){this._call&&(this._call=null,this._time=1/0,f())}};t.now=e,t.timer=i,t.timerFlush=o,t.timeout=function(t,e,n){var i=new r;return e=null==e?0:+e,i.restart(function(n){i.stop(),t(n+e)},e,n),i},t.interval=function(t,n,i){var o=new r,a=n;return null==n?(o.restart(t,n,i),o):(n=+n,i=null==i?e():+i,o.restart(function e(r){r+=a,o.restart(e,a+=n,i),t(r)},n,i),o)},Object.defineProperty(t,"__esModule",{value:!0})})},{}],34:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-selection"),t("d3-dispatch"),t("d3-timer"),t("d3-interpolate"),t("d3-color"),t("d3-ease")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-dispatch","d3-timer","d3-interpolate","d3-color","d3-ease"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3,r.d3)}(this,function(t,e,n,r,i,o,a){"use strict";function u(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>H)throw new Error("too late");return n}function s(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>W)throw new Error("too late");return n}function f(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("too late");return n}function c(t,e,n){function i(f){var c,l,h,d;if(n.state!==Y)return a();for(c in s)if((d=s[c]).name===n.name){if(d.state===X)return r.timeout(i);d.state===G?(d.state=$,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete s[c]):+c<e&&(d.state=$,d.timer.stop(),delete s[c])}if(r.timeout(function(){n.state===X&&(n.state=G,n.timer.restart(o,n.delay,n.time),o(f))}),n.state=W,n.on.call("start",t,t.__data__,n.index,n.group),n.state===W){for(n.state=X,u=new Array(h=n.tween.length),c=0,l=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(u[++l]=d);u.length=l+1}}function o(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=V,1),i=-1,o=u.length;++i<o;)u[i].call(null,r);n.state===V&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=$,n.timer.stop(),delete s[e];for(var r in s)return;delete t.__transition}var u,s=t.__transition;s[e]=n,n.timer=r.timer(function(t){n.state=Y,n.timer.restart(i,n.delay,n.time),n.delay<=t&&i(t-n.delay)},0,n.time)}function l(t,e){var n,r;return function(){var i=s(this,t),o=i.tween;if(o!==n)for(var a=0,u=(r=n=o).length;a<u;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function h(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=s(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:e,value:n},f=0,c=i.length;f<c;++f)if(i[f].name===e){i[f]=u;break}f===c&&i.push(u)}o.tween=i}}function d(t,e,n){var r=t._id;return t.each(function(){var t=s(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return f(t,r).value[e]}}function p(t){return function(){this.removeAttribute(t)}}function m(t){return function(){this.removeAttributeNS(t.space,t.local)}}function g(t,e,n){var r,i;return function(){var o=this.getAttribute(t);return o===n?null:o===r?i:i=e(r=o,n)}}function y(t,e,n){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===r?i:i=e(r=o,n)}}function v(t,e,n){var r,i,o;return function(){var a,u=n(this);{if(null!=u)return(a=this.getAttribute(t))===u?null:a===r&&u===i?o:o=e(r=a,i=u);this.removeAttribute(t)}}}function b(t,e,n){var r,i,o;return function(){var a,u=n(this);{if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===u?null:a===r&&u===i?o:o=e(r=a,i=u);this.removeAttributeNS(t.space,t.local)}}}function _(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttributeNS(t.space,t.local,r(e))}}return n._value=e,n}function x(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttribute(t,r(e))}}return n._value=e,n}function w(t,e){return function(){u(this,t).delay=+e.apply(this,arguments)}}function M(t,e){return e=+e,function(){u(this,t).delay=e}}function E(t,e){return function(){s(this,t).duration=+e.apply(this,arguments)}}function S(t,e){return e=+e,function(){s(this,t).duration=e}}function k(t,e){if("function"!=typeof e)throw new Error;return function(){s(this,t).ease=e}}function A(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}function T(t,e,n){var r,i,o=A(e)?u:s;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(e,n),a.on=i}}function C(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function N(t,n){var r,i,o;return function(){var a=e.style(this,t),u=(this.style.removeProperty(t),e.style(this,t));return a===u?null:a===r&&u===i?o:o=n(r=a,i=u)}}function O(t){return function(){this.style.removeProperty(t)}}function j(t,n,r){var i,o;return function(){var a=e.style(this,t);return a===r?null:a===i?o:o=n(i=a,r)}}function R(t,n,r){var i,o,a;return function(){var u=e.style(this,t),s=r(this);return null==s&&(this.style.removeProperty(t),s=e.style(this,t)),u===s?null:u===i&&s===o?a:a=n(i=u,o=s)}}function D(t,e,n){function r(){var r=this,i=e.apply(r,arguments);return i&&function(e){r.style.setProperty(t,i(e),n)}}return r._value=e,r}function L(t){return function(){this.textContent=t}}function P(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function z(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function B(t){return e.selection().transition(t)}function I(){return++tt}function q(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return nt.time=r.now(),nt;return n}var U=n.dispatch("start","end","interrupt"),F=[],H=0,Y=1,W=2,X=3,G=4,V=5,$=6,Q=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};c(t,n,{name:e,index:r,group:i,on:U,tween:F,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:H})},Z=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){e=null==e?null:e+"";for(i in o)(n=o[i]).name===e?(r=n.state>W&&n.state<V,n.state=$,n.timer.stop(),r&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}},K=function(t,e){var n;return("number"==typeof e?i.interpolateNumber:e instanceof o.color?i.interpolateRgb:(n=o.color(e))?(e=n,i.interpolateRgb):i.interpolateString)(t,e)},J=e.selection.prototype.constructor,tt=0,et=e.selection.prototype;z.prototype=B.prototype={constructor:z,select:function(t){var n=this._name,r=this._id;"function"!=typeof t&&(t=e.selector(t));for(var i=this._groups,o=i.length,a=new Array(o),u=0;u<o;++u)for(var s,c,l=i[u],h=l.length,d=a[u]=new Array(h),p=0;p<h;++p)(s=l[p])&&(c=t.call(s,s.__data__,p,l))&&("__data__"in s&&(c.__data__=s.__data__),d[p]=c,Q(d[p],n,r,p,d,f(s,r)));return new z(a,this._parents,n,r)},selectAll:function(t){var n=this._name,r=this._id;"function"!=typeof t&&(t=e.selectorAll(t));for(var i=this._groups,o=i.length,a=[],u=[],s=0;s<o;++s)for(var c,l=i[s],h=l.length,d=0;d<h;++d)if(c=l[d]){for(var p,m=t.call(c,c.__data__,d,l),g=f(c,r),y=0,v=m.length;y<v;++y)(p=m[y])&&Q(p,n,r,y,m,g);a.push(m),u.push(c)}return new z(a,u,n,r)},filter:function(t){"function"!=typeof t&&(t=e.matcher(t));for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o)for(var a,u=n[o],s=u.length,f=i[o]=[],c=0;c<s;++c)(a=u[c])&&t.call(a,a.__data__,c,u)&&f.push(a);return new z(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,f=e[u],c=n[u],l=f.length,h=a[u]=new Array(l),d=0;d<l;++d)(s=f[d]||c[d])&&(h[d]=s);for(;u<r;++u)a[u]=e[u];return new z(a,this._parents,this._name,this._id)},selection:function(){return new J(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=I(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,c=0;c<s;++c)if(a=u[c]){var l=f(a,e);Q(a,t,n,c,u,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new z(r,this._parents,t,n)},call:et.call,nodes:et.nodes,node:et.node,size:et.size,empty:et.empty,each:et.each,on:function(t,e){var n=this._id;return arguments.length<2?f(this.node(),n).on.on(t):this.each(T(n,t,e))},attr:function(t,n){var r=e.namespace(t),o="transform"===r?i.interpolateTransformSvg:K;return this.attrTween(t,"function"==typeof n?(r.local?b:v)(r,o,d(this,"attr."+t,n)):null==n?(r.local?m:p)(r):(r.local?y:g)(r,o,n+""))},attrTween:function(t,n){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;var i=e.namespace(t);return this.tween(r,(i.local?_:x)(i,n))},style:function(t,e,n){var r="transform"==(t+="")?i.interpolateTransformCss:K;return null==e?this.styleTween(t,N(t,r)).on("end.style."+t,O(t)):this.styleTween(t,"function"==typeof e?R(t,r,d(this,"style."+t,e)):j(t,r,e+""),n)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,D(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?P(d(this,"text",t)):L(null==t?"":t+""))},remove:function(){return this.on("end.remove",C(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=f(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?l:h)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?w:M)(e,t)):f(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?E:S)(e,t)):f(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(k(e,t)):f(this.node(),e).ease}};var nt={time:null,delay:0,duration:250,ease:a.easeCubicInOut};e.selection.prototype.interrupt=function(t){return this.each(function(){Z(this,t)})},e.selection.prototype.transition=function(t){var e,n;t instanceof z?(e=t._id,t=t._name):(e=I(),(n=nt).time=r.now(),t=null==t?null:t+"");for(var i=this._groups,o=i.length,a=0;a<o;++a)for(var u,s=i[a],f=s.length,c=0;c<f;++c)(u=s[c])&&Q(u,t,e,c,s,n||q(u,e));return new z(i,this._parents,t,e)};var rt=[null];t.transition=B,t.active=function(t,e){var n,r,i=t.__transition;if(i){e=null==e?null:e+"";for(r in i)if((n=i[r]).state>Y&&n.name===e)return new z([[t]],rt,e,+r)}return null},t.interrupt=Z,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-color":12,"d3-dispatch":13,"d3-ease":16,"d3-interpolate":21,"d3-selection":29,"d3-timer":33}],35:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return t[0]}function n(t){return t[1]}function r(){this._=null}function i(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function o(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function a(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function u(t){for(;t.L;)t=t.L;return t}function s(t,e,n,r){var i=[null,null],o=B.push(i)-1;return i.left=t,i.right=e,n&&c(i,t,e,n),r&&c(i,e,t,r),P[t.index].halfedges.push(o),P[e.index].halfedges.push(o),i}function f(t,e,n){var r=[e,n];return r.left=t,r}function c(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function l(t,e,n,r,i){var o,a=t[0],u=t[1],s=a[0],f=a[1],c=0,l=1,h=u[0]-s,d=u[1]-f;if(o=e-s,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<l&&(l=o)}else if(h>0){if(o>l)return;o>c&&(c=o)}if(o=r-s,h||!(o<0)){if(o/=h,h<0){if(o>l)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<l&&(l=o)}if(o=n-f,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<l&&(l=o)}else if(d>0){if(o>l)return;o>c&&(c=o)}if(o=i-f,d||!(o<0)){if(o/=d,d<0){if(o>l)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<l&&(l=o)}return!(c>0||l<1)||(c>0&&(t[0]=[s+c*h,f+c*d]),l<1&&(t[1]=[s+l*h,f+l*d]),!0)}}}}}function h(t,e,n,r,i){var o=t[1];if(o)return!0;var a,u,s=t[0],f=t.left,c=t.right,l=f[0],h=f[1],d=c[0],p=c[1],m=(l+d)/2,g=(h+p)/2;if(p===h){if(m<e||m>=r)return;if(l>d){if(s){if(s[1]>=i)return}else s=[m,n];o=[m,i]}else{if(s){if(s[1]<n)return}else s=[m,i];o=[m,n]}}else if(a=(l-d)/(p-h),u=g-a*m,a<-1||a>1)if(l>d){if(s){if(s[1]>=i)return}else s=[(n-u)/a,n];o=[(i-u)/a,i]}else{if(s){if(s[1]<n)return}else s=[(i-u)/a,i];o=[(n-u)/a,n]}else if(h<p){if(s){if(s[0]>=r)return}else s=[e,a*e+u];o=[r,a*r+u]}else{if(s){if(s[0]<e)return}else s=[r,a*r+u];o=[e,a*e+u]}return t[0]=s,t[1]=o,!0}function d(t,e,n,r){for(var i,o=B.length;o--;)h(i=B[o],t,e,n,r)&&l(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>U||Math.abs(i[0][1]-i[1][1])>U)||delete B[o]}function p(t){return P[t.index]={site:t,halfedges:[]}}function m(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function g(t,e){return e[+(e.left!==t.site)]}function y(t,e){return e[+(e.left===t.site)]}function v(){for(var t,e,n,r,i=0,o=P.length;i<o;++i)if((t=P[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),u=new Array(r);for(n=0;n<r;++n)a[n]=n,u[n]=m(t,B[e[n]]);for(a.sort(function(t,e){return u[e]-u[t]}),n=0;n<r;++n)u[n]=e[a[n]];for(n=0;n<r;++n)e[n]=u[n]}}function b(t,e,n,r){var i,o,a,u,s,c,l,h,d,p,m,v,b=P.length,_=!0;for(i=0;i<b;++i)if(o=P[i]){for(a=o.site,u=(s=o.halfedges).length;u--;)B[s[u]]||s.splice(u,1);for(u=0,c=s.length;u<c;)m=(p=y(o,B[s[u]]))[0],v=p[1],h=(l=g(o,B[s[++u%c]]))[0],d=l[1],(Math.abs(m-h)>U||Math.abs(v-d)>U)&&(s.splice(u,0,B.push(f(a,p,Math.abs(m-t)<U&&r-v>U?[t,Math.abs(h-t)<U?d:r]:Math.abs(v-r)<U&&n-m>U?[Math.abs(d-r)<U?h:n,r]:Math.abs(m-n)<U&&v-e>U?[n,Math.abs(h-n)<U?d:e]:Math.abs(v-e)<U&&m-t>U?[Math.abs(d-e)<U?h:t,e]:null))-1),++c);c&&(_=!1)}if(_){var x,w,M,E=1/0;for(i=0,_=null;i<b;++i)(o=P[i])&&(M=(x=(a=o.site)[0]-t)*x+(w=a[1]-e)*w)<E&&(E=M,_=o);if(_){var S=[t,e],k=[t,r],A=[n,r],T=[n,e];_.halfedges.push(B.push(f(a=_.site,S,k))-1,B.push(f(a,k,A))-1,B.push(f(a,A,T))-1,B.push(f(a,T,S))-1)}}for(i=0;i<b;++i)(o=P[i])&&(o.halfedges.length||delete P[i])}function _(){i(this),this.x=this.y=this.arc=this.site=this.cy=null}function x(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],u=i[1],s=r[0]-a,f=r[1]-u,c=o[0]-a,l=o[1]-u,h=2*(s*l-f*c);if(!(h>=-F)){var d=s*s+f*f,p=c*c+l*l,m=(l*d-f*p)/h,g=(s*p-c*d)/h,y=I.pop()||new _;y.arc=t,y.site=i,y.x=m+a,y.y=(y.cy=g+u)+Math.sqrt(m*m+g*g),t.circle=y;for(var v=null,b=z._;b;)if(y.y<b.y||y.y===b.y&&y.x<=b.x){if(!b.L){v=b.P;break}b=b.L}else{if(!b.R){v=b;break}b=b.R}z.insert(v,y),v||(D=y)}}}}function w(t){var e=t.circle;e&&(e.P||(D=e.N),z.remove(e),I.push(e),i(e),t.circle=null)}function M(){i(this),this.edge=this.site=this.circle=null}function E(t){var e=q.pop()||new M;return e.site=t,e}function S(t){w(t),L.remove(t),q.push(t),i(t)}function k(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,u=[t];S(t);for(var f=o;f.circle&&Math.abs(n-f.circle.x)<U&&Math.abs(r-f.circle.cy)<U;)o=f.P,u.unshift(f),S(f),f=o;u.unshift(f),w(f);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<U&&Math.abs(r-l.circle.cy)<U;)a=l.N,u.push(l),S(l),l=a;u.push(l),w(l);var h,d=u.length;for(h=1;h<d;++h)l=u[h],f=u[h-1],c(l.edge,f.site,l.site,i);f=u[0],(l=u[d-1]).edge=s(f.site,l.site,null,i),x(f),x(l)}function A(t){for(var e,n,r,i,o=t[0],a=t[1],u=L._;u;)if((r=T(u,a)-o)>U)u=u.L;else{if(!((i=o-C(u,a))>U)){r>-U?(e=u.P,n=u):i>-U?(e=u,n=u.N):e=n=u;break}if(!u.R){e=u;break}u=u.R}p(t);var f=E(t);if(L.insert(e,f),e||n){if(e===n)return w(e),n=E(e.site),L.insert(f,n),f.edge=n.edge=s(e.site,f.site),x(e),void x(n);if(n){w(e),w(n);var l=e.site,h=l[0],d=l[1],m=t[0]-h,g=t[1]-d,y=n.site,v=y[0]-h,b=y[1]-d,_=2*(m*b-g*v),M=m*m+g*g,S=v*v+b*b,k=[(b*M-g*S)/_+h,(m*S-v*M)/_+d];c(n.edge,l,y,k),f.edge=s(l,t,null,k),n.edge=s(t,y,null,k),x(e),x(n)}else f.edge=s(e.site,f.site)}}function T(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var u=(n=a.site)[0],s=n[1],f=s-e;if(!f)return u;var c=u-r,l=1/o-1/f,h=c/f;return l?(-h+Math.sqrt(h*h-2*l*(c*c/(-2*f)-s+f/2+i-o/2)))/l+r:(r+u)/2}function C(t,e){var n=t.N;if(n)return T(n,e);var r=t.site;return r[1]===e?r[0]:1/0}function N(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function O(t,e){return e[1]-t[1]||e[0]-t[0]}function j(t,e){var n,i,o,a=t.sort(O).pop();for(B=[],P=new Array(t.length),L=new r,z=new r;;)if(o=D,a&&(!o||a[1]<o.y||a[1]===o.y&&a[0]<o.x))a[0]===n&&a[1]===i||(A(a),n=a[0],i=a[1]),a=t.pop();else{if(!o)break;k(o.arc)}if(v(),e){var u=+e[0][0],s=+e[0][1],f=+e[1][0],c=+e[1][1];d(u,s,f,c),b(u,s,f,c)}this.edges=B,this.cells=P,L=z=B=P=null}var R=function(t){return function(){return t}};r.prototype={constructor:r,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=u(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(o(this,n),n=(t=n).U),n.C=!1,r.C=!0,a(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(a(this,n),n=(t=n).U),n.C=!1,r.C=!0,o(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,s=t.L,f=t.R;if(n=s?f?u(f):s:f,i?i.L===t?i.L=n:i.R=n:this._=n,s&&f?(r=n.C,n.C=t.C,n.L=s,s.U=n,n!==f?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=f,f.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,o(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,a(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,o(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,a(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,o(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,a(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var D,L,P,z,B,I=[],q=[],U=1e-6,F=1e-12;j.prototype={constructor:j,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return g(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,u=n.site,s=-1,f=e[i[o-1]],c=f.left===u?f.right:f.left;++s<o;)a=c,c=(f=e[i[s]]).left===u?f.right:f.left,a&&c&&r<a.index&&r<c.index&&N(u,a,c)<0&&t.push([u.data,a.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,u=o.cells.length;!(i=o.cells[a]);)if(++a>=u)return null;var s=t-i.site[0],f=e-i.site[1],c=s*s+f*f;do{i=o.cells[r=a],a=null,i.halfedges.forEach(function(n){var r=o.edges[n],u=r.left;if(u!==i.site&&u||(u=r.right)){var s=t-u[0],f=e-u[1],l=s*s+f*f;l<c&&(c=l,a=u.index)}})}while(null!==a);return o._found=r,null==n||c<=n*n?i.site:null}};t.voronoi=function(){function t(t){return new j(t.map(function(e,n){var o=[Math.round(r(e,n,t)/U)*U,Math.round(i(e,n,t)/U)*U];return o.index=n,o.data=e,o}),o)}var r=e,i=n,o=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(e){return arguments.length?(r="function"==typeof e?e:R(+e),t):r},t.y=function(e){return arguments.length?(i="function"==typeof e?e:R(+e),t):i},t.extent=function(e){return arguments.length?(o=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):o&&[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},t.size=function(e){return arguments.length?(o=null==e?null:[[0,0],[+e[0],+e[1]]],t):o&&[o[1][0]-o[0][0],o[1][1]-o[0][1]]},t},Object.defineProperty(t,"__esModule",{value:!0})})},{}],36:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-dispatch"),t("d3-drag"),t("d3-interpolate"),t("d3-selection"),t("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-drag","d3-interpolate","d3-selection","d3-transition"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3)}(this,function(t,e,n,r,i,o){"use strict";function a(t,e,n){this.target=t,this.type=e,this.transform=n}function u(t,e,n){this.k=t,this.x=e,this.y=n}function s(t){return t.__zoom||g}function f(){i.event.stopImmediatePropagation()}function c(){return!i.event.button}function l(){var t,e,n=this;return n instanceof SVGElement?(t=(n=n.ownerSVGElement||n).width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function h(){return this.__zoom||g}function d(){return-i.event.deltaY*(i.event.deltaMode?120:1)/500}function p(){return"ontouchstart"in this}var m=function(t){return function(){return t}};u.prototype={constructor:u,scale:function(t){return 1===t?this:new u(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new u(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var g=new u(1,0,0);s.prototype=u.prototype;var y=function(){i.event.preventDefault(),i.event.stopImmediatePropagation()};t.zoom=function(){function t(t){t.property("__zoom",h).on("wheel.zoom",E).on("mousedown.zoom",S).on("dblclick.zoom",k).filter(L).on("touchstart.zoom",A).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function s(t,e){return(e=Math.max(P,Math.min(z,e)))===t.k?t:new u(e,t.x,t.y)}function v(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new u(t.k,r,i)}function b(t,e){var n=t.invertX(e[0][0])-B,r=t.invertX(e[1][0])-I,i=t.invertY(e[0][1])-q,o=t.invertY(e[1][1])-U;return t.translate(r>n?(n+r)/2:Math.min(0,n)||Math.max(0,r),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function _(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function x(t,e,n){t.on("start.zoom",function(){w(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).end()}).tween("zoom",function(){var t=this,r=arguments,i=w(t,r),o=R.apply(t,r),a=n||_(o),s=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),f=t.__zoom,c="function"==typeof e?e.apply(t,r):e,l=H(f.invert(a).concat(s/f.k),c.invert(a).concat(s/c.k));return function(t){if(1===t)t=c;else{var e=l(t),n=s/e[2];t=new u(n,a[0]-e[0]*n,a[1]-e[1]*n)}i.zoom(null,t)}})}function w(t,e){for(var n,r=0,i=Y.length;r<i;++r)if((n=Y[r]).that===t)return n;return new M(t,e)}function M(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=R.apply(t,e)}function E(){if(j.apply(this,arguments)){var t=w(this,arguments),e=this.__zoom,n=Math.max(P,Math.min(z,e.k*Math.pow(2,D.apply(this,arguments)))),r=i.mouse(this);if(t.wheel)t.mouse[0][0]===r[0]&&t.mouse[0][1]===r[1]||(t.mouse[1]=e.invert(t.mouse[0]=r)),clearTimeout(t.wheel);else{if(e.k===n)return;t.mouse=[r,e.invert(r)],o.interrupt(this),t.start()}y(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},G),t.zoom("mouse",b(v(s(e,n),t.mouse[0],t.mouse[1]),t.extent))}}function S(){if(!O&&j.apply(this,arguments)){var t=w(this,arguments),e=i.select(i.event.view).on("mousemove.zoom",function(){if(y(),!t.moved){var e=i.event.clientX-a,n=i.event.clientY-u;t.moved=e*e+n*n>V}t.zoom("mouse",b(v(t.that.__zoom,t.mouse[0]=i.mouse(t.that),t.mouse[1]),t.extent))},!0).on("mouseup.zoom",function(){e.on("mousemove.zoom mouseup.zoom",null),n.dragEnable(i.event.view,t.moved),y(),t.end()},!0),r=i.mouse(this),a=i.event.clientX,u=i.event.clientY;n.dragDisable(i.event.view),f(),t.mouse=[r,this.__zoom.invert(r)],o.interrupt(this),t.start()}}function k(){if(j.apply(this,arguments)){var e=this.__zoom,n=i.mouse(this),r=e.invert(n),o=b(v(s(e,e.k*(i.event.shiftKey?.5:2)),n,r),R.apply(this,arguments));y(),F>0?i.select(this).transition().duration(F).call(x,o,n):i.select(this).call(t.transform,o)}}function A(){if(j.apply(this,arguments)){var t,e,n,r,a=w(this,arguments),u=i.event.changedTouches,s=u.length;for(f(),e=0;e<s;++e)n=u[e],r=[r=i.touch(this,u,n.identifier),this.__zoom.invert(r),n.identifier],a.touch0?a.touch1||(a.touch1=r):(a.touch0=r,t=!0);if(N&&(N=clearTimeout(N),!a.touch1))return a.end(),void((r=i.select(this).on("dblclick.zoom"))&&r.apply(this,arguments));t&&(N=setTimeout(function(){N=null},X),o.interrupt(this),a.start())}}function T(){var t,e,n,r,o=w(this,arguments),a=i.event.changedTouches,u=a.length;for(y(),N&&(N=clearTimeout(N)),t=0;t<u;++t)e=a[t],n=i.touch(this,a,e.identifier),o.touch0&&o.touch0[2]===e.identifier?o.touch0[0]=n:o.touch1&&o.touch1[2]===e.identifier&&(o.touch1[0]=n);if(e=o.that.__zoom,o.touch1){var f=o.touch0[0],c=o.touch0[1],l=o.touch1[0],h=o.touch1[1],d=(d=l[0]-f[0])*d+(d=l[1]-f[1])*d,p=(p=h[0]-c[0])*p+(p=h[1]-c[1])*p;e=s(e,Math.sqrt(d/p)),n=[(f[0]+l[0])/2,(f[1]+l[1])/2],r=[(c[0]+h[0])/2,(c[1]+h[1])/2]}else{if(!o.touch0)return;n=o.touch0[0],r=o.touch0[1]}o.zoom("touch",b(v(e,n,r),o.extent))}function C(){var t,e,n=w(this,arguments),r=i.event.changedTouches,o=r.length;for(f(),O&&clearTimeout(O),O=setTimeout(function(){O=null},X),t=0;t<o;++t)e=r[t],n.touch0&&n.touch0[2]===e.identifier?delete n.touch0:n.touch1&&n.touch1[2]===e.identifier&&delete n.touch1;n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0?n.touch0[1]=this.__zoom.invert(n.touch0[0]):n.end()}var N,O,j=c,R=l,D=d,L=p,P=0,z=1/0,B=-z,I=z,q=B,U=I,F=250,H=r.interpolateZoom,Y=[],W=e.dispatch("start","zoom","end"),X=500,G=150,V=0;return t.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",h),t!==n?x(t,e):n.interrupt().each(function(){w(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},t.scaleBy=function(e,n){t.scaleTo(e,function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)})},t.scaleTo=function(e,n){t.transform(e,function(){var t=R.apply(this,arguments),e=this.__zoom,r=_(t),i=e.invert(r);return b(v(s(e,"function"==typeof n?n.apply(this,arguments):n),r,i),t)})},t.translateBy=function(e,n,r){t.transform(e,function(){return b(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof r?r.apply(this,arguments):r),R.apply(this,arguments))})},t.translateTo=function(e,n,r){t.transform(e,function(){var t=R.apply(this,arguments),e=this.__zoom,i=_(t);return b(g.translate(i[0],i[1]).scale(e.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof r?-r.apply(this,arguments):-r),t)})},M.prototype={start:function(){return 1==++this.active&&(this.index=Y.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(Y.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(e){i.customEvent(new a(t,e,this.that.__zoom),W.apply,W,[e,this.that,this.args])}},t.wheelDelta=function(e){return arguments.length?(D="function"==typeof e?e:m(+e),t):D},t.filter=function(e){return arguments.length?(j="function"==typeof e?e:m(!!e),t):j},t.touchable=function(e){return arguments.length?(L="function"==typeof e?e:m(!!e),t):L},t.extent=function(e){return arguments.length?(R="function"==typeof e?e:m([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),t):R},t.scaleExtent=function(e){return arguments.length?(P=+e[0],z=+e[1],t):[P,z]},t.translateExtent=function(e){return arguments.length?(B=+e[0][0],I=+e[1][0],q=+e[0][1],U=+e[1][1],t):[[B,q],[I,U]]},t.duration=function(e){return arguments.length?(F=+e,t):F},t.interpolate=function(e){return arguments.length?(H=e,t):H},t.on=function(){var e=W.on.apply(W,arguments);return e===W?t:e},t.clickDistance=function(e){return arguments.length?(V=(e=+e)*e,t):Math.sqrt(V)},t},t.zoomTransform=s,t.zoomIdentity=g,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-dispatch":13,"d3-drag":14,"d3-interpolate":21,"d3-selection":29,"d3-transition":34}],37:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("d3-array"),i=t("d3-axis"),o=t("d3-brush"),a=t("d3-chord"),u=t("d3-collection"),s=t("d3-color"),f=t("d3-dispatch"),c=t("d3-drag"),l=t("d3-dsv"),h=t("d3-ease"),d=t("d3-force"),p=t("d3-format"),m=t("d3-geo"),g=t("d3-hierarchy"),y=t("d3-interpolate"),v=t("d3-path"),b=t("d3-polygon"),_=t("d3-quadtree"),x=t("d3-queue"),w=t("d3-random"),M=t("d3-request"),E=t("d3-scale"),S=t("d3-selection"),k=t("d3-shape"),A=t("d3-time"),T=t("d3-time-format"),C=t("d3-timer"),N=t("d3-transition"),O=t("d3-voronoi"),j=t("d3-zoom");n.version="4.11.0",Object.keys(r).forEach(function(t){n[t]=r[t]}),Object.keys(i).forEach(function(t){n[t]=i[t]}),Object.keys(o).forEach(function(t){n[t]=o[t]}),Object.keys(a).forEach(function(t){n[t]=a[t]}),Object.keys(u).forEach(function(t){n[t]=u[t]}),Object.keys(s).forEach(function(t){n[t]=s[t]}),Object.keys(f).forEach(function(t){n[t]=f[t]}),Object.keys(c).forEach(function(t){n[t]=c[t]}),Object.keys(l).forEach(function(t){n[t]=l[t]}),Object.keys(h).forEach(function(t){n[t]=h[t]}),Object.keys(d).forEach(function(t){n[t]=d[t]}),Object.keys(p).forEach(function(t){n[t]=p[t]}),Object.keys(m).forEach(function(t){n[t]=m[t]}),Object.keys(g).forEach(function(t){n[t]=g[t]}),Object.keys(y).forEach(function(t){n[t]=y[t]}),Object.keys(v).forEach(function(t){n[t]=v[t]}),Object.keys(b).forEach(function(t){n[t]=b[t]}),Object.keys(_).forEach(function(t){n[t]=_[t]}),Object.keys(x).forEach(function(t){n[t]=x[t]}),Object.keys(w).forEach(function(t){n[t]=w[t]}),Object.keys(M).forEach(function(t){n[t]=M[t]}),Object.keys(E).forEach(function(t){n[t]=E[t]}),Object.keys(S).forEach(function(t){n[t]=S[t]}),Object.keys(k).forEach(function(t){n[t]=k[t]}),Object.keys(A).forEach(function(t){n[t]=A[t]}),Object.keys(T).forEach(function(t){n[t]=T[t]}),Object.keys(C).forEach(function(t){n[t]=C[t]}),Object.keys(N).forEach(function(t){n[t]=N[t]}),Object.keys(O).forEach(function(t){n[t]=O[t]}),Object.keys(j).forEach(function(t){n[t]=j[t]}),Object.defineProperty(n,"event",{get:function(){return S.event}})},{"d3-array":7,"d3-axis":8,"d3-brush":9,"d3-chord":10,"d3-collection":11,"d3-color":12,"d3-dispatch":13,"d3-drag":14,"d3-dsv":15,"d3-ease":16,"d3-force":17,"d3-format":18,"d3-geo":19,"d3-hierarchy":20,"d3-interpolate":21,"d3-path":22,"d3-polygon":23,"d3-quadtree":24,"d3-queue":25,"d3-random":26,"d3-request":27,"d3-scale":28,"d3-selection":29,"d3-shape":30,"d3-time":32,"d3-time-format":31,"d3-timer":33,"d3-transition":34,"d3-voronoi":35,"d3-zoom":36}],38:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function u(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,o,s,f;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(n=this._events[t],u(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(a(n))for(o=Array.prototype.slice.call(arguments,1),r=(f=n.slice()).length,s=0;s<r;s++)f[s].apply(this,o);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,u;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(n)){for(u=o;u-- >0;)if(n[u]===e||n[u].listener&&n[u].listener===e){r=u;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],39:[function(t,e,n){function r(t){if("string"==typeof t&&(t=o.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}var i=t("http"),o=t("url"),a=e.exports;for(var u in i)i.hasOwnProperty(u)&&(a[u]=i[u]);a.request=function(t,e){return t=r(t),i.request.call(this,t,e)},a.get=function(t,e){return t=r(t),i.get.call(this,t,e)}},{http:61,url:67}],40:[function(t,e,n){n.read=function(t,e,n,r,i){var o,a,u=8*i-r-1,s=(1<<u)-1,f=s>>1,c=-7,l=n?i-1:0,h=n?-1:1,d=t[e+l];for(l+=h,o=d&(1<<-c)-1,d>>=-c,c+=u;c>0;o=256*o+t[e+l],l+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+l],l+=h,c-=8);if(0===o)o=1-f;else{if(o===s)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=f}return(d?-1:1)*a*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var a,u,s,f=8*o-i-1,c=(1<<f)-1,l=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),(e+=a+l>=1?h/s:h*Math.pow(2,1-l))*s>=2&&(a++,s/=2),a+l>=c?(u=0,a=c):a+l>=1?(u=(e*s-1)*Math.pow(2,i),a+=l):(u=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&u,d+=p,u/=256,i-=8);for(a=a<<i|u,f+=i;f>0;t[n+d]=255&a,d+=p,a/=256,f-=8);t[n+d-p]|=128*m}},{}],41:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],42:[function(t,e,n){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function i(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}e.exports=function(t){return null!=t&&(r(t)||i(t)||!!t._isBuffer)}},{}],43:[function(t,e,n){var r={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},{}],44:[function(t,e,n){(function(t){"use strict";!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,u=arguments.length;switch(u){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(o=new Array(u-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick(function(){e.apply(null,o)})}}:e.exports=t.nextTick}).call(this,t("_process"))},{_process:45}],45:[function(t,e,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(l===setTimeout)return setTimeout(t,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function a(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function u(){g&&p&&(g=!1,p.length?m=p.concat(m):y=-1,m.length&&s())}function s(){if(!g){var t=o(u);g=!0;for(var e=m.length;e;){for(p=m,m=[];++y<e;)p&&p[y].run();y=-1,e=m.length}p=null,g=!1,a(t)}}function f(t,e){this.fun=t,this.array=e}function c(){}var l,h,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(t){l=r}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var p,m=[],g=!1,y=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];m.push(new f(t,e)),1!==m.length||g||o(s)},f.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],46:[function(t,e,n){(function(t){!function(r){function i(t){throw new RangeError(O[t])}function o(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function a(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+o((t=t.replace(N,".")).split("."),e).join(".")}function u(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function s(t){return o(t,function(t){var e="";return t>65535&&(e+=D((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=D(t)}).join("")}function f(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:_}function c(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function l(t,e,n){var r=0;for(t=n?R(t/E):t>>1,t+=R(t/e);t>j*w>>1;r+=_)t=R(t/j);return R(r+(j+1)*t/(t+M))}function h(t){var e,n,r,o,a,u,c,h,d,p,m=[],g=t.length,y=0,v=k,M=S;for((n=t.lastIndexOf(A))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&i("not-basic"),m.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<g;){for(a=y,u=1,c=_;o>=g&&i("invalid-input"),((h=f(t.charCodeAt(o++)))>=_||h>R((b-y)/u))&&i("overflow"),y+=h*u,d=c<=M?x:c>=M+w?w:c-M,!(h<d);c+=_)u>R(b/(p=_-d))&&i("overflow"),u*=p;M=l(y-a,e=m.length+1,0==a),R(y/e)>b-v&&i("overflow"),v+=R(y/e),y%=e,m.splice(y++,0,v)}return s(m)}function d(t){var e,n,r,o,a,s,f,h,d,p,m,g,y,v,M,E=[];for(g=(t=u(t)).length,e=k,n=0,a=S,s=0;s<g;++s)(m=t[s])<128&&E.push(D(m));for(r=o=E.length,o&&E.push(A);r<g;){for(f=b,s=0;s<g;++s)(m=t[s])>=e&&m<f&&(f=m);for(f-e>R((b-n)/(y=r+1))&&i("overflow"),n+=(f-e)*y,e=f,s=0;s<g;++s)if((m=t[s])<e&&++n>b&&i("overflow"),m==e){for(h=n,d=_;p=d<=a?x:d>=a+w?w:d-a,!(h<p);d+=_)M=h-p,v=_-p,E.push(D(c(p+M%v,0))),h=R(M/v);E.push(D(c(h,0))),a=l(n,y,r==o),n=0,++r}++n,++e}return E.join("")}var p="object"==typeof n&&n&&!n.nodeType&&n,m="object"==typeof e&&e&&!e.nodeType&&e,g="object"==typeof t&&t;g.global!==g&&g.window!==g&&g.self!==g||(r=g);var y,v,b=2147483647,_=36,x=1,w=26,M=38,E=700,S=72,k=128,A="-",T=/^xn--/,C=/[^\x20-\x7E]/,N=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},j=_-x,R=Math.floor,D=String.fromCharCode;if(y={version:"1.4.1",ucs2:{decode:u,encode:s},decode:h,encode:d,toASCII:function(t){return a(t,function(t){return C.test(t)?"xn--"+d(t):t})},toUnicode:function(t){return a(t,function(t){return T.test(t)?h(t.slice(4).toLowerCase()):t})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return y});else if(p&&m)if(e.exports==p)m.exports=y;else for(v in y)y.hasOwnProperty(v)&&(p[v]=y[v]);else r.punycode=y}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],47:[function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var u=/\+/g;t=t.split(e);var s=1e3;o&&"number"==typeof o.maxKeys&&(s=o.maxKeys);var f=t.length;s>0&&f>s&&(f=s);for(var c=0;c<f;++c){var l,h,d,p,m=t[c].replace(u,"%20"),g=m.indexOf(n);g>=0?(l=m.substr(0,g),h=m.substr(g+1)):(l=m,h=""),d=decodeURIComponent(l),p=decodeURIComponent(h),r(a,d)?i(a[d])?a[d].push(p):a[d]=[a[d],p]:a[d]=p}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],48:[function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,n,u){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?r(a(t),function(a){var u=encodeURIComponent(i(a))+n;return o(t[a])?r(t[a],function(t){return u+encodeURIComponent(i(t))}).join(e):u+encodeURIComponent(i(t[a]))}).join(e):u?encodeURIComponent(i(u))+n+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],49:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":47,"./encode":48}],50:[function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);f.call(this,t),c.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(t){t.end()}var a=t("process-nextick-args"),u=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};e.exports=r;var s=t("core-util-is");s.inherits=t("inherits");var f=t("./_stream_readable"),c=t("./_stream_writable");s.inherits(r,f);for(var l=u(c.prototype),h=0;h<l.length;h++){var d=l[h];r.prototype[d]||(r.prototype[d]=c.prototype[d])}Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),r.prototype._destroy=function(t,e){this.push(null),this.end(),a(e,t)}},{"./_stream_readable":52,"./_stream_writable":54,"core-util-is":6,inherits:41,"process-nextick-args":44}],51:[function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);i.call(this,t)}e.exports=r;var i=t("./_stream_transform"),o=t("core-util-is");o.inherits=t("inherits"),o.inherits(r,i),r.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":53,"core-util-is":6,inherits:41}],52:[function(t,e,n){(function(n,r){"use strict";function i(t){return z.from(t)}function o(t){return z.isBuffer(t)||t instanceof B}function a(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?D(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}function u(e,n){R=R||t("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,n instanceof R&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new H,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(F||(F=t("string_decoder/").StringDecoder),this.decoder=new F(e.encoding),this.encoding=e.encoding)}function s(e){if(R=R||t("./_stream_duplex"),!(this instanceof s))return new s(e);this._readableState=new u(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),P.call(this)}function f(t,e,n,r,o){var a=t._readableState;if(null===e)a.reading=!1,m(t,a);else{var u;o||(u=l(a,e)),u?t.emit("error",u):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===z.prototype||(e=i(e)),r?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):c(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?c(t,a,e,!1):v(t,a)):c(t,a,e,!1))):r||(a.reading=!1)}return h(a)}function c(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&g(t)),v(t,e)}function l(t,e){var n;return o(e)||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function h(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function d(t){return t>=X?t=X:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function p(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=d(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function m(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,g(t)}}function g(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(U("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?j(y,t):y(t))}function y(t){U("emit readable"),t.emit("readable"),E(t)}function v(t,e){e.readingMore||(e.readingMore=!0,j(b,t,e))}function b(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(U("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function _(t){return function(){var e=t._readableState;U("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&L(t,"data")&&(e.flowing=!0,E(t))}}function x(t){U("readable nexttick read 0"),t.read(0)}function w(t,e){e.resumeScheduled||(e.resumeScheduled=!0,j(M,t,e))}function M(t,e){e.reading||(U("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),E(t),e.flowing&&!e.reading&&t.read(0)}function E(t){var e=t._readableState;for(U("flow",e.flowing);e.flowing&&null!==t.read(););}function S(t,e){if(0===e.length)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=k(t,e.buffer,e.decoder),n}function k(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?A(t,e):T(t,e),r}function A(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0===(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}function T(t,e){var n=z.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0===(t-=a)){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}function C(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,j(N,e,t))}function N(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function O(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}var j=t("process-nextick-args");e.exports=s;var R,D=t("isarray");s.ReadableState=u;t("events").EventEmitter;var L=function(t,e){return t.listeners(e).length},P=t("./internal/streams/stream"),z=t("safe-buffer").Buffer,B=r.Uint8Array||function(){},I=t("core-util-is");I.inherits=t("inherits");var q=t("util"),U=void 0;U=q&&q.debuglog?q.debuglog("stream"):function(){};var F,H=t("./internal/streams/BufferList"),Y=t("./internal/streams/destroy");I.inherits(s,P);var W=["error","close","destroy","pause","resume"];Object.defineProperty(s.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),s.prototype.destroy=Y.destroy,s.prototype._undestroy=Y.undestroy,s.prototype._destroy=function(t,e){this.push(null),e(t)},s.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=z.from(t,e),e=""),n=!0),f(this,t,e,!1,n)},s.prototype.unshift=function(t){return f(this,t,null,!0,!1)},s.prototype.isPaused=function(){return!1===this._readableState.flowing},s.prototype.setEncoding=function(e){return F||(F=t("string_decoder/").StringDecoder),this._readableState.decoder=new F(e),this._readableState.encoding=e,this};var X=8388608;s.prototype.read=function(t){U("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return U("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?C(this):g(this),null;if(0===(t=p(t,e))&&e.ended)return 0===e.length&&C(this),null;var r=e.needReadable;U("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&U("length less than watermark",r=!0),e.ended||e.reading?U("reading or ended",r=!1):r&&(U("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=p(n,e)));var i;return null===(i=t>0?S(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&C(this)),null!==i&&this.emit("data",i),i},s.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},s.prototype.pipe=function(t,e){function r(t,e){U("onunpipe"),t===h&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,o())}function i(){U("onend"),t.end()}function o(){U("cleanup"),t.removeListener("close",f),t.removeListener("finish",c),t.removeListener("drain",m),t.removeListener("error",s),t.removeListener("unpipe",r),h.removeListener("end",i),h.removeListener("end",l),h.removeListener("data",u),g=!0,!d.awaitDrain||t._writableState&&!t._writableState.needDrain||m()}function u(e){U("ondata"),y=!1,!1!==t.write(e)||y||((1===d.pipesCount&&d.pipes===t||d.pipesCount>1&&-1!==O(d.pipes,t))&&!g&&(U("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,y=!0),h.pause())}function s(e){U("onerror",e),l(),t.removeListener("error",s),0===L(t,"error")&&t.emit("error",e)}function f(){t.removeListener("finish",c),l()}function c(){U("onfinish"),t.removeListener("close",f),l()}function l(){U("unpipe"),h.unpipe(t)}var h=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=t;break;case 1:d.pipes=[d.pipes,t];break;default:d.pipes.push(t)}d.pipesCount+=1,U("pipe count=%d opts=%j",d.pipesCount,e);var p=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?i:l;d.endEmitted?j(p):h.once("end",p),t.on("unpipe",r);var m=_(h);t.on("drain",m);var g=!1,y=!1;return h.on("data",u),a(t,"error",s),t.once("close",f),t.once("finish",c),t.emit("pipe",h),d.flowing||(U("pipe resume"),h.resume()),t},s.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=O(e.pipes,t);return-1===a?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},s.prototype.on=function(t,e){var n=P.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&g(this):j(x,this))}return n},s.prototype.addListener=s.prototype.on,s.prototype.resume=function(){var t=this._readableState;return t.flowing||(U("resume"),t.flowing=!0,w(this,t)),this},s.prototype.pause=function(){return U("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(U("pause"),this._readableState.flowing=!1,this.emit("pause")),this},s.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(U("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){U("wrapped data"),e.decoder&&(i=e.decoder.write(i)),(!e.objectMode||null!==i&&void 0!==i)&&(e.objectMode||i&&i.length)&&(r.push(i)||(n=!0,t.pause()))});for(var i in t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<W.length;o++)t.on(W[o],r.emit.bind(r,W[o]));return r._read=function(e){U("wrapped _read",e),n&&(n=!1,t.resume())},r},s._fromList=S}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":50,"./internal/streams/BufferList":55,"./internal/streams/destroy":56,"./internal/streams/stream":57,_process:45,"core-util-is":6,events:38,inherits:41,isarray:43,"process-nextick-args":44,"safe-buffer":60,"string_decoder/":65,util:2}],53:[function(t,e,n){"use strict";function r(t){this.afterTransform=function(e,n){return i(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&t.push(n),i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);u.call(this,t),this._transformState=new r(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t,n){a(e,t,n)}):a(e)})}function a(t,e,n){if(e)return t.emit("error",e);null!==n&&void 0!==n&&t.push(n);var r=t._writableState,i=t._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}e.exports=o;var u=t("./_stream_duplex"),s=t("core-util-is");s.inherits=t("inherits"),s.inherits(o,u),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;u.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},{"./_stream_duplex":50,"core-util-is":6,inherits:41}],54:[function(t,e,n){(function(n,r){"use strict";function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){k(e,t)}}function o(t){return R.from(t)}function a(t){return R.isBuffer(t)||t instanceof D}function u(){}function s(e,n){T=T||t("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,n instanceof T&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){y(n,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function f(e){if(T=T||t("./_stream_duplex"),!(P.call(f,this)||this instanceof T))return new f(e);this._writableState=new s(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),j.call(this)}function c(t,e){var n=new Error("write after end");t.emit("error",n),A(e,n)}function l(t,e,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),A(r,o),i=!1),i}function h(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=R.from(e,n)),e}function d(t,e,n,r,i,o){if(!n){var a=h(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var u=e.objectMode?1:r.length;e.length+=u;var s=e.length<e.highWaterMark;if(s||(e.needDrain=!0),e.writing||e.corked){var f=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},f?f.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else p(t,e,!1,u,r,i,o);return s}function p(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function m(t,e,n,r,i){--e.pendingcb,n?(A(i,r),A(E,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),E(t,e))}function g(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function y(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(g(n),e)m(t,n,r,e,i);else{var o=x(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||_(t,n),r?C(v,t,n,o,i):v(t,n,o,i)}}function v(t,e,n,r){n||b(t,e),e.pendingcb--,r(),E(t,e)}function b(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function _(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,o=new Array(r),a=e.corkedRequestsFree;a.entry=n;for(var u=0,s=!0;n;)o[u]=n,n.isBuf||(s=!1),n=n.next,u+=1;o.allBuffers=s,p(t,e,!0,e.length,o,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new i(e)}else{for(;n;){var f=n.chunk,c=n.encoding,l=n.callback;if(p(t,e,!1,e.objectMode?1:f.length,f,c,l),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function x(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function w(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),E(t,e)})}function M(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,A(w,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function E(t,e){var n=x(e);return n&&(M(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}function S(t,e,n){e.ending=!0,E(t,e),n&&(e.finished?A(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function k(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}var A=t("process-nextick-args");e.exports=f;var T,C=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:A;f.WritableState=s;var N=t("core-util-is");N.inherits=t("inherits");var O={deprecate:t("util-deprecate")},j=t("./internal/streams/stream"),R=t("safe-buffer").Buffer,D=r.Uint8Array||function(){},L=t("./internal/streams/destroy");N.inherits(f,j),s.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(s.prototype,"buffer",{get:O.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}();var P;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(P=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(t){return!!P.call(this,t)||t&&t._writableState instanceof s}})):P=function(t){return t instanceof this},f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},f.prototype.write=function(t,e,n){var r=this._writableState,i=!1,s=a(t)&&!r.objectMode;return s&&!R.isBuffer(t)&&(t=o(t)),"function"==typeof e&&(n=e,e=null),s?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=u),r.ended?c(this,n):(s||l(this,r,t,n))&&(r.pendingcb++,i=d(this,r,s,t,e,n)),i},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||_(this,t))},f.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},f.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},f.prototype._writev=null,f.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||S(this,r,n)},Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),f.prototype.destroy=L.destroy,f.prototype._undestroy=L.undestroy,f.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":50,"./internal/streams/destroy":56,"./internal/streams/stream":57,_process:45,"core-util-is":6,inherits:41,"process-nextick-args":44,"safe-buffer":60,"util-deprecate":69}],55:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n){t.copy(e,n)}var o=t("safe-buffer").Buffer;e.exports=function(){function t(){r(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var e=o.allocUnsafe(t>>>0),n=this.head,r=0;n;)i(n.data,e,r),r+=n.data.length,n=n.next;return e},t}()},{"safe-buffer":60}],56:[function(t,e,n){"use strict";function r(t,e){t.emit("error",e)}var i=t("process-nextick-args");e.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;o||a?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||i(r,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(i(r,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":44}],57:[function(t,e,n){e.exports=t("events").EventEmitter},{events:38}],58:[function(t,e,n){(n=e.exports=t("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":50,"./lib/_stream_passthrough.js":51,"./lib/_stream_readable.js":52,"./lib/_stream_transform.js":53,"./lib/_stream_writable.js":54}],59:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?e.exports=r():"function"==typeof define&&define.amd?define(r):t.createREGL=r()}(this,function(){"use strict";function t(t){return"undefined"!=typeof btoa?btoa(t):"base64:"+t}function e(t){var e=new Error("(regl) "+t);throw console.error(e),e}function n(t,n){t||e(n)}function r(t){return t?": "+t:""}function i(t,n,i){n.indexOf(t)<0&&e("invalid value"+r(i)+". must be one of: "+n)}function o(t,e){for(t+="";t.length<e;)t=" "+t;return t}function a(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function u(t,e){this.number=t,this.line=e,this.errors=[]}function s(t,e,n){this.file=t,this.line=e,this.message=n}function f(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return r?r[1]:"unknown"}function c(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return r?r[1]:"unknown"}function l(e,n){var r=e.split("\n"),i=1,o=0,s={unknown:new a,0:new a};s.unknown.name=s[0].name=n||f(),s.unknown.lines.push(new u(0,""));for(var c=0;c<r.length;++c){var l=r[c],h=/^\s*\#\s*(\w+)\s+(.+)\s*$/.exec(l);if(h)switch(h[1]){case"line":var d=/(\d+)(\s+\d+)?/.exec(h[2]);d&&(i=0|d[1],d[2]&&((o=0|d[2])in s||(s[o]=new a)));break;case"define":var p=/SHADER_NAME(_B64)?\s+(.*)$/.exec(h[2]);p&&(s[o].name=p[1]?t(p[2]):p[2])}s[o].lines.push(new u(i++,l))}return Object.keys(s).forEach(function(t){var e=s[t];e.lines.forEach(function(t){e.index[t.number]=t})}),s}function h(t){var e=[];return t.split("\n").forEach(function(t){if(!(t.length<5)){var n=/^ERROR\:\s+(\d+)\:(\d+)\:\s*(.*)$/.exec(t);n?e.push(new s(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new s("unknown",0,t))}}),e}function d(t,e){e.forEach(function(e){var n=t[e.file];if(n){var r=n.index[e.line];if(r)return r.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)})}function p(t){t._commandRef=f()}function m(t,n){var r=c();e(t+" in command "+(n||f())+("unknown"===r?"":" called from "+r))}function g(t,e,n,i){typeof t!==e&&m("invalid parameter type"+r(n)+". expected "+e+", got "+typeof t,i||f())}function y(t,e){return t===Ut||t===qt||t===Ft?2:t===Ht?4:Yt[t]*e}function v(t){return!(t&t-1||!t)}function b(t,e){this.id=Xt++,this.type=t,this.data=e}function _(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function x(t){if(0===t.length)return[];var e=t.charAt(0),n=t.charAt(t.length-1);if(t.length>1&&e===n&&('"'===e||"'"===e))return['"'+_(t.substr(1,t.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(r)return x(t.substr(0,r.index)).concat(x(r[1])).concat(x(t.substr(r.index+r[0].length)));var i=t.split(".");if(1===i.length)return['"'+_(t)+'"'];for(var o=[],a=0;a<i.length;++a)o=o.concat(x(i[a]));return o}function w(t){return"["+x(t).join("][")+"]"}function M(){var t={"":0},e=[""];return{id:function(n){var r=t[n];return r||(r=t[n]=e.length,e.push(n),r)},str:function(t){return e[t]}}}function E(t,e,n){function r(){var e=window.innerWidth,r=window.innerHeight;if(t!==document.body){var o=t.getBoundingClientRect();e=o.right-o.left,r=o.bottom-o.top}i.width=n*e,i.height=n*r,Ot(i.style,{width:e+"px",height:r+"px"})}var i=document.createElement("canvas");return Ot(i.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(i),t===document.body&&(i.style.position="absolute",Ot(t.style,{margin:0,padding:0})),window.addEventListener("resize",r,!1),r(),{canvas:i,onDestroy:function(){window.removeEventListener("resize",r),t.removeChild(i)}}}function S(t,e){function n(n){try{return t.getContext(n,e)}catch(t){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function k(t){return"string"==typeof t.nodeName&&"function"==typeof t.appendChild&&"function"==typeof t.getBoundingClientRect}function A(t){return"function"==typeof t.drawArrays||"function"==typeof t.drawElements}function T(t){return"string"==typeof t?t.split():(Wt(Array.isArray(t),"invalid extension array"),t)}function C(t){return"string"==typeof t?(Wt("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function N(t){var e,n,r,i,o=t||{},a={},u=[],s=[],f="undefined"==typeof window?1:window.devicePixelRatio,c=!1,l=function(t){t&&Wt.raise(t)},h=function(){};if("string"==typeof o?(Wt("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),e=document.querySelector(o),Wt(e,"invalid query string for element")):"object"==typeof o?k(o)?e=o:A(o)?r=(i=o).canvas:(Wt.constructor(o),"gl"in o?i=o.gl:"canvas"in o?r=C(o.canvas):"container"in o&&(n=C(o.container)),"attributes"in o&&(a=o.attributes,Wt.type(a,"object","invalid context attributes")),"extensions"in o&&(u=T(o.extensions)),"optionalExtensions"in o&&(s=T(o.optionalExtensions)),"onDone"in o&&(Wt.type(o.onDone,"function","invalid or missing onDone callback"),l=o.onDone),"profile"in o&&(c=!!o.profile),"pixelRatio"in o&&Wt((f=+o.pixelRatio)>0,"invalid pixel ratio")):Wt.raise("invalid arguments to regl"),e&&("canvas"===e.nodeName.toLowerCase()?r=e:n=e),!i){if(!r){Wt("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var d=E(n||document.body,l,f);if(!d)return null;r=d.canvas,h=d.onDestroy}i=S(r,a)}return i?{gl:i,canvas:r,container:n,extensions:u,optionalExtensions:s,pixelRatio:f,profile:c,onDone:l,onDestroy:h}:(h(),l("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function O(t,e){function n(e){Wt.type(e,"string","extension name must be string");var n,i=e.toLowerCase();try{n=r[i]=t.getExtension(i)}catch(t){}return!!n}for(var r={},i=0;i<e.extensions.length;++i){var o=e.extensions[i];if(!n(o))return e.onDestroy(),e.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(n),{extensions:r,restore:function(){Object.keys(r).forEach(function(t){if(!n(t))throw new Error("(regl): error restoring extension "+t)})}}}function j(t){return!!t&&"object"==typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||Nt(t.data))}function R(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}function D(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}function L(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,(e|=n)|t>>1}function P(t){var e=D(t),n=ae[L(e)>>2];return n.length>0?n.pop():new ArrayBuffer(e)}function z(t){ae[L(t.byteLength)>>2].push(t)}function B(t,e,n){for(var r=0;r<e;++r)n[r]=t[r]}function I(t,e,n,r){for(var i=0,o=0;o<e;++o)for(var a=t[o],u=0;u<n;++u)r[i++]=a[u]}function q(t,e,n,r,i,o){for(var a=o,u=0;u<e;++u)for(var s=t[u],f=0;f<n;++f)for(var c=s[f],l=0;l<r;++l)i[a++]=c[l]}function U(t,e,n,r,i){for(var o=1,a=n+1;a<e.length;++a)o*=e[a];var u=e[n];if(e.length-n==4){var s=e[n+1],f=e[n+2],c=e[n+3];for(a=0;a<u;++a)q(t[a],s,f,c,r,i),i+=o}else for(a=0;a<u;++a)U(t[a],e,n+1,r,i),i+=o}function F(t){return 0|Ct[Object.prototype.toString.call(t)]}function H(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function Y(t,e,n,r,i,o,a){for(var u=0,s=0;s<n;++s)for(var f=0;f<r;++f)t[u++]=e[i*s+o*f+a]}function W(t,e,n){function r(e){this.id=u++,this.buffer=t.createBuffer(),this.type=e,this.usage=de,this.byteLength=0,this.dimension=1,this.dtype=me,this.persistentData=null,n.profile&&(this.stats={size:0})}function i(e,n,r){e.byteLength=n.byteLength,t.bufferData(e.type,n,r)}function o(t,e,n,r,o,a){var u;if(t.usage=n,Array.isArray(e)){if(t.dtype=r||ge,e.length>0){var s;if(Array.isArray(e[0])){u=he(e);for(var f=1,c=1;c<u.length;++c)f*=u[c];t.dimension=f,i(t,s=le(e,u,t.dtype),n),a?t.persistentData=s:ue.freeType(s)}else if("number"==typeof e[0]){t.dimension=o;var l=ue.allocType(t.dtype,e.length);H(l,e),i(t,l,n),a?t.persistentData=l:ue.freeType(l)}else Nt(e[0])?(t.dimension=e[0].length,t.dtype=r||F(e[0])||ge,i(t,s=le(e,[e.length,e[0].length],t.dtype),n),a?t.persistentData=s:ue.freeType(s)):Wt.raise("invalid buffer data")}}else if(Nt(e))t.dtype=r||F(e),t.dimension=o,i(t,e,n),a&&(t.persistentData=new Uint8Array(new Uint8Array(e.buffer)));else if(j(e)){u=e.shape;var h=e.stride,d=e.offset,p=0,m=0,g=0,y=0;1===u.length?(p=u[0],m=1,g=h[0],y=0):2===u.length?(p=u[0],m=u[1],g=h[0],y=h[1]):Wt.raise("invalid shape"),t.dtype=r||F(e.data)||ge,t.dimension=m;var v=ue.allocType(t.dtype,p*m);Y(v,e.data,p,m,g,y,d),i(t,v,n),a?t.persistentData=v:ue.freeType(v)}else Wt.raise("invalid buffer data")}function a(n){e.bufferCount--;var r=n.buffer;Wt(r,"buffer must not be deleted already"),t.deleteBuffer(r),n.buffer=null,delete s[n.id]}var u=0,s={};r.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},r.prototype.destroy=function(){a(this)};var f=[];return n.profile&&(e.getTotalBufferSize=function(){var t=0;return Object.keys(s).forEach(function(e){t+=s[e].stats.size}),t}),{create:function(i,u,f,c){function l(e){var r=de,i=null,a=0,u=0,s=1;return Array.isArray(e)||Nt(e)||j(e)?i=e:"number"==typeof e?a=0|e:e&&(Wt.type(e,"object","buffer arguments must be an object, a number or an array"),"data"in e&&(Wt(null===i||Array.isArray(i)||Nt(i)||j(i),"invalid data for buffer"),i=e.data),"usage"in e&&(Wt.parameter(e.usage,ce,"invalid buffer usage"),r=ce[e.usage]),"type"in e&&(Wt.parameter(e.type,fe,"invalid buffer type"),u=fe[e.type]),"dimension"in e&&(Wt.type(e.dimension,"number","invalid dimension"),s=0|e.dimension),"length"in e&&(Wt.nni(a,"buffer length must be a nonnegative integer"),a=0|e.length)),d.bind(),i?o(d,i,r,u,s,c):(t.bufferData(d.type,a,r),d.dtype=u||me,d.usage=r,d.dimension=s,d.byteLength=a),n.profile&&(d.stats.size=d.byteLength*ye[d.dtype]),l}function h(e,n){Wt(n+e.byteLength<=d.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+e.byteLength+" starting from offset "+n+" to a buffer of size "+d.byteLength),t.bufferSubData(d.type,n,e)}e.bufferCount++;var d=new r(u);return s[d.id]=d,f||l(i),l._reglType="buffer",l._buffer=d,l.subdata=function(t,e){var n,r=0|(e||0);if(d.bind(),Array.isArray(t)){if(t.length>0)if("number"==typeof t[0]){var i=ue.allocType(d.dtype,t.length);H(i,t),h(i,r),ue.freeType(i)}else if(Array.isArray(t[0])||Nt(t[0])){n=he(t);var o=le(t,n,d.dtype);h(o,r),ue.freeType(o)}else Wt.raise("invalid buffer data")}else if(Nt(t))h(t,r);else if(j(t)){n=t.shape;var a=t.stride,u=0,s=0,f=0,c=0;1===n.length?(u=n[0],s=1,f=a[0],c=0):2===n.length?(u=n[0],s=n[1],f=a[0],c=a[1]):Wt.raise("invalid shape");var p=Array.isArray(t.data)?d.dtype:F(t.data),m=ue.allocType(p,u*s);Y(m,t.data,u,s,f,c,t.offset),h(m,r),ue.freeType(m)}else Wt.raise("invalid data for buffer subdata");return l},n.profile&&(l.stats=d.stats),l.destroy=function(){a(d)},l},createStream:function(t,e){var n=f.pop();return n||(n=new r(t)),n.bind(),o(n,e,pe,0,1,!1),n},destroyStream:function(t){f.push(t)},clear:function(){Kt(s).forEach(a),f.forEach(a)},getBuffer:function(t){return t&&t._buffer instanceof r?t._buffer:null},restore:function(){Kt(s).forEach(function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})},_initBuffer:o}}function X(t,e,n,r){function i(t){this.id=s++,u[this.id]=this,this.buffer=t,this.primType=xe,this.vertCount=0,this.type=0}function o(r,i,o,a,u,s,f){if(r.buffer.bind(),i){var c=f;f||Nt(i)&&(!j(i)||Nt(i.data))||(c=e.oes_element_index_uint?Ae:Se),n._initBuffer(r.buffer,i,o,c,3)}else t.bufferData(Te,s,o),r.buffer.dtype=l||Me,r.buffer.usage=o,r.buffer.dimension=3,r.buffer.byteLength=s;var l=f;if(!f){switch(r.buffer.dtype){case Me:case we:l=Me;break;case Se:case Ee:l=Se;break;case Ae:case ke:l=Ae;break;default:Wt.raise("unsupported type for element array")}r.buffer.dtype=l}r.type=l,Wt(l!==Ae||!!e.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var h=u;h<0&&(h=r.buffer.byteLength,l===Se?h>>=1:l===Ae&&(h>>=2)),r.vertCount=h;var d=a;if(a<0){d=xe;var p=r.buffer.dimension;1===p&&(d=be),2===p&&(d=_e),3===p&&(d=xe)}r.primType=d}function a(t){r.elementsCount--,Wt(null!==t.buffer,"must not double destroy elements"),delete u[t.id],t.buffer.destroy(),t.buffer=null}var u={},s=0,f={uint8:Me,uint16:Se};e.oes_element_index_uint&&(f.uint32=Ae),i.prototype.bind=function(){this.buffer.bind()};var c=[];return{create:function(t,e){function u(t){if(t)if("number"==typeof t)s(t),c.primType=xe,c.vertCount=0|t,c.type=Me;else{var e=null,n=Ne,r=-1,i=-1,a=0,l=0;Array.isArray(t)||Nt(t)||j(t)?e=t:(Wt.type(t,"object","invalid arguments for elements"),"data"in t&&(e=t.data,Wt(Array.isArray(e)||Nt(e)||j(e),"invalid data for element buffer")),"usage"in t&&(Wt.parameter(t.usage,ce,"invalid element buffer usage"),n=ce[t.usage]),"primitive"in t&&(Wt.parameter(t.primitive,ve,"invalid element buffer primitive"),r=ve[t.primitive]),"count"in t&&(Wt("number"==typeof t.count&&t.count>=0,"invalid vertex count for elements"),i=0|t.count),"type"in t&&(Wt.parameter(t.type,f,"invalid buffer type"),l=f[t.type]),"length"in t?a=0|t.length:(a=i,l===Se||l===Ee?a*=2:l!==Ae&&l!==ke||(a*=4))),o(c,e,n,r,i,a,l)}else s(),c.primType=xe,c.vertCount=0,c.type=Me;return u}var s=n.create(null,Te,!0),c=new i(s._buffer);return r.elementsCount++,u(t),u._reglType="elements",u._elements=c,u.subdata=function(t,e){return s.subdata(t,e),u},u.destroy=function(){a(c)},u},createStream:function(t){var e=c.pop();return e||(e=new i(n.create(null,Te,!0,!1)._buffer)),o(e,t,Ce,-1,-1,0,0),e},destroyStream:function(t){c.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof i?t._elements:null},clear:function(){Kt(u).forEach(a)}}}function G(t){for(var e=ue.allocType(Re,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{Oe[0]=t[n];var r=je[0],i=r>>>31<<15,o=(r<<1>>>24)-127,a=r>>13&1023;if(o<-24)e[n]=i;else if(o<-14){var u=-14-o;e[n]=i+(a+1024>>u)}else e[n]=o>15?i+31744:i+(o+15<<10)+a}return e}function V(t){return Array.isArray(t)||Nt(t)}function $(t){return"[object "+t+"]"}function Q(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function Z(t){return!!Array.isArray(t)&&!(0===t.length||!V(t[0]))}function K(t){return Object.prototype.toString.call(t)}function J(t){return K(t)===Wn}function tt(t){return K(t)===Xn}function et(t){return K(t)===Gn}function nt(t){return K(t)===Vn}function rt(t){if(!t)return!1;var e=K(t);return $n.indexOf(e)>=0||(Q(t)||Z(t)||j(t))}function it(t){return 0|Ct[Object.prototype.toString.call(t)]}function ot(t,e){var n=e.length;switch(t.type){case pn:case mn:case gn:case yn:var r=ue.allocType(t.type,n);r.set(e),t.data=r;break;case tn:t.data=G(e);break;default:Wt.raise("unsupported texture type, must specify a typed array")}}function at(t,e){return ue.allocType(t.type===tn?yn:t.type,e)}function ut(t,e){t.type===tn?(t.data=G(e),ue.freeType(e)):t.data=e}function st(t,e,n,r,i,o){for(var a=t.width,u=t.height,s=t.channels,f=at(t,a*u*s),c=0,l=0;l<u;++l)for(var h=0;h<a;++h)for(var d=0;d<s;++d)f[c++]=e[n*h+r*l+i*d+o];ut(t,f)}function ft(t,e,n,r,i,o){var a;if(a=void 0!==Zn[t]?Zn[t]:Yn[t]*Qn[e],o&&(a*=6),i){for(var u=0,s=n;s>=1;)u+=a*s*s,s/=2;return u}return a*n*r}function ct(t,e,n,r,i,o,a){function u(){this.internalformat=Be,this.format=Be,this.type=pn,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=0,this.width=0,this.height=0,this.channels=0}function s(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function f(t,r){if("object"==typeof r&&r){if("premultiplyAlpha"in r&&(Wt.type(r.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=r.premultiplyAlpha),"flipY"in r&&(Wt.type(r.flipY,"boolean","invalid texture flip"),t.flipY=r.flipY),"alignment"in r&&(Wt.oneOf(r.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=r.alignment),"colorSpace"in r&&(Wt.parameter(r.colorSpace,L,"invalid colorSpace"),t.colorSpace=L[r.colorSpace]),"type"in r){var i=r.type;Wt(e.oes_texture_float||!("float"===i||"float32"===i),"you must enable the OES_texture_float extension in order to use floating point textures."),Wt(e.oes_texture_half_float||!("half float"===i||"float16"===i),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Wt(e.webgl_depth_texture||!("uint16"===i||"uint32"===i||"depth stencil"===i),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Wt.parameter(i,P,"invalid texture type"),t.type=P[i]}var o=t.width,a=t.height,u=t.channels,s=!1;"shape"in r?(Wt(Array.isArray(r.shape)&&r.shape.length>=2,"shape must be an array"),o=r.shape[0],a=r.shape[1],3===r.shape.length&&(u=r.shape[2],Wt(u>0&&u<=4,"invalid number of channels"),s=!0),Wt(o>=0&&o<=n.maxTextureSize,"invalid width"),Wt(a>=0&&a<=n.maxTextureSize,"invalid height")):("radius"in r&&(o=a=r.radius,Wt(o>=0&&o<=n.maxTextureSize,"invalid radius")),"width"in r&&(o=r.width,Wt(o>=0&&o<=n.maxTextureSize,"invalid width")),"height"in r&&(a=r.height,Wt(a>=0&&a<=n.maxTextureSize,"invalid height")),"channels"in r&&(u=r.channels,Wt(u>0&&u<=4,"invalid number of channels"),s=!0)),t.width=0|o,t.height=0|a,t.channels=0|u;var f=!1;if("format"in r){var c=r.format;Wt(e.webgl_depth_texture||!("depth"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Wt.parameter(c,z,"invalid texture format");var l=t.internalformat=z[c];t.format=X[l],c in P&&("type"in r||(t.type=P[c])),c in B&&(t.compressed=!0),f=!0}!s&&f?t.channels=Yn[t.format]:s&&!f?t.channels!==Hn[t.format]&&(t.format=t.internalformat=Hn[t.channels]):f&&s&&Wt(t.channels===Yn[t.format],"number of channels inconsistent with specified format")}}function c(e){t.pixelStorei(zn,e.flipY),t.pixelStorei(Bn,e.premultiplyAlpha),t.pixelStorei(In,e.colorSpace),t.pixelStorei(Pn,e.unpackAlignment)}function l(){u.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function h(t,e){var r=null;if(rt(e)?r=e:e&&(Wt.type(e,"object","invalid pixel data type"),f(t,e),"x"in e&&(t.xOffset=0|e.x),"y"in e&&(t.yOffset=0|e.y),rt(e.data)&&(r=e.data)),Wt(!t.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),e.copy){Wt(!r,"can not specify copy and data field for the same texture");var o=i.viewportWidth,a=i.viewportHeight;t.width=t.width||o-t.xOffset,t.height=t.height||a-t.yOffset,t.needsCopy=!0,Wt(t.xOffset>=0&&t.xOffset<o&&t.yOffset>=0&&t.yOffset<a&&t.width>0&&t.width<=o&&t.height>0&&t.height<=a,"copy texture read out of bounds")}else if(r){if(Nt(r))t.channels=t.channels||4,t.data=r,"type"in e||t.type!==pn||(t.type=it(r));else if(Q(r))t.channels=t.channels||4,ot(t,r),t.alignment=1,t.needsFree=!0;else if(j(r)){var u=r.data;Array.isArray(u)||t.type!==pn||(t.type=it(u));var s,c,l,h,d,p,m=r.shape,g=r.stride;3===m.length?(l=m[2],p=g[2]):(Wt(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),l=1,p=1),s=m[0],c=m[1],h=g[0],d=g[1],t.alignment=1,t.width=s,t.height=c,t.channels=l,t.format=t.internalformat=Hn[l],t.needsFree=!0,st(t,u,h,d,p,r.offset)}else if(J(r)||tt(r))J(r)?t.element=r:t.element=r.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(et(r))t.element=r,t.width=r.naturalWidth,t.height=r.naturalHeight,t.channels=4;else if(nt(r))t.element=r,t.width=r.videoWidth,t.height=r.videoHeight,t.channels=4;else if(Z(r)){var y=t.width||r[0].length,v=t.height||r.length,b=t.channels;b=V(r[0][0])?b||r[0][0].length:b||1;for(var _=se.shape(r),x=1,w=0;w<_.length;++w)x*=_[w];var M=at(t,x);se.flatten(r,_,"",M),ut(t,M),t.alignment=1,t.width=y,t.height=v,t.channels=b,t.format=t.internalformat=Hn[b],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4;t.type===yn?Wt(n.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):t.type===tn&&Wt(n.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function d(e,n,i){var o=e.element,a=e.data,u=e.internalformat,s=e.format,f=e.type,l=e.width,h=e.height;c(e),o?t.texImage2D(n,i,s,s,f,o):e.compressed?t.compressedTexImage2D(n,i,u,l,h,0,a):e.needsCopy?(r(),t.copyTexImage2D(n,i,s,e.xOffset,e.yOffset,l,h,0)):t.texImage2D(n,i,s,l,h,0,s,f,a)}function p(e,n,i,o,a){var u=e.element,s=e.data,f=e.internalformat,l=e.format,h=e.type,d=e.width,p=e.height;c(e),u?t.texSubImage2D(n,a,i,o,l,h,u):e.compressed?t.compressedTexSubImage2D(n,a,i,o,f,d,p,s):e.needsCopy?(r(),t.copyTexSubImage2D(n,a,i,o,e.xOffset,e.yOffset,d,p)):t.texSubImage2D(n,a,i,o,d,p,l,h,s)}function m(){return G.pop()||new l}function g(t){t.needsFree&&ue.freeType(t.data),l.call(t),G.push(t)}function y(){u.call(this),this.genMipmaps=!1,this.mipmapHint=jn,this.mipmask=0,this.images=Array(16)}function v(t,e,n){var r=t.images[0]=m();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function b(t,e){var n=null;if(rt(e))s(n=t.images[0]=m(),t),h(n,e),t.mipmask=1;else if(f(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,i=0;i<r.length;++i)s(n=t.images[i]=m(),t),n.width>>=i,n.height>>=i,h(n,r[i]),t.mipmask|=1<<i;else s(n=t.images[0]=m(),t),h(n,e),t.mipmask=1;s(t,t.images[0]),(t.compressed&&t.internalformat===en||t.internalformat===nn||t.internalformat===rn||t.internalformat===on)&&Wt(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function _(t,e){for(var n=t.images,r=0;r<n.length;++r){if(!n[r])return;d(n[r],e,r)}}function x(){var t=$.pop()||new y;u.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function w(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&g(e[n]),e[n]=null;$.push(t)}function M(){this.minFilter=Sn,this.magFilter=Sn,this.wrapS=xn,this.wrapT=xn,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=jn}function E(t,e){if("min"in e){var r=e.min;Wt.parameter(r,D),t.minFilter=D[r],Fn.indexOf(t.minFilter)>=0&&(t.genMipmaps=!0)}if("mag"in e){var i=e.mag;Wt.parameter(i,R),t.magFilter=R[i]}var o=t.wrapS,a=t.wrapT;if("wrap"in e){var u=e.wrap;"string"==typeof u?(Wt.parameter(u,O),o=a=O[u]):Array.isArray(u)&&(Wt.parameter(u[0],O),Wt.parameter(u[1],O),o=O[u[0]],a=O[u[1]])}else{if("wrapS"in e){var s=e.wrapS;Wt.parameter(s,O),o=O[s]}if("wrapT"in e){var f=e.wrapT;Wt.parameter(f,O),a=O[f]}}if(t.wrapS=o,t.wrapT=a,"anisotropic"in e){var c=e.anisotropic;Wt("number"==typeof c&&c>=1&&c<=n.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var l=!1;switch(typeof e.mipmap){case"string":Wt.parameter(e.mipmap,N,"invalid mipmap hint"),t.mipmapHint=N[e.mipmap],t.genMipmaps=!0,l=!0;break;case"boolean":l=t.genMipmaps=e.mipmap;break;case"object":Wt(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,l=!0;break;default:Wt.raise("invalid mipmap type")}!l||"min"in e||(t.minFilter=An)}}function S(n,r){t.texParameteri(r,En,n.minFilter),t.texParameteri(r,Mn,n.magFilter),t.texParameteri(r,vn,n.wrapS),t.texParameteri(r,bn,n.wrapT),e.ext_texture_filter_anisotropic&&t.texParameteri(r,Ln,n.anisotropic),n.genMipmaps&&(t.hint(On,n.mipmapHint),t.generateMipmap(r))}function k(e){u.call(this),this.mipmask=0,this.internalformat=Be,this.id=K++,this.refCount=1,this.target=e,this.texture=t.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new M,a.profile&&(this.stats={size:0})}function A(e){t.activeTexture(Un),t.bindTexture(e.target,e.texture)}function T(){var e=ht[0];e?t.bindTexture(e.target,e.texture):t.bindTexture(Le,null)}function C(e){var n=e.texture;Wt(n,"must not double destroy texture");var r=e.unit,i=e.target;r>=0&&(t.activeTexture(Un+r),t.bindTexture(i,null),ht[r]=null),t.deleteTexture(n),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete ct[e.id],o.textureCount--}var N={"don't care":jn,"dont care":jn,nice:Dn,fast:Rn},O={repeat:_n,clamp:xn,mirror:wn},R={nearest:Sn,linear:kn},D=Ot({mipmap:Nn,"nearest mipmap nearest":An,"linear mipmap nearest":Tn,"nearest mipmap linear":Cn,"linear mipmap linear":Nn},R),L={none:0,browser:qn},P={uint8:pn,rgba4:Xe,rgb565:Ve,"rgb5 a1":Ge},z={alpha:Ie,luminance:Ue,"luminance alpha":Fe,rgb:qe,rgba:Be,rgba4:He,"rgb5 a1":Ye,rgb565:We},B={};e.ext_srgb&&(z.srgb=Ke,z.srgba=Je),e.oes_texture_float&&(P.float32=P.float=yn),e.oes_texture_half_float&&(P.float16=P["half float"]=tn),e.webgl_depth_texture&&(Ot(z,{depth:Qe,"depth stencil":Ze}),Ot(P,{uint16:mn,uint32:gn,"depth stencil":$e})),e.webgl_compressed_texture_s3tc&&Ot(B,{"rgb s3tc dxt1":en,"rgba s3tc dxt1":nn,"rgba s3tc dxt3":rn,"rgba s3tc dxt5":on}),e.webgl_compressed_texture_atc&&Ot(B,{"rgb atc":an,"rgba atc explicit alpha":un,"rgba atc interpolated alpha":sn}),e.webgl_compressed_texture_pvrtc&&Ot(B,{"rgb pvrtc 4bppv1":fn,"rgb pvrtc 2bppv1":cn,"rgba pvrtc 4bppv1":ln,"rgba pvrtc 2bppv1":hn}),e.webgl_compressed_texture_etc1&&(B["rgb etc1"]=dn);var I=Array.prototype.slice.call(t.getParameter(De));Object.keys(B).forEach(function(t){var e=B[t];I.indexOf(e)>=0&&(z[t]=e)});var q=Object.keys(z);n.textureFormats=q;var U=[];Object.keys(z).forEach(function(t){var e=z[t];U[e]=t});var F=[];Object.keys(P).forEach(function(t){var e=P[t];F[e]=t});var H=[];Object.keys(R).forEach(function(t){var e=R[t];H[e]=t});var Y=[];Object.keys(D).forEach(function(t){var e=D[t];Y[e]=t});var W=[];Object.keys(O).forEach(function(t){var e=O[t];W[e]=t});var X=q.reduce(function(t,e){var n=z[e];return n===Ue||n===Ie||n===Ue||n===Fe||n===Qe||n===Ze?t[n]=n:n===Ye||e.indexOf("rgba")>=0?t[n]=Be:t[n]=qe,t},{}),G=[],$=[],K=0,ct={},lt=n.maxTextureUnits,ht=Array(lt).map(function(){return null});return Ot(k.prototype,{bind:function(){var e=this;e.bindCount+=1;var n=e.unit;if(n<0){for(var r=0;r<lt;++r){var i=ht[r];if(i){if(i.bindCount>0)continue;i.unit=-1}ht[r]=e,n=r;break}n>=lt&&Wt.raise("insufficient number of texture units"),a.profile&&o.maxTextureUnits<n+1&&(o.maxTextureUnits=n+1),e.unit=n,t.activeTexture(Un+n),t.bindTexture(e.target,e.texture)}return n},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&C(this)}}),a.profile&&(o.getTotalTextureSize=function(){var t=0;return Object.keys(ct).forEach(function(e){t+=ct[e].stats.size}),t}),{create2D:function(e,r){function i(t,e){var r=u.texInfo;M.call(r);var o=x();return"number"==typeof t?"number"==typeof e?v(o,0|t,0|e):v(o,0|t,0|t):t?(Wt.type(t,"object","invalid arguments to regl.texture"),E(r,t),b(o,t)):v(o,1,1),r.genMipmaps&&(o.mipmask=(o.width<<1)-1),u.mipmask=o.mipmask,s(u,o),Wt.texture2D(r,o,n),u.internalformat=o.internalformat,i.width=o.width,i.height=o.height,A(u),_(o,Le),S(r,Le),T(),w(o),a.profile&&(u.stats.size=ft(u.internalformat,u.type,o.width,o.height,r.genMipmaps,!1)),i.format=U[u.internalformat],i.type=F[u.type],i.mag=H[r.magFilter],i.min=Y[r.minFilter],i.wrapS=W[r.wrapS],i.wrapT=W[r.wrapT],i}var u=new k(Le);return ct[u.id]=u,o.textureCount++,i(e,r),i.subimage=function(t,e,n,r){Wt(!!t,"must specify image data");var o=0|e,a=0|n,f=0|r,c=m();return s(c,u),c.width=0,c.height=0,h(c,t),c.width=c.width||(u.width>>f)-o,c.height=c.height||(u.height>>f)-a,Wt(u.type===c.type&&u.format===c.format&&u.internalformat===c.internalformat,"incompatible format for texture.subimage"),Wt(o>=0&&a>=0&&o+c.width<=u.width&&a+c.height<=u.height,"texture.subimage write out of bounds"),Wt(u.mipmask&1<<f,"missing mipmap data"),Wt(c.data||c.element||c.needsCopy,"missing image data"),A(u),p(c,Le,o,a,f),T(),g(c),i},i.resize=function(e,n){var r=0|e,o=0|n||r;if(r===u.width&&o===u.height)return i;i.width=u.width=r,i.height=u.height=o,A(u);for(var s=0;u.mipmask>>s;++s)t.texImage2D(Le,s,u.format,r>>s,o>>s,0,u.format,u.type,null);return T(),a.profile&&(u.stats.size=ft(u.internalformat,u.type,r,o,!1,!1)),i},i._reglType="texture2d",i._texture=u,a.profile&&(i.stats=u.stats),i.destroy=function(){u.decRef()},i},createCube:function(e,r,i,u,c,l){function d(t,e,r,i,o,u){var c,l=y.texInfo;for(M.call(l),c=0;c<6;++c)C[c]=x();if("number"!=typeof t&&t)if("object"==typeof t)if(e)b(C[0],t),b(C[1],e),b(C[2],r),b(C[3],i),b(C[4],o),b(C[5],u);else if(E(l,t),f(y,t),"faces"in t){var h=t.faces;for(Wt(Array.isArray(h)&&6===h.length,"cube faces must be a length 6 array"),c=0;c<6;++c)Wt("object"==typeof h[c]&&!!h[c],"invalid input for cube map face"),s(C[c],y),b(C[c],h[c])}else for(c=0;c<6;++c)b(C[c],t);else Wt.raise("invalid arguments to cube map");else{var p=0|t||1;for(c=0;c<6;++c)v(C[c],p,p)}for(s(y,C[0]),l.genMipmaps?y.mipmask=(C[0].width<<1)-1:y.mipmask=C[0].mipmask,Wt.textureCube(y,l,C,n),y.internalformat=C[0].internalformat,d.width=C[0].width,d.height=C[0].height,A(y),c=0;c<6;++c)_(C[c],ze+c);for(S(l,Pe),T(),a.profile&&(y.stats.size=ft(y.internalformat,y.type,d.width,d.height,l.genMipmaps,!0)),d.format=U[y.internalformat],d.type=F[y.type],d.mag=H[l.magFilter],d.min=Y[l.minFilter],d.wrapS=W[l.wrapS],d.wrapT=W[l.wrapT],c=0;c<6;++c)w(C[c]);return d}var y=new k(Pe);ct[y.id]=y,o.cubeCount++;var C=new Array(6);return d(e,r,i,u,c,l),d.subimage=function(t,e,n,r,i){Wt(!!e,"must specify image data"),Wt("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var o=0|n,a=0|r,u=0|i,f=m();return s(f,y),f.width=0,f.height=0,h(f,e),f.width=f.width||(y.width>>u)-o,f.height=f.height||(y.height>>u)-a,Wt(y.type===f.type&&y.format===f.format&&y.internalformat===f.internalformat,"incompatible format for texture.subimage"),Wt(o>=0&&a>=0&&o+f.width<=y.width&&a+f.height<=y.height,"texture.subimage write out of bounds"),Wt(y.mipmask&1<<u,"missing mipmap data"),Wt(f.data||f.element||f.needsCopy,"missing image data"),A(y),p(f,ze+t,o,a,u),T(),g(f),d},d.resize=function(e){var n=0|e;if(n!==y.width){d.width=y.width=n,d.height=y.height=n,A(y);for(var r=0;r<6;++r)for(var i=0;y.mipmask>>i;++i)t.texImage2D(ze+r,i,y.format,n>>i,n>>i,0,y.format,y.type,null);return T(),a.profile&&(y.stats.size=ft(y.internalformat,y.type,d.width,d.height,!1,!0)),d}},d._reglType="textureCube",d._texture=y,a.profile&&(d.stats=y.stats),d.destroy=function(){y.decRef()},d},clear:function(){for(var e=0;e<lt;++e)t.activeTexture(Un+e),t.bindTexture(Le,null),ht[e]=null;Kt(ct).forEach(C),o.cubeCount=0,o.textureCount=0},getTexture:function(t){return null},restore:function(){Kt(ct).forEach(function(e){e.texture=t.createTexture(),t.bindTexture(e.target,e.texture);for(var n=0;n<32;++n)if(0!=(e.mipmask&1<<n))if(e.target===Le)t.texImage2D(Le,n,e.internalformat,e.width>>n,e.height>>n,0,e.internalformat,e.type,null);else for(var r=0;r<6;++r)t.texImage2D(ze+r,n,e.internalformat,e.width>>n,e.height>>n,0,e.internalformat,e.type,null);S(e.texInfo,e.target)})}}}function lt(t,e,n){return tr[t]*e*n}function ht(t,e,n,r,i,o){function a(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=0,i=0;e?(r=e.width,i=e.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function u(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function s(t,e,n){if(t)if(t.texture){var r=t.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height);Wt(i===e&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=t.renderbuffer._renderbuffer;Wt(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function f(e,n){n&&(n.texture?t.framebufferTexture2D(nr,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(nr,e,rr,n.renderbuffer._renderbuffer.renderbuffer))}function c(t){var e=ir,n=null,r=null,i=t;"object"==typeof t&&(i=t.data,"target"in t&&(e=0|t.target)),Wt.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(n=i,Wt(e===ir)):"textureCube"===o?(n=i,Wt(e>=or&&e<or+6,"invalid cube map target")):"renderbuffer"===o?(r=i,e=rr):Wt.raise("invalid regl object for attachment"),new a(e,n,r)}function l(t,e,n,o,u){if(n){var s=r.create2D({width:t,height:e,format:o,type:u});return s._texture.refCount=0,new a(ir,s,null)}var f=i.create({width:t,height:e,format:o});return f._renderbuffer.refCount=0,new a(rr,null,f)}function h(t){return t&&(t.texture||t.renderbuffer)}function d(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n))}function p(){this.id=M++,E[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function m(t){t.colorAttachments.forEach(u),u(t.depthAttachment),u(t.stencilAttachment),u(t.depthStencilAttachment)}function g(e){var n=e.framebuffer;Wt(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,o.framebufferCount--,delete E[e.id]}function y(e){var r;t.bindFramebuffer(nr,e.framebuffer);var i=e.colorAttachments;for(r=0;r<i.length;++r)f(ar+r,i[r]);for(r=i.length;r<n.maxColorAttachments;++r)t.framebufferTexture2D(nr,ar+r,ir,null,0);t.framebufferTexture2D(nr,fr,ir,null,0),t.framebufferTexture2D(nr,ur,ir,null,0),t.framebufferTexture2D(nr,sr,ir,null,0),f(ur,e.depthAttachment),f(sr,e.stencilAttachment),f(fr,e.depthStencilAttachment);var o=t.checkFramebufferStatus(nr);o!==cr&&Wt.raise("framebuffer configuration not supported, status = "+br[o]),t.bindFramebuffer(nr,b.next),b.cur=b.next,t.getError()}function v(t,r){function i(t,r){var o;Wt(b.next!==a,"can not update framebuffer which is currently in use");var u=e.webgl_draw_buffers,f=0,d=0,p=!0,g=!0,v=null,M=!0,E="rgba",S="uint8",k=1,A=null,T=null,C=null,N=!1;if("number"==typeof t)f=0|t,d=0|r||f;else if(t){Wt.type(t,"object","invalid arguments for framebuffer");var O=t;if("shape"in O){var j=O.shape;Wt(Array.isArray(j)&&j.length>=2,"invalid shape for framebuffer"),f=j[0],d=j[1]}else"radius"in O&&(f=d=O.radius),"width"in O&&(f=O.width),"height"in O&&(d=O.height);("color"in O||"colors"in O)&&(v=O.color||O.colors,Array.isArray(v)&&Wt(1===v.length||u,"multiple render targets not supported")),v||("colorCount"in O&&(k=0|O.colorCount,Wt(k>0,"invalid color buffer count")),"colorTexture"in O&&(M=!!O.colorTexture,E="rgba4"),"colorType"in O&&(S=O.colorType,M?(Wt(e.oes_texture_float||!("float"===S||"float32"===S),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Wt(e.oes_texture_half_float||!("half float"===S||"float16"===S),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===S||"float16"===S?(Wt(e.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),E="rgba16f"):"float"!==S&&"float32"!==S||(Wt(e.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),E="rgba32f"),Wt.oneOf(S,w,"invalid color type")),"colorFormat"in O&&(E=O.colorFormat,_.indexOf(E)>=0?M=!0:x.indexOf(E)>=0?M=!1:M?Wt.oneOf(O.colorFormat,_,"invalid color format for texture"):Wt.oneOf(O.colorFormat,x,"invalid color format for renderbuffer"))),("depthTexture"in O||"depthStencilTexture"in O)&&(N=!(!O.depthTexture&&!O.depthStencilTexture),Wt(!N||e.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in O&&("boolean"==typeof O.depth?p=O.depth:(A=O.depth,g=!1)),"stencil"in O&&("boolean"==typeof O.stencil?g=O.stencil:(T=O.stencil,p=!1)),"depthStencil"in O&&("boolean"==typeof O.depthStencil?p=g=O.depthStencil:(C=O.depthStencil,p=!1,g=!1))}else f=d=1;var R=null,D=null,L=null,P=null;if(Array.isArray(v))R=v.map(c);else if(v)R=[c(v)];else for(R=new Array(k),o=0;o<k;++o)R[o]=l(f,d,M,E,S);Wt(e.webgl_draw_buffers||R.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Wt(R.length<=n.maxColorAttachments,"too many color attachments, not supported"),f=f||R[0].width,d=d||R[0].height,A?D=c(A):p&&!g&&(D=l(f,d,N,"depth","uint32")),T?L=c(T):g&&!p&&(L=l(f,d,!1,"stencil","uint8")),C?P=c(C):!A&&!T&&g&&p&&(P=l(f,d,N,"depth stencil","depth stencil")),Wt(!!A+!!T+!!C<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var z=null;for(o=0;o<R.length;++o)if(s(R[o],f,d),Wt(!R[o]||R[o].texture&&hr.indexOf(R[o].texture._texture.format)>=0||R[o].renderbuffer&&vr.indexOf(R[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),R[o]&&R[o].texture){var B=dr[R[o].texture._texture.format]*pr[R[o].texture._texture.type];null===z?z=B:Wt(z===B,"all color attachments much have the same number of bits per pixel.")}return s(D,f,d),Wt(!D||D.texture&&D.texture._texture.format===lr||D.renderbuffer&&D.renderbuffer._renderbuffer.format===mr,"invalid depth attachment for framebuffer object"),s(L,f,d),Wt(!L||L.renderbuffer&&L.renderbuffer._renderbuffer.format===gr,"invalid stencil attachment for framebuffer object"),s(P,f,d),Wt(!P||P.texture&&P.texture._texture.format===yr||P.renderbuffer&&P.renderbuffer._renderbuffer.format===yr,"invalid depth-stencil attachment for framebuffer object"),m(a),a.width=f,a.height=d,a.colorAttachments=R,a.depthAttachment=D,a.stencilAttachment=L,a.depthStencilAttachment=P,i.color=R.map(h),i.depth=h(D),i.stencil=h(L),i.depthStencil=h(P),i.width=a.width,i.height=a.height,y(a),i}var a=new p;return o.framebufferCount++,i(t,r),Ot(i,{resize:function(t,e){Wt(b.next!==a,"can not resize a framebuffer which is currently in use");var n=0|t,r=0|e||n;if(n===a.width&&r===a.height)return i;for(var o=a.colorAttachments,u=0;u<o.length;++u)d(o[u],n,r);return d(a.depthAttachment,n,r),d(a.stencilAttachment,n,r),d(a.depthStencilAttachment,n,r),a.width=i.width=n,a.height=i.height=r,y(a),i},_reglType:"framebuffer",_framebuffer:a,destroy:function(){g(a),m(a)},use:function(t){b.setFBO({framebuffer:i},t)}})}var b={cur:null,next:null,dirty:!1,setFBO:null},_=["rgba"],x=["rgba4","rgb565","rgb5 a1"];e.ext_srgb&&x.push("srgba"),e.ext_color_buffer_half_float&&x.push("rgba16f","rgb16f"),e.webgl_color_buffer_float&&x.push("rgba32f");var w=["uint8"];e.oes_texture_half_float&&w.push("half float","float16"),e.oes_texture_float&&w.push("float","float32");var M=0,E={};return Ot(b,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof p)return e}return null},create:v,createCube:function(t){function i(t){var n;Wt(o.indexOf(b.next)<0,"can not update framebuffer which is currently in use");var a=e.webgl_draw_buffers,u={color:null},s=0,f=null,c="rgba",l="uint8",h=1;if("number"==typeof t)s=0|t;else if(t){Wt.type(t,"object","invalid arguments for framebuffer");var d=t;if("shape"in d){var p=d.shape;Wt(Array.isArray(p)&&p.length>=2,"invalid shape for framebuffer"),Wt(p[0]===p[1],"cube framebuffer must be square"),s=p[0]}else"radius"in d&&(s=0|d.radius),"width"in d?(s=0|d.width,"height"in d&&Wt(d.height===s,"must be square")):"height"in d&&(s=0|d.height);("color"in d||"colors"in d)&&(f=d.color||d.colors,Array.isArray(f)&&Wt(1===f.length||a,"multiple render targets not supported")),f||("colorCount"in d&&(h=0|d.colorCount,Wt(h>0,"invalid color buffer count")),"colorType"in d&&(Wt.oneOf(d.colorType,w,"invalid color type"),l=d.colorType),"colorFormat"in d&&(c=d.colorFormat,Wt.oneOf(d.colorFormat,_,"invalid color format for texture"))),"depth"in d&&(u.depth=d.depth),"stencil"in d&&(u.stencil=d.stencil),"depthStencil"in d&&(u.depthStencil=d.depthStencil)}else s=1;var m;if(f)if(Array.isArray(f))for(m=[],n=0;n<f.length;++n)m[n]=f[n];else m=[f];else{m=Array(h);var g={radius:s,format:c,type:l};for(n=0;n<h;++n)m[n]=r.createCube(g)}for(u.color=Array(m.length),n=0;n<m.length;++n){var y=m[n];Wt("function"==typeof y&&"textureCube"===y._reglType,"invalid cube map"),s=s||y.width,Wt(y.width===s&&y.height===s,"invalid cube map shape"),u.color[n]={target:or,data:m[n]}}for(n=0;n<6;++n){for(var x=0;x<m.length;++x)u.color[x].target=or+n;n>0&&(u.depth=o[0].depth,u.stencil=o[0].stencil,u.depthStencil=o[0].depthStencil),o[n]?o[n](u):o[n]=v(u)}return Ot(i,{width:s,height:s,color:m})}var o=Array(6);return i(t),Ot(i,{faces:o,resize:function(t){var e,r=0|t;if(Wt(r>0&&r<=n.maxCubeMapSize,"invalid radius for cube fbo"),r===i.width)return i;var a=i.color;for(e=0;e<a.length;++e)a[e].resize(r);for(e=0;e<6;++e)o[e].resize(r);return i.width=i.height=r,i},_reglType:"framebufferCube",destroy:function(){o.forEach(function(t){t.destroy()})}})},clear:function(){Kt(E).forEach(g)},restore:function(){Kt(E).forEach(function(e){e.framebuffer=t.createFramebuffer(),y(e)})}})}function dt(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=_r,this.offset=0,this.stride=0,this.divisor=0}function pt(t,e,n,r,i){for(var o=n.maxAttributes,a=new Array(o),u=0;u<o;++u)a[u]=new dt;return{Record:dt,scope:{},state:a}}function mt(t,e,n,r){function i(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function o(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function a(n,r,i){var o=n===xr?f:c,a=o[r];if(!a){var u=e.str(r);a=t.createShader(n),t.shaderSource(a,u),t.compileShader(a),Wt.shaderError(t,a,u,n,i),o[r]=a}return a}function u(t,e){this.id=d++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function s(n,u){var s,f,c=a(xr,n.fragId),l=a(wr,n.vertId),h=n.program=t.createProgram();t.attachShader(h,c),t.attachShader(h,l),t.linkProgram(h),Wt.linkError(t,h,e.str(n.fragId),e.str(n.vertId),u);var d=t.getProgramParameter(h,Mr);r.profile&&(n.stats.uniformsCount=d);var p=n.uniforms;for(s=0;s<d;++s)if(f=t.getActiveUniform(h,s))if(f.size>1)for(var m=0;m<f.size;++m){var g=f.name.replace("[0]","["+m+"]");o(p,new i(g,e.id(g),t.getUniformLocation(h,g),f))}else o(p,new i(f.name,e.id(f.name),t.getUniformLocation(h,f.name),f));var y=t.getProgramParameter(h,Er);r.profile&&(n.stats.attributesCount=y);var v=n.attributes;for(s=0;s<y;++s)(f=t.getActiveAttrib(h,s))&&o(v,new i(f.name,e.id(f.name),t.getAttribLocation(h,f.name),f))}var f={},c={},l={},h=[],d=0;return r.profile&&(n.getMaxUniformsCount=function(){var t=0;return h.forEach(function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)}),t},n.getMaxAttributesCount=function(){var t=0;return h.forEach(function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)}),t}),{clear:function(){var e=t.deleteShader.bind(t);Kt(f).forEach(e),f={},Kt(c).forEach(e),c={},h.forEach(function(e){t.deleteProgram(e.program)}),h.length=0,l={},n.shaderCount=0},program:function(t,e,r){Wt.command(t>=0,"missing vertex shader",r),Wt.command(e>=0,"missing fragment shader",r);var i=l[e];i||(i=l[e]={});var o=i[t];return o||(o=new u(e,t),n.shaderCount++,s(o,r),i[t]=o,h.push(o)),o},restore:function(){f={},c={};for(var t=0;t<h.length;++t)s(h[t])},shader:a,frag:-1,vert:-1}}function gt(t,e,n,r,i,o){function a(a){var u;null===e.next?(Wt(i.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),u=kr):(Wt(null!==e.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),u=e.next.colorAttachments[0].texture._texture.type,o.oes_texture_float?Wt(u===kr||u===Tr,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"):Wt(u===kr,"Reading from a framebuffer is only allowed for the type 'uint8'"));var s=0,f=0,c=r.framebufferWidth,l=r.framebufferHeight,h=null;Nt(a)?h=a:a&&(Wt.type(a,"object","invalid arguments to regl.read()"),s=0|a.x,f=0|a.y,Wt(s>=0&&s<r.framebufferWidth,"invalid x offset for regl.read"),Wt(f>=0&&f<r.framebufferHeight,"invalid y offset for regl.read"),c=0|(a.width||r.framebufferWidth-s),l=0|(a.height||r.framebufferHeight-f),h=a.data||null),h&&(u===kr?Wt(h instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):u===Tr&&Wt(h instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Wt(c>0&&c+s<=r.framebufferWidth,"invalid width for read pixels"),Wt(l>0&&l+f<=r.framebufferHeight,"invalid height for read pixels"),n();var d=c*l*4;return h||(u===kr?h=new Uint8Array(d):u===Tr&&(h=h||new Float32Array(d))),Wt.isTypedArray(h,"data buffer for regl.read() must be a typedarray"),Wt(h.byteLength>=d,"data buffer for regl.read() too small"),t.pixelStorei(Ar,4),t.readPixels(s,f,c,l,Sr,u,h),h}function u(t){var n;return e.setFBO({framebuffer:t.framebuffer},function(){n=a(t)}),n}return function(t){return t&&"framebuffer"in t?u(t):a(t)}}function yt(t){return Array.prototype.slice.call(t)}function vt(t){return yt(t).join("")}function bt(){function t(){var t=[],e=[];return Ot(function(){t.push.apply(t,yt(arguments))},{def:function(){var r="v"+n++;return e.push(r),arguments.length>0&&(t.push(r,"="),t.push.apply(t,yt(arguments)),t.push(";")),r},toString:function(){return vt([e.length>0?"var "+e+";":"",vt(t)])}})}function e(){function e(t,e){r(t,e,"=",n.def(t,e),";")}var n=t(),r=t(),i=n.toString,o=r.toString;return Ot(function(){n.apply(n,yt(arguments))},{def:n.def,entry:n,exit:r,save:e,set:function(t,r,i){e(t,r),n(t,r,"=",i,";")},toString:function(){return i()+o()}})}var n=0,r=[],i=[],o=t(),a={};return{global:o,link:function(t){for(var e=0;e<i.length;++e)if(i[e]===t)return r[e];var o="g"+n++;return r.push(o),i.push(t),o},block:t,proc:function(t,n){function r(){var t="a"+i.length;return i.push(t),t}var i=[];n=n||0;for(var o=0;o<n;++o)r();var u=e(),s=u.toString;return a[t]=Ot(u,{arg:r,toString:function(){return vt(["function(",i.join(),"){",s(),"}"])}})},scope:e,cond:function(){var t=vt(arguments),n=e(),r=e(),i=n.toString,o=r.toString;return Ot(n,{then:function(){return n.apply(n,yt(arguments)),this},else:function(){return r.apply(r,yt(arguments)),this},toString:function(){var e=o();return e&&(e="else{"+e+"}"),vt(["if(",t,"){",i(),"}",e])}})},compile:function(){var t=['"use strict";',o,"return {"];Object.keys(a).forEach(function(e){t.push('"',e,'":',a[e].toString(),",")}),t.push("}");var e=vt(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,r.concat(e)).apply(null,i)}}}function _t(t){return Array.isArray(t)||Nt(t)||j(t)}function xt(t){return t.sort(function(t,e){return t===ci?-1:e===ci?1:t<e?-1:1})}function wt(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function Mt(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function Et(t){return new wt(!1,!1,!1,t)}function St(t,e){var n=t.type;if(n===Rr){var r=t.data.length;return new wt(!0,r>=1,r>=2,e)}if(n===zr){var i=t.data;return new wt(i.thisDep,i.contextDep,i.propDep,e)}return new wt(n===Pr,n===Lr,n===Dr,e)}function kt(t,e,n,r,i,o,a,u,s,f,c,l,h,d,p){function m(t){return t.replace(".","_")}function g(t,e,n){var r=m(t);et.push(t),tt[r]=J[r]=!!n,nt[r]=e}function y(t,e,n){var r=m(t);et.push(t),Array.isArray(n)?(J[r]=n.slice(),tt[r]=n.slice()):J[r]=tt[r]=n,rt[r]=e}function v(){var t=bt(),n=t.link,r=t.global;t.id=at++,t.batchId="0";var i=n(it),o=t.shared={props:"a0"};Object.keys(it).forEach(function(t){o[t]=r.def(i,".",t)}),Wt.optional(function(){t.CHECK=n(Wt),t.commandStr=Wt.guessCommand(),t.command=n(t.commandStr),t.assert=function(t,e,r){t("if(!(",e,"))",this.CHECK,".commandRaise(",n(r),",",this.command,");")},ot.invalidBlendCombinations=_o});var a=t.next={},u=t.current={};Object.keys(rt).forEach(function(t){Array.isArray(J[t])&&(a[t]=r.def(o.next,".",t),u[t]=r.def(o.current,".",t))});var s=t.constants={};Object.keys(ot).forEach(function(t){s[t]=r.def(JSON.stringify(ot[t]))}),t.invoke=function(e,r){switch(r.type){case Rr:var i=["this",o.context,o.props,t.batchId];return e.def(n(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case Dr:return e.def(o.props,r.data);case Lr:return e.def(o.context,r.data);case Pr:return e.def("this",r.data);case zr:return r.data.append(t,e),r.data.ref}},t.attribCache={};var c={};return t.scopeAttrib=function(t){var r=e.id(t);if(r in c)return c[r];var i=f.scope[r];return i||(i=f.scope[r]=new $),c[r]=n(i)},t}function b(t){var e,n=t.static,r=t.dynamic;if(li in n){var i=!!n[li];(e=Et(function(t,e){return i})).enable=i}else if(li in r){var o=r[li];e=St(o,function(t,e){return t.invoke(e,o)})}return e}function _(t,e){var n=t.static,r=t.dynamic;if(hi in n){var i=n[hi];return i?(i=u.getFramebuffer(i),Wt.command(i,"invalid framebuffer object"),Et(function(t,e){var n=t.link(i),r=t.shared;e.set(r.framebuffer,".next",n);var o=r.context;return e.set(o,"."+_i,n+".width"),e.set(o,"."+xi,n+".height"),n})):Et(function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var r=n.context;return e.set(r,"."+_i,r+"."+Ei),e.set(r,"."+xi,r+"."+Si),"null"})}if(hi in r){var o=r[hi];return St(o,function(t,e){var n=t.invoke(e,o),r=t.shared,i=r.framebuffer,a=e.def(i,".getFramebuffer(",n,")");Wt.optional(function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")}),e.set(i,".next",a);var u=r.context;return e.set(u,"."+_i,a+"?"+a+".width:"+u+"."+Ei),e.set(u,"."+xi,a+"?"+a+".height:"+u+"."+Si),a})}return null}function x(t,e,n){function r(t){if(t in i){var r=i[t];Wt.commandType(r,"object","invalid "+t,n.commandStr);var a,u,s=!0,f=0|r.x,c=0|r.y;return"width"in r?(a=0|r.width,Wt.command(a>=0,"invalid "+t,n.commandStr)):s=!1,"height"in r?(u=0|r.height,Wt.command(u>=0,"invalid "+t,n.commandStr)):s=!1,new wt(!s&&e&&e.thisDep,!s&&e&&e.contextDep,!s&&e&&e.propDep,function(t,e){var n=t.shared.context,i=a;"width"in r||(i=e.def(n,".",_i,"-",f));var o=u;return"height"in r||(o=e.def(n,".",xi,"-",c)),[f,c,i,o]})}if(t in o){var l=o[t],h=St(l,function(e,n){var r=e.invoke(n,l);Wt.optional(function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)});var i=e.shared.context,o=n.def(r,".x|0"),a=n.def(r,".y|0"),u=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",_i,"-",o,")"),s=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",xi,"-",a,")");return Wt.optional(function(){e.assert(n,u+">=0&&"+s+">=0","invalid "+t)}),[o,a,u,s]});return e&&(h.thisDep=h.thisDep||e.thisDep,h.contextDep=h.contextDep||e.contextDep,h.propDep=h.propDep||e.propDep),h}return e?new wt(e.thisDep,e.contextDep,e.propDep,function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",_i),e.def(n,".",xi)]}):null}var i=t.static,o=t.dynamic,a=r(ci);if(a){var u=a;a=new wt(a.thisDep,a.contextDep,a.propDep,function(t,e){var n=u.append(t,e),r=t.shared.context;return e.set(r,"."+wi,n[2]),e.set(r,"."+Mi,n[3]),n})}return{viewport:a,scissor_box:r(fi)}}function w(t){function n(t){if(t in i){var n=e.id(i[t]);Wt.optional(function(){c.shader(Mo[t],n,Wt.guessCommand())});var r=Et(function(){return n});return r.id=n,r}if(t in o){var a=o[t];return St(a,function(e,n){var r=e.invoke(n,a),i=n.def(e.shared.strings,".id(",r,")");return Wt.optional(function(){n(e.shared.shader,".shader(",Mo[t],",",i,",",e.command,");")}),i})}return null}var r,i=t.static,o=t.dynamic,a=n(pi),u=n(di),s=null;return Mt(a)&&Mt(u)?(s=c.program(u.id,a.id),r=Et(function(t,e){return t.link(s)})):r=new wt(a&&a.thisDep||u&&u.thisDep,a&&a.contextDep||u&&u.contextDep,a&&a.propDep||u&&u.propDep,function(t,e){var n,r=t.shared.shader;n=a?a.append(t,e):e.def(r,".",pi);var i,o=r+".program("+(i=u?u.append(t,e):e.def(r,".",di))+","+n;return Wt.optional(function(){o+=","+t.command}),e.def(o+")")}),{frag:a,vert:u,progVar:r,program:s}}function M(t,e){function n(t,n){if(t in r){var o=0|r[t];return Wt.command(!n||o>=0,"invalid "+t,e.commandStr),Et(function(t,e){return n&&(t.OFFSET=o),o})}if(t in i){var u=i[t];return St(u,function(e,r){var i=e.invoke(r,u);return n&&(e.OFFSET=i,Wt.optional(function(){e.assert(r,i+">=0","invalid "+t)})),i})}return n&&a?Et(function(t,e){return t.OFFSET="0",0}):null}var r=t.static,i=t.dynamic,a=function(){if(mi in r){var t=r[mi];_t(t)?t=o.getElements(o.create(t,!0)):t&&(t=o.getElements(t),Wt.command(t,"invalid elements",e.commandStr));var n=Et(function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null});return n.value=t,n}if(mi in i){var a=i[mi];return St(a,function(t,e){var n=t.shared,r=n.isBufferArgs,i=n.elements,o=t.invoke(e,a),u=e.def("null"),s=e.def(r,"(",o,")"),f=t.cond(s).then(u,"=",i,".createStream(",o,");").else(u,"=",i,".getElements(",o,");");return Wt.optional(function(){t.assert(f.else,"!"+o+"||"+u,"invalid elements")}),e.entry(f),e.exit(t.cond(s).then(i,".destroyStream(",u,");")),t.ELEMENTS=u,u})}return null}(),u=n(vi,!0);return{elements:a,primitive:function(){if(gi in r){var t=r[gi];return Wt.commandParameter(t,ve,"invalid primitve",e.commandStr),Et(function(e,n){return ve[t]})}if(gi in i){var n=i[gi];return St(n,function(t,e){var r=t.constants.primTypes,i=t.invoke(e,n);return Wt.optional(function(){t.assert(e,i+" in "+r,"invalid primitive, must be one of "+Object.keys(ve))}),e.def(r,"[",i,"]")})}return a?Mt(a)?Et(a.value?function(t,e){return e.def(t.ELEMENTS,".primType")}:function(){return ro}):new wt(a.thisDep,a.contextDep,a.propDep,function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",ro)}):null}(),count:function(){if(yi in r){var t=0|r[yi];return Wt.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),Et(function(){return t})}if(yi in i){var n=i[yi];return St(n,function(t,e){var r=t.invoke(e,n);return Wt.optional(function(){t.assert(e,"typeof "+r+'==="number"&&'+r+">=0&&"+r+"===("+r+"|0)","invalid vertex count")}),r})}if(a){if(Mt(a)){if(a)return u?new wt(u.thisDep,u.contextDep,u.propDep,function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return Wt.optional(function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")}),n}):Et(function(t,e){return e.def(t.ELEMENTS,".vertCount")});var o=Et(function(){return-1});return Wt.optional(function(){o.MISSING=!0}),o}var s=new wt(a.thisDep||u.thisDep,a.contextDep||u.contextDep,a.propDep||u.propDep,function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")});return Wt.optional(function(){s.DYNAMIC=!0}),s}return null}(),instances:n(bi,!1),offset:u}}function E(t,e){var n=t.static,i=t.dynamic,o={};return et.forEach(function(t){function a(e,r){if(t in n){var a=e(n[t]);o[u]=Et(function(){return a})}else if(t in i){var s=i[t];o[u]=St(s,function(t,e){return r(t,e,t.invoke(e,s))})}}var u=m(t);switch(t){case Vr:case Ir:case Br:case ri:case Hr:case si:case Kr:case ti:case ei:case Xr:return a(function(n){return Wt.commandType(n,"boolean",t,e.commandStr),n},function(e,n,r){return Wt.optional(function(){e.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)}),r});case Yr:return a(function(n){return Wt.commandParameter(n,xo,"invalid "+t,e.commandStr),xo[n]},function(e,n,r){var i=e.constants.compareFuncs;return Wt.optional(function(){e.assert(n,r+" in "+i,"invalid "+t+", must be one of "+Object.keys(xo))}),n.def(i,"[",r,"]")});case Wr:return a(function(t){return Wt.command(V(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t},function(t,e,n){return Wt.optional(function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")}),[e.def("+",n,"[0]"),e.def("+",n,"[1]")]});case Fr:return a(function(t){Wt.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,i="dstRGB"in t?t.dstRGB:t.dst,o="dstAlpha"in t?t.dstAlpha:t.dst;return Wt.commandParameter(n,bo,u+".srcRGB",e.commandStr),Wt.commandParameter(r,bo,u+".srcAlpha",e.commandStr),Wt.commandParameter(i,bo,u+".dstRGB",e.commandStr),Wt.commandParameter(o,bo,u+".dstAlpha",e.commandStr),Wt.command(-1===_o.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",e.commandStr),[bo[n],bo[i],bo[r],bo[o]]},function(e,n,r){function i(i,a){var u=n.def('"',i,a,'" in ',r,"?",r,".",i,a,":",r,".",i);return Wt.optional(function(){e.assert(n,u+" in "+o,"invalid "+t+"."+i+a+", must be one of "+Object.keys(bo))}),u}var o=e.constants.blendFuncs;Wt.optional(function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")});var a=i("src","RGB"),u=i("dst","RGB");Wt.optional(function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+u+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var s=n.def(o,"[",a,"]"),f=n.def(o,"[",i("src","Alpha"),"]");return[s,n.def(o,"[",u,"]"),f,n.def(o,"[",i("dst","Alpha"),"]")]});case Ur:return a(function(n){return"string"==typeof n?(Wt.commandParameter(n,Q,"invalid "+t,e.commandStr),[Q[n],Q[n]]):"object"==typeof n?(Wt.commandParameter(n.rgb,Q,t+".rgb",e.commandStr),Wt.commandParameter(n.alpha,Q,t+".alpha",e.commandStr),[Q[n.rgb],Q[n.alpha]]):void Wt.commandRaise("invalid blend.equation",e.commandStr)},function(e,n,r){var i=e.constants.blendEquations,o=n.def(),a=n.def(),u=e.cond("typeof ",r,'==="string"');return Wt.optional(function(){function n(t,n,r){e.assert(t,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(Q))}n(u.then,t,r),e.assert(u.else,r+"&&typeof "+r+'==="object"',"invalid "+t),n(u.else,t+".rgb",r+".rgb"),n(u.else,t+".alpha",r+".alpha")}),u.then(o,"=",a,"=",i,"[",r,"];"),u.else(o,"=",i,"[",r,".rgb];",a,"=",i,"[",r,".alpha];"),n(u),[o,a]});case qr:return a(function(t){return Wt.command(V(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),R(4,function(e){return+t[e]})},function(t,e,n){return Wt.optional(function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")}),R(4,function(t){return e.def("+",n,"[",t,"]")})});case ii:return a(function(t){return Wt.commandType(t,"number",u,e.commandStr),0|t},function(t,e,n){return Wt.optional(function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")}),e.def(n,"|0")});case oi:return a(function(n){Wt.commandType(n,"object",u,e.commandStr);var r=n.cmp||"keep",i=n.ref||0,o="mask"in n?n.mask:-1;return Wt.commandParameter(r,xo,t+".cmp",e.commandStr),Wt.commandType(i,"number",t+".ref",e.commandStr),Wt.commandType(o,"number",t+".mask",e.commandStr),[xo[r],i,o]},function(t,e,n){var r=t.constants.compareFuncs;return Wt.optional(function(){function i(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")}),[e.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",lo),e.def(n,".ref|0"),e.def('"mask" in ',n,"?",n,".mask|0:-1")]});case ai:case ui:return a(function(n){Wt.commandType(n,"object",u,e.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",o=n.zpass||"keep";return Wt.commandParameter(r,wo,t+".fail",e.commandStr),Wt.commandParameter(i,wo,t+".zfail",e.commandStr),Wt.commandParameter(o,wo,t+".zpass",e.commandStr),[t===ui?oo:io,wo[r],wo[i],wo[o]]},function(e,n,r){function i(i){return Wt.optional(function(){e.assert(n,'!("'+i+'" in '+r+")||("+r+"."+i+" in "+o+")","invalid "+t+"."+i+", must be one of "+Object.keys(wo))}),n.def('"',i,'" in ',r,"?",o,"[",r,".",i,"]:",lo)}var o=e.constants.stencilOps;return Wt.optional(function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}),[t===ui?oo:io,i("fail"),i("zfail"),i("zpass")]});case Jr:return a(function(t){Wt.commandType(t,"object",u,e.commandStr);var n=0|t.factor,r=0|t.units;return Wt.commandType(n,"number",u+".factor",e.commandStr),Wt.commandType(r,"number",u+".units",e.commandStr),[n,r]},function(e,n,r){return Wt.optional(function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}),[n.def(r,".factor|0"),n.def(r,".units|0")]});case $r:return a(function(t){var n=0;return"front"===t?n=io:"back"===t&&(n=oo),Wt.command(!!n,u,e.commandStr),n},function(t,e,n){return Wt.optional(function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")}),e.def(n,'==="front"?',io,":",oo)});case Zr:return a(function(t){return Wt.command("number"==typeof t&&t>=r.lineWidthDims[0]&&t<=r.lineWidthDims[1],"invalid line width, must positive number between "+r.lineWidthDims[0]+" and "+r.lineWidthDims[1],e.commandStr),t},function(t,e,n){return Wt.optional(function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+r.lineWidthDims[0]+"&&"+n+"<="+r.lineWidthDims[1],"invalid line width")}),n});case Qr:return a(function(t){return Wt.commandParameter(t,Eo,u,e.commandStr),Eo[t]},function(t,e,n){return Wt.optional(function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),e.def(n+'==="cw"?'+ao+":"+uo)});case Gr:return a(function(t){return Wt.command(V(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map(function(t){return!!t})},function(t,e,n){return Wt.optional(function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")}),R(4,function(t){return"!!"+n+"["+t+"]"})});case ni:return a(function(t){Wt.command("object"==typeof t&&t,u,e.commandStr);var n="value"in t?t.value:1,r=!!t.invert;return Wt.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,r]},function(t,e,n){return Wt.optional(function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")}),[e.def('"value" in ',n,"?+",n,".value:1"),e.def("!!",n,".invert")]})}}),o}function S(t,e){var n=t.static,r=t.dynamic,i={};return Object.keys(n).forEach(function(t){var r,o=n[t];if("number"==typeof o||"boolean"==typeof o)r=Et(function(){return o});else if("function"==typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?r=Et(function(t){return t.link(o)}):"framebuffer"===a||"framebufferCube"===a?(Wt.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=Et(function(t){return t.link(o.color[0])})):Wt.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else V(o)?r=Et(function(e){return e.global.def("[",R(o.length,function(n){return Wt.command("number"==typeof o[n]||"boolean"==typeof o[n],"invalid uniform "+t,e.commandStr),o[n]}),"]")}):Wt.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=o,i[t]=r}),Object.keys(r).forEach(function(t){var e=r[t];i[t]=St(e,function(t,n){return t.invoke(n,e)})}),i}function k(t,n){var r=t.static,o=t.dynamic,a={};return Object.keys(r).forEach(function(t){var o=r[t],u=e.id(t),s=new $;if(_t(o))s.state=Or,s.buffer=i.getBuffer(i.create(o,Ai,!1,!0)),s.type=0;else{var f=i.getBuffer(o);if(f)s.state=Or,s.buffer=f,s.type=0;else if(Wt.command("object"==typeof o&&o,"invalid data for attribute "+t,n.commandStr),o.constant){var c=o.constant;s.buffer="null",s.state=jr,"number"==typeof c?s.x=c:(Wt.command(V(c)&&c.length>0&&c.length<=4,"invalid constant for attribute "+t,n.commandStr),Cr.forEach(function(t,e){e<c.length&&(s[t]=c[e])}))}else{f=_t(o.buffer)?i.getBuffer(i.create(o.buffer,Ai,!1,!0)):i.getBuffer(o.buffer),Wt.command(!!f,'missing buffer for attribute "'+t+'"',n.commandStr);var l=0|o.offset;Wt.command(l>=0,'invalid offset for attribute "'+t+'"',n.commandStr);var h=0|o.stride;Wt.command(h>=0&&h<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',n.commandStr);var d=0|o.size;Wt.command(!("size"in o)||d>0&&d<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',n.commandStr);var p=!!o.normalized,m=0;"type"in o&&(Wt.commandParameter(o.type,fe,"invalid type for attribute "+t,n.commandStr),m=fe[o.type]);var g=0|o.divisor;"divisor"in o&&(Wt.command(0===g||Z,'cannot specify divisor for attribute "'+t+'", instancing not supported',n.commandStr),Wt.command(g>=0,'invalid divisor for attribute "'+t+'"',n.commandStr)),Wt.optional(function(){var e=n.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(o).forEach(function(n){Wt.command(r.indexOf(n)>=0,'unknown parameter "'+n+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",e)})}),s.buffer=f,s.state=Or,s.size=d,s.normalized=p,s.type=m||f.dtype,s.offset=l,s.stride=h,s.divisor=g}}a[t]=Et(function(t,e){var n=t.attribCache;if(u in n)return n[u];var r={isStream:!1};return Object.keys(s).forEach(function(t){r[t]=s[t]}),s.buffer&&(r.buffer=t.link(s.buffer),r.type=r.type||r.buffer+".dtype"),n[u]=r,r})}),Object.keys(o).forEach(function(t){var e=o[t];a[t]=St(e,function(n,r){function i(t){r(f[t],"=",o,".",t,"|0;")}var o=n.invoke(r,e),a=n.shared,u=a.isBufferArgs,s=a.buffer;Wt.optional(function(){n.assert(r,o+"&&(typeof "+o+'==="object"||typeof '+o+'==="function")&&('+u+"("+o+")||"+s+".getBuffer("+o+")||"+s+".getBuffer("+o+".buffer)||"+u+"("+o+'.buffer)||("constant" in '+o+"&&(typeof "+o+'.constant==="number"||'+a.isArrayLike+"("+o+".constant))))",'invalid dynamic attribute "'+t+'"')});var f={isStream:r.def(!1)},c=new $;c.state=Or,Object.keys(c).forEach(function(t){f[t]=r.def(""+c[t])});var l=f.buffer,h=f.type;return r("if(",u,"(",o,")){",f.isStream,"=true;",l,"=",s,".createStream(",Ai,",",o,");",h,"=",l,".dtype;","}else{",l,"=",s,".getBuffer(",o,");","if(",l,"){",h,"=",l,".dtype;",'}else if("constant" in ',o,"){",f.state,"=",jr,";","if(typeof "+o+'.constant === "number"){',f[Cr[0]],"=",o,".constant;",Cr.slice(1).map(function(t){return f[t]}).join("="),"=0;","}else{",Cr.map(function(t,e){return f[t]+"="+o+".constant.length>="+e+"?"+o+".constant["+e+"]:0;"}).join(""),"}}else{","if(",u,"(",o,".buffer)){",l,"=",s,".createStream(",Ai,",",o,".buffer);","}else{",l,"=",s,".getBuffer(",o,".buffer);","}",h,'="type" in ',o,"?",a.glTypes,"[",o,".type]:",l,".dtype;",f.normalized,"=!!",o,".normalized;"),i("size"),i("offset"),i("stride"),i("divisor"),r("}}"),r.exit("if(",f.isStream,"){",s,".destroyStream(",l,");","}"),f})}),a}function A(t){var e=t.static,n=t.dynamic,r={};return Object.keys(e).forEach(function(t){var n=e[t];r[t]=Et(function(t,e){return"number"==typeof n||"boolean"==typeof n?""+n:t.link(n)})}),Object.keys(n).forEach(function(t){var e=n[t];r[t]=St(e,function(t,n){return t.invoke(n,e)})}),r}function T(t,e,n,r,i){function o(t){var e=f[t];e&&(l[t]=e)}var a=t.static,u=t.dynamic;Wt.optional(function(){function t(t){Object.keys(t).forEach(function(t){Wt.command(e.indexOf(t)>=0,'unknown parameter "'+t+'"',i.commandStr)})}var e=[hi,di,pi,mi,gi,vi,yi,bi,li].concat(et);t(a),t(u)});var s=_(t,i),f=x(t,s,i),c=M(t,i),l=E(t,i),h=w(t,i);o(ci),o(m(fi));var d=Object.keys(l).length>0,p={framebuffer:s,draw:c,shader:h,state:l,dirty:d};return p.profile=b(t,i),p.uniforms=S(n,i),p.attributes=k(e,i),p.context=A(r,i),p}function C(t,e,n){var r=t.shared.context,i=t.scope();Object.keys(n).forEach(function(o){e.save(r,"."+o);var a=n[o];i(r,".",o,"=",a.append(t,e),";")}),e(i)}function N(t,e,n,r){var i,o=t.shared,a=o.gl,u=o.framebuffer;K&&(i=e.def(o.extensions,".webgl_draw_buffers"));var s,f=t.constants,c=f.drawBuffer,l=f.backBuffer;s=n?n.append(t,e):e.def(u,".next"),r||e("if(",s,"!==",u,".cur){"),e("if(",s,"){",a,".bindFramebuffer(",yo,",",s,".framebuffer);"),K&&e(i,".drawBuffersWEBGL(",c,"[",s,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",yo,",null);"),K&&e(i,".drawBuffersWEBGL(",l,");"),e("}",u,".cur=",s,";"),r||e("}")}function O(t,e,n){var r=t.shared,i=r.gl,o=t.current,a=t.next,u=r.current,s=r.next,f=t.cond(u,".dirty");et.forEach(function(e){var r=m(e);if(!(r in n.state)){var c,l;if(r in a){c=a[r],l=o[r];var h=R(J[r].length,function(t){return f.def(c,"[",t,"]")});f(t.cond(h.map(function(t,e){return t+"!=="+l+"["+e+"]"}).join("||")).then(i,".",rt[r],"(",h,");",h.map(function(t,e){return l+"["+e+"]="+t}).join(";"),";"))}else{c=f.def(s,".",r);var d=t.cond(c,"!==",u,".",r);f(d),r in nt?d(t.cond(c).then(i,".enable(",nt[r],");").else(i,".disable(",nt[r],");"),u,".",r,"=",c,";"):d(i,".",rt[r],"(",c,");",u,".",r,"=",c,";")}}}),0===Object.keys(n.state).length&&f(u,".dirty=false;"),e(f)}function j(t,e,n,r){var i=t.shared,o=t.current,a=i.current,u=i.gl;xt(Object.keys(n)).forEach(function(i){var s=n[i];if(!r||r(s)){var f=s.append(t,e);if(nt[i]){var c=nt[i];Mt(s)?f?e(u,".enable(",c,");"):e(u,".disable(",c,");"):e(t.cond(f).then(u,".enable(",c,");").else(u,".disable(",c,");")),e(a,".",i,"=",f,";")}else if(V(f)){var l=o[i];e(u,".",rt[i],"(",f,");",f.map(function(t,e){return l+"["+e+"]="+t}).join(";"),";")}else e(u,".",rt[i],"(",f,");",a,".",i,"=",f,";")}})}function D(t,e){Z&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function L(t,e,n,r,i){function o(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function a(t){t(f=e.def(),"=",o(),";"),"string"==typeof i?t(p,".count+=",i,";"):t(p,".count++;"),d&&(r?t(c=e.def(),"=",g,".getNumPendingQueries();"):t(g,".beginQuery(",p,");"))}function u(t){t(p,".cpuTime+=",o(),"-",f,";"),d&&(r?t(g,".pushScopeStats(",c,",",g,".getNumPendingQueries(),",p,");"):t(g,".endQuery();"))}function s(t){var n=e.def(m,".profile");e(m,".profile=",t,";"),e.exit(m,".profile=",n,";")}var f,c,l,h=t.shared,p=t.stats,m=h.current,g=h.timer,y=n.profile;if(y){if(Mt(y))return void(y.enable?(a(e),u(e.exit),s("true")):s("false"));s(l=y.append(t,e))}else l=e.def(m,".profile");var v=t.block();a(v),e("if(",l,"){",v,"}");var b=t.block();u(b),e.exit("if(",l,"){",b,"}")}function P(t,e,n,r,i){function o(t){switch(t){case Ui:case Wi:case $i:return 2;case Fi:case Xi:case Qi:return 3;case Hi:case Gi:case Zi:return 4;default:return 1}}function a(n,r,i){function o(){e("if(!",c,".buffer){",s,".enableVertexAttribArray(",f,");}");var n,o=i.type;if(n=i.size?e.def(i.size,"||",r):r,e("if(",c,".type!==",o,"||",c,".size!==",n,"||",p.map(function(t){return c+"."+t+"!=="+i[t]}).join("||"),"){",s,".bindBuffer(",Ai,",",h,".buffer);",s,".vertexAttribPointer(",[f,n,o,i.normalized,i.stride,i.offset],");",c,".type=",o,";",c,".size=",n,";",p.map(function(t){return c+"."+t+"="+i[t]+";"}).join(""),"}"),Z){var a=i.divisor;e("if(",c,".divisor!==",a,"){",t.instancing,".vertexAttribDivisorANGLE(",[f,a],");",c,".divisor=",a,";}")}}function a(){e("if(",c,".buffer){",s,".disableVertexAttribArray(",f,");","}if(",Cr.map(function(t,e){return c+"."+t+"!=="+d[e]}).join("||"),"){",s,".vertexAttrib4f(",f,",",d,");",Cr.map(function(t,e){return c+"."+t+"="+d[e]+";"}).join(""),"}")}var s=u.gl,f=e.def(n,".location"),c=e.def(u.attributes,"[",f,"]"),l=i.state,h=i.buffer,d=[i.x,i.y,i.z,i.w],p=["buffer","normalized","offset","stride"];l===Or?o():l===jr?a():(e("if(",l,"===",Or,"){"),o(),e("}else{"),a(),e("}"))}var u=t.shared;r.forEach(function(r){var u,s=r.name,f=n.attributes[s];if(f){if(!i(f))return;u=f.append(t,e)}else{if(!i(So))return;var c=t.scopeAttrib(s);Wt.optional(function(){t.assert(e,c+".state","missing attribute "+s)}),u={},Object.keys(new $).forEach(function(t){u[t]=e.def(c,".",t)})}a(t.link(r),o(r.info.type),u)})}function z(t,n,r,i,o){for(var a,u=t.shared,s=u.gl,f=0;f<i.length;++f){var c,l=i[f],h=l.name,d=l.info.type,p=r.uniforms[h],m=t.link(l)+".location";if(p){if(!o(p))continue;if(Mt(p)){var g=p.value;if(Wt.command(null!==g&&void 0!==g,'missing uniform "'+h+'"',t.commandStr),d===eo||d===no){Wt.command("function"==typeof g&&(d===eo&&("texture2d"===g._reglType||"framebuffer"===g._reglType)||d===no&&("textureCube"===g._reglType||"framebufferCube"===g._reglType)),"invalid texture for uniform "+h,t.commandStr);var y=t.link(g._texture||g.color[0]._texture);n(s,".uniform1i(",m,",",y+".bind());"),n.exit(y,".unbind();")}else if(d===Ki||d===Ji||d===to){Wt.optional(function(){Wt.command(V(g),"invalid matrix for uniform "+h,t.commandStr),Wt.command(d===Ki&&4===g.length||d===Ji&&9===g.length||d===to&&16===g.length,"invalid length for matrix uniform "+h,t.commandStr)});var v=t.global.def("new Float32Array(["+Array.prototype.slice.call(g)+"])"),b=2;d===Ji?b=3:d===to&&(b=4),n(s,".uniformMatrix",b,"fv(",m,",false,",v,");")}else{switch(d){case qi:Wt.commandType(g,"number","uniform "+h,t.commandStr),a="1f";break;case Ui:Wt.command(V(g)&&2===g.length,"uniform "+h,t.commandStr),a="2f";break;case Fi:Wt.command(V(g)&&3===g.length,"uniform "+h,t.commandStr),a="3f";break;case Hi:Wt.command(V(g)&&4===g.length,"uniform "+h,t.commandStr),a="4f";break;case Vi:Wt.commandType(g,"boolean","uniform "+h,t.commandStr),a="1i";break;case Yi:Wt.commandType(g,"number","uniform "+h,t.commandStr),a="1i";break;case $i:case Wi:Wt.command(V(g)&&2===g.length,"uniform "+h,t.commandStr),a="2i";break;case Qi:case Xi:Wt.command(V(g)&&3===g.length,"uniform "+h,t.commandStr),a="3i";break;case Zi:case Gi:Wt.command(V(g)&&4===g.length,"uniform "+h,t.commandStr),a="4i"}n(s,".uniform",a,"(",m,",",V(g)?Array.prototype.slice.call(g):g,");")}continue}c=p.append(t,n)}else{if(!o(So))continue;c=n.def(u.uniforms,"[",e.id(h),"]")}d===eo?n("if(",c,"&&",c,'._reglType==="framebuffer"){',c,"=",c,".color[0];","}"):d===no&&n("if(",c,"&&",c,'._reglType==="framebufferCube"){',c,"=",c,".color[0];","}"),Wt.optional(function(){function e(e,r){t.assert(n,e,'bad data or missing for uniform "'+h+'".  '+r)}function r(t){e("typeof "+c+'==="'+t+'"',"invalid type, expected "+t)}function i(n,r){e(u.isArrayLike+"("+c+")&&"+c+".length==="+n,"invalid vector, should have length "+n,t.commandStr)}function o(n){e("typeof "+c+'==="function"&&'+c+'._reglType==="texture'+(n===Ci?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(d){case Yi:r("number");break;case Wi:i(2);break;case Xi:i(3);break;case Gi:i(4);break;case qi:r("number");break;case Ui:i(2);break;case Fi:i(3);break;case Hi:i(4);break;case Vi:r("boolean");break;case $i:i(2);break;case Qi:i(3);break;case Zi:case Ki:i(4);break;case Ji:i(9);break;case to:i(16);break;case eo:o(Ci);break;case no:o(Ni)}});var _=1;switch(d){case eo:case no:var x=n.def(c,"._texture");n(s,".uniform1i(",m,",",x,".bind());"),n.exit(x,".unbind();");continue;case Yi:case Vi:a="1i";break;case Wi:case $i:a="2i",_=2;break;case Xi:case Qi:a="3i",_=3;break;case Gi:case Zi:a="4i",_=4;break;case qi:a="1f";break;case Ui:a="2f",_=2;break;case Fi:a="3f",_=3;break;case Hi:a="4f",_=4;break;case Ki:a="Matrix2fv";break;case Ji:a="Matrix3fv";break;case to:a="Matrix4fv"}if(n(s,".uniform",a,"(",m,","),"M"===a.charAt(0)){var w=Math.pow(d-Ki+2,2),M=t.global.def("new Float32Array(",w,")");n("false,(Array.isArray(",c,")||",c," instanceof Float32Array)?",c,":(",R(w,function(t){return M+"["+t+"]="+c+"["+t+"]"}),",",M,")")}else n(_>1?R(_,function(t){return c+"["+t+"]"}):c);n(");")}}function B(t,e,n,r){function i(i){var o=c[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(t,n):o.append(t,e):e.def(f,".",i)}function o(){function t(){n(g,".drawElementsInstancedANGLE(",[h,p,y,d+"<<(("+y+"-"+Nr+")>>1)",m],");")}function e(){n(g,".drawArraysInstancedANGLE(",[h,d,p,m],");")}l?v?t():(n("if(",l,"){"),t(),n("}else{"),e(),n("}")):e()}function a(){function t(){n(s+".drawElements("+[h,p,y,d+"<<(("+y+"-"+Nr+")>>1)"]+");")}function e(){n(s+".drawArrays("+[h,d,p]+");")}l?v?t():(n("if(",l,"){"),t(),n("}else{"),e(),n("}")):e()}var u=t.shared,s=u.gl,f=u.draw,c=r.draw,l=function(){var i,o=c.elements,a=e;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(a=n),i=o.append(t,a)):i=a.def(f,".",mi),i&&a("if("+i+")"+s+".bindBuffer("+Ti+","+i+".buffer.buffer);"),i}(),h=i(gi),d=i(vi),p=function(){var i,o=c.count,a=e;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(a=n),i=o.append(t,a),Wt.optional(function(){o.MISSING&&t.assert(e,"false","missing vertex count"),o.DYNAMIC&&t.assert(a,i+">=0","missing vertex count")})):(i=a.def(f,".",yi),Wt.optional(function(){t.assert(a,i+">=0","missing vertex count")})),i}();if("number"==typeof p){if(0===p)return}else n("if(",p,"){"),n.exit("}");var m,g;Z&&(m=i(bi),g=t.instancing);var y=l+".type",v=c.elements&&Mt(c.elements);Z&&("number"!=typeof m||m>=0)?"string"==typeof m?(n("if(",m,">0){"),o(),n("}else if(",m,"<0){"),a(),n("}")):o():a()}function I(t,e,n,r,i){var o=v(),a=o.proc("body",i);return Wt.optional(function(){o.commandStr=e.commandStr,o.command=o.link(e.commandStr)}),Z&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),t(o,a,n,r),o.compile().body}function q(t,e,n,r){D(t,e),P(t,e,n,r.attributes,function(){return!0}),z(t,e,n,r.uniforms,function(){return!0}),B(t,e,e,n)}function U(t,e){var n=t.proc("draw",1);D(t,n),C(t,n,e.context),N(t,n,e.framebuffer),O(t,n,e),j(t,n,e.state),L(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)q(t,n,e,e.shader.program);else{var i=t.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",t.link(function(n){return I(q,t,e,n,1)}),"(",r,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}function F(t,e,n,r){function i(){return!0}t.batchId="a1",D(t,e),P(t,e,n,r.attributes,i),z(t,e,n,r.uniforms,i),B(t,e,e,n)}function H(t,e,n,r){function i(t){return t.contextDep&&a||t.propDep}function o(t){return!i(t)}D(t,e);var a=n.contextDep,u=e.def(),s=e.def();t.shared.props=s,t.batchId=u;var f=t.scope(),c=t.scope();if(e(f.entry,"for(",u,"=0;",u,"<","a1",";++",u,"){",s,"=","a0","[",u,"];",c,"}",f.exit),n.needsContext&&C(t,c,n.context),n.needsFramebuffer&&N(t,c,n.framebuffer),j(t,c,n.state,i),n.profile&&i(n.profile)&&L(t,c,n,!1,!0),r)P(t,f,n,r.attributes,o),P(t,c,n,r.attributes,i),z(t,f,n,r.uniforms,o),z(t,c,n,r.uniforms,i),B(t,f,c,n);else{var l=t.global.def("{}"),h=n.shader.progVar.append(t,c),d=c.def(h,".id"),p=c.def(l,"[",d,"]");c(t.shared.gl,".useProgram(",h,".program);","if(!",p,"){",p,"=",l,"[",d,"]=",t.link(function(e){return I(F,t,n,e,2)}),"(",h,");}",p,".call(this,a0[",u,"],",u,");")}}function Y(t,e){function n(t){return t.contextDep&&i||t.propDep}var r=t.proc("batch",2);t.batchId="0",D(t,r);var i=!1,o=!0;Object.keys(e.context).forEach(function(t){i=i||e.context[t].propDep}),i||(C(t,r,e.context),o=!1);var a=e.framebuffer,u=!1;a?(a.propDep?i=u=!0:a.contextDep&&i&&(u=!0),u||N(t,r,a)):N(t,r,null),e.state.viewport&&e.state.viewport.propDep&&(i=!0),O(t,r,e),j(t,r,e.state,function(t){return!n(t)}),e.profile&&n(e.profile)||L(t,r,e,!1,"a1"),e.contextDep=i,e.needsContext=o,e.needsFramebuffer=u;var s=e.shader.progVar;if(s.contextDep&&i||s.propDep)H(t,r,e,null);else{var f=s.append(t,r);if(r(t.shared.gl,".useProgram(",f,".program);"),e.shader.program)H(t,r,e,e.shader.program);else{var c=t.global.def("{}"),l=r.def(f,".id"),h=r.def(c,"[",l,"]");r(t.cond(h).then(h,".call(this,a0,a1);").else(h,"=",c,"[",l,"]=",t.link(function(n){return I(H,t,e,n,2)}),"(",f,");",h,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&r(t.shared.current,".dirty=true;")}function W(t,n){function r(e){var r=n.shader[e];r&&i.set(o.shader,"."+e,r.append(t,i))}var i=t.proc("scope",3);t.batchId="a2";var o=t.shared,a=o.current;C(t,i,n.context),n.framebuffer&&n.framebuffer.append(t,i),xt(Object.keys(n.state)).forEach(function(e){var r=n.state[e].append(t,i);V(r)?r.forEach(function(n,r){i.set(t.next[e],"["+r+"]",n)}):i.set(o.next,"."+e,r)}),L(t,i,n,!0,!0),[mi,vi,yi,bi,gi].forEach(function(e){var r=n.draw[e];r&&i.set(o.draw,"."+e,""+r.append(t,i))}),Object.keys(n.uniforms).forEach(function(r){i.set(o.uniforms,"["+e.id(r)+"]",n.uniforms[r].append(t,i))}),Object.keys(n.attributes).forEach(function(e){var r=n.attributes[e].append(t,i),o=t.scopeAttrib(e);Object.keys(new $).forEach(function(t){i.set(o,"."+t,r[t])})}),r(di),r(pi),Object.keys(n.state).length>0&&(i(a,".dirty=true;"),i.exit(a,".dirty=true;")),i("a1(",t.shared.context,",a0,",t.batchId,");")}function X(t){if("object"==typeof t&&!V(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(Vt.isDynamic(t[e[n]]))return!0;return!1}}function G(t,e,n){var r=e.static[n];if(r&&X(r)){var i=t.global,o=Object.keys(r),a=!1,u=!1,s=!1,f=t.global.def("{}");o.forEach(function(e){var n=r[e];if(Vt.isDynamic(n)){"function"==typeof n&&(n=r[e]=Vt.unbox(n));var o=St(n,null);a=a||o.thisDep,s=s||o.propDep,u=u||o.contextDep}else{switch(i(f,".",e,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(t.link(n))}i(";")}}),e.dynamic[n]=new Vt.DynamicVariable(zr,{thisDep:a,contextDep:u,propDep:s,ref:f,append:function(t,e){o.forEach(function(n){var i=r[n];if(Vt.isDynamic(i)){var o=t.invoke(e,i);e(f,".",n,"=",o,";")}})}}),delete e.static[n]}}var $=f.Record,Q={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(Q.min=so,Q.max=fo);var Z=n.angle_instanced_arrays,K=n.webgl_draw_buffers,J={dirty:!0,profile:p.profile},tt={},et=[],nt={},rt={};g(Br,Ri),g(Ir,ji),y(qr,"blendColor",[0,0,0,0]),y(Ur,"blendEquationSeparate",[mo,mo]),y(Fr,"blendFuncSeparate",[po,ho,po,ho]),g(Hr,Li,!0),y(Yr,"depthFunc",go),y(Wr,"depthRange",[0,1]),y(Xr,"depthMask",!0),y(Gr,Gr,[!0,!0,!0,!0]),g(Vr,Oi),y($r,"cullFace",oo),y(Qr,Qr,uo),y(Zr,Zr,1),g(Kr,zi),y(Jr,"polygonOffset",[0,0]),g(ti,Bi),g(ei,Ii),y(ni,"sampleCoverage",[1,!1]),g(ri,Di),y(ii,"stencilMask",-1),y(oi,"stencilFunc",[co,0,-1]),y(ai,"stencilOpSeparate",[io,lo,lo,lo]),y(ui,"stencilOpSeparate",[oo,lo,lo,lo]),g(si,Pi),y(fi,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),y(ci,ci,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var it={gl:t,context:h,strings:e,next:tt,current:J,draw:l,elements:o,buffer:i,shader:c,attributes:f.state,uniforms:s,framebuffer:u,extensions:n,timer:d,isBufferArgs:_t},ot={primTypes:ve,compareFuncs:xo,blendFuncs:bo,blendEquations:Q,stencilOps:wo,glTypes:fe,orientationType:Eo};Wt.optional(function(){it.isArrayLike=V}),K&&(ot.backBuffer=[oo],ot.drawBuffer=R(r.maxDrawbuffers,function(t){return 0===t?[0]:R(t,function(t){return vo+t})}));var at=0;return{next:tt,current:J,procs:function(){var e=v(),n=e.proc("poll"),i=e.proc("refresh"),o=e.block();n(o),i(o);var a=e.shared,u=a.gl,s=a.next,f=a.current;o(f,".dirty=false;"),N(e,n),N(e,i,null,!0);var c,l=t.getExtension("angle_instanced_arrays");l&&(c=e.link(l));for(var h=0;h<r.maxAttributes;++h){var d=i.def(a.attributes,"[",h,"]"),p=e.cond(d,".buffer");p.then(u,".enableVertexAttribArray(",h,");",u,".bindBuffer(",Ai,",",d,".buffer.buffer);",u,".vertexAttribPointer(",h,",",d,".size,",d,".type,",d,".normalized,",d,".stride,",d,".offset);").else(u,".disableVertexAttribArray(",h,");",u,".vertexAttrib4f(",h,",",d,".x,",d,".y,",d,".z,",d,".w);",d,".buffer=null;"),i(p),l&&i(c,".vertexAttribDivisorANGLE(",h,",",d,".divisor);")}return Object.keys(nt).forEach(function(t){var r=nt[t],a=o.def(s,".",t),c=e.block();c("if(",a,"){",u,".enable(",r,")}else{",u,".disable(",r,")}",f,".",t,"=",a,";"),i(c),n("if(",a,"!==",f,".",t,"){",c,"}")}),Object.keys(rt).forEach(function(t){var r,a,c=rt[t],l=J[t],h=e.block();if(h(u,".",c,"("),V(l)){var d=l.length;r=e.global.def(s,".",t),a=e.global.def(f,".",t),h(R(d,function(t){return r+"["+t+"]"}),");",R(d,function(t){return a+"["+t+"]="+r+"["+t+"];"}).join("")),n("if(",R(d,function(t){return r+"["+t+"]!=="+a+"["+t+"]"}).join("||"),"){",h,"}")}else r=o.def(s,".",t),a=o.def(f,".",t),h(r,");",f,".",t,"=",r,";"),n("if(",r,"!==",a,"){",h,"}");i(h)}),e.compile()}(),compile:function(t,e,n,r,i){var o=v();o.stats=o.link(i),Object.keys(e.static).forEach(function(t){G(o,e,t)}),ki.forEach(function(e){G(o,t,e)});var a=T(t,e,n,r,o);return U(o,a),W(o,a),Y(o,a),o.compile()}}}function At(){return{bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}function Tt(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}var Ct={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Nt=function(t){return Object.prototype.toString.call(t)in Ct},Ot=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t},jt=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"],Rt=33071,Dt=9728,Lt=9984,Pt=9985,zt=9986,Bt=9987,It=5126,qt=32819,Ut=32820,Ft=33635,Ht=34042,Yt={};Yt[5120]=Yt[5121]=1,Yt[5122]=Yt[5123]=Yt[36193]=Yt[Ft]=Yt[qt]=Yt[Ut]=2,Yt[5124]=Yt[5125]=Yt[It]=Yt[Ht]=4;var Wt=Ot(n,{optional:function(t){t()},raise:e,commandRaise:m,command:function(t,e,n){t||m(e,n||f())},parameter:function(t,n,i){t in n||e("unknown parameter ("+t+")"+r(i)+". possible values: "+Object.keys(n).join())},commandParameter:function(t,e,n,i){t in e||m("unknown parameter ("+t+")"+r(n)+". possible values: "+Object.keys(e).join(),i||f())},constructor:function(t){Object.keys(t).forEach(function(t){jt.indexOf(t)<0&&e('invalid regl constructor argument "'+t+'". must be one of '+jt)})},type:function(t,n,i){typeof t!==n&&e("invalid parameter type"+r(i)+". expected "+n+", got "+typeof t)},commandType:g,isTypedArray:function(t,n){Nt(t)||e("invalid parameter type"+r(n)+". must be a typed array")},nni:function(t,n){t>=0&&(0|t)===t||e("invalid parameter type, ("+t+")"+r(n)+". must be a nonnegative integer")},oneOf:i,shaderError:function(t,e,r,i,a){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var u=t.getShaderInfoLog(e),s=i===t.FRAGMENT_SHADER?"fragment":"vertex";g(r,"string",s+" shader source must be a string",a);var f=l(r,a),c=h(u);d(f,c),Object.keys(f).forEach(function(t){function e(t,e){r.push(t),i.push(e||"")}var n=f[t];if(n.hasErrors){var r=[""],i=[""];e("file number "+t+": "+n.name+"\n","color:red;text-decoration:underline;font-weight:bold"),n.lines.forEach(function(t){if(t.errors.length>0){e(o(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),e(t.line+"\n","color:red; background-color:yellow; font-weight:bold");var n=0;t.errors.forEach(function(r){var i=r.message,a=/^\s*\'(.*)\'\s*\:\s*(.*)$/.exec(i);if(a){var u=a[1];switch(i=a[2],u){case"assign":u="="}n=Math.max(t.line.indexOf(u,n),0)}else n=0;e(o("| ",6)),e(o("^^^",n+3)+"\n","font-weight:bold"),e(o("| ",6)),e(i+"\n","font-weight:bold")}),e(o("| ",6)+"\n")}else e(o(t.number,4)+"|  "),e(t.line+"\n","color:red")}),"undefined"!=typeof document?(i[0]=r.join("%c"),console.log.apply(console,i)):console.log(r.join(""))}}),n.raise("Error compiling "+s+" shader, "+f[0].name)}},linkError:function(t,e,r,i,o){if(!t.getProgramParameter(e,t.LINK_STATUS)){var a=t.getProgramInfoLog(e),u=l(r,o),s='Error linking program with vertex shader, "'+l(i,o)[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!=typeof document?console.log("%c"+s+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(s+"\n"+a),n.raise(s)}},callSite:c,saveCommandRef:p,saveDrawInfo:function(t,e,n,r){function i(t){return t?r.id(t):0}function o(t,e){Object.keys(e).forEach(function(e){t[r.id(e)]=!0})}p(t),t._fragId=i(t.static.frag),t._vertId=i(t.static.vert);var a=t._uniformSet={};o(a,e.static),o(a,e.dynamic);var u=t._attributeSet={};o(u,n.static),o(u,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic},framebufferFormat:function(t,e,n){t.texture?i(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):i(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:f,texture2D:function(t,e,r){var i,o=e.width,a=e.height,u=e.channels;n(o>0&&o<=r.maxTextureSize&&a>0&&a<=r.maxTextureSize,"invalid texture shape"),t.wrapS===Rt&&t.wrapT===Rt||n(v(o)&&v(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==o&&1!==a&&n(t.minFilter!==Lt&&t.minFilter!==zt&&t.minFilter!==Pt&&t.minFilter!==Bt,"min filter requires mipmap"):(n(v(o)&&v(a),"texture must be a square power of 2 to support mipmapping"),n(e.mipmask===(o<<1)-1,"missing or incomplete mipmap data")),e.type===It&&(r.extensions.indexOf("oes_texture_float_linear")<0&&n(t.minFilter===Dt&&t.magFilter===Dt,"filter not supported, must enable oes_texture_float_linear"),n(!t.genMipmaps,"mipmap generation not supported with float textures"));var s=e.images;for(i=0;i<16;++i)if(s[i]){var f=o>>i,c=a>>i;n(e.mipmask&1<<i,"missing mipmap data");var l=s[i];if(n(l.width===f&&l.height===c,"invalid shape for mip images"),n(l.format===e.format&&l.internalformat===e.internalformat&&l.type===e.type,"incompatible type for mip image"),l.compressed);else if(l.data){var h=Math.ceil(y(l.type,u)*f/l.unpackAlignment)*l.unpackAlignment;n(l.data.byteLength===h*c,"invalid data for image, buffer size is inconsistent with image format")}else l.element||l.copy}else t.genMipmaps||n(0==(e.mipmask&1<<i),"extra mipmap data");e.compressed&&n(!t.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(t,e,r,i){var o=t.width,a=t.height,u=t.channels;n(o>0&&o<=i.maxTextureSize&&a>0&&a<=i.maxTextureSize,"invalid texture shape"),n(o===a,"cube map must be square"),n(e.wrapS===Rt&&e.wrapT===Rt,"wrap mode not supported by cube map");for(var s=0;s<r.length;++s){var f=r[s];n(f.width===o&&f.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(n(!f.compressed,"can not generate mipmap for compressed textures"),n(1===f.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=f.images,l=0;l<16;++l){var h=c[l];if(h){var d=o>>l,p=a>>l;n(f.mipmask&1<<l,"missing mipmap data"),n(h.width===d&&h.height===p,"invalid shape for mip images"),n(h.format===t.format&&h.internalformat===t.internalformat&&h.type===t.type,"incompatible type for mip image"),h.compressed||(h.data?n(h.data.byteLength===d*p*Math.max(y(h.type,u),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}}),Xt=0,Gt=0,Vt={DynamicVariable:b,define:function(t,e){return new b(t,w(e+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof b},unbox:function(t,e){return"function"==typeof t?new b(Gt,t):t},accessor:w},$t={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},Qt="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},Zt=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(34047));var r=1,i=1;return e.webgl_draw_buffers&&(r=t.getParameter(34852),i=t.getParameter(36063)),{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter(function(t){return!!e[t]}),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938)}},Kt=function(t){return Object.keys(t).map(function(e){return t[e]})},Jt=5120,te=5121,ee=5122,ne=5123,re=5124,ie=5125,oe=5126,ae=R(8,function(){return[]}),ue={alloc:P,free:z,allocType:function(t,e){var n=null;switch(t){case Jt:n=new Int8Array(P(e),0,e);break;case te:n=new Uint8Array(P(e),0,e);break;case ee:n=new Int16Array(P(2*e),0,e);break;case ne:n=new Uint16Array(P(2*e),0,e);break;case re:n=new Int32Array(P(4*e),0,e);break;case ie:n=new Uint32Array(P(4*e),0,e);break;case oe:n=new Float32Array(P(4*e),0,e);break;default:return null}return n.length!==e?n.subarray(0,e):n},freeType:function(t){z(t.buffer)}},se={shape:function(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e},flatten:function(t,e,n,r){var i=1;if(e.length)for(var o=0;o<e.length;++o)i*=e[o];else i=0;var a=r||ue.allocType(n,i);switch(e.length){case 0:break;case 1:B(t,e[0],a);break;case 2:I(t,e[0],e[1],a);break;case 3:q(t,e[0],e[1],e[2],a,0);break;default:U(t,e,0,a,0)}return a}},fe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ce={dynamic:35048,stream:35040,static:35044},le=se.flatten,he=se.shape,de=35044,pe=35040,me=5121,ge=5126,ye=[];ye[5120]=1,ye[5122]=2,ye[5124]=4,ye[5121]=1,ye[5123]=2,ye[5125]=4,ye[5126]=4;var ve={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},be=0,_e=1,xe=4,we=5120,Me=5121,Ee=5122,Se=5123,ke=5124,Ae=5125,Te=34963,Ce=35040,Ne=35044,Oe=new Float32Array(1),je=new Uint32Array(Oe.buffer),Re=5123,De=34467,Le=3553,Pe=34067,ze=34069,Be=6408,Ie=6406,qe=6407,Ue=6409,Fe=6410,He=32854,Ye=32855,We=36194,Xe=32819,Ge=32820,Ve=33635,$e=34042,Qe=6402,Ze=34041,Ke=35904,Je=35906,tn=36193,en=33776,nn=33777,rn=33778,on=33779,an=35986,un=35987,sn=34798,fn=35840,cn=35841,ln=35842,hn=35843,dn=36196,pn=5121,mn=5123,gn=5125,yn=5126,vn=10242,bn=10243,_n=10497,xn=33071,wn=33648,Mn=10240,En=10241,Sn=9728,kn=9729,An=9984,Tn=9985,Cn=9986,Nn=9987,On=33170,jn=4352,Rn=4353,Dn=4354,Ln=34046,Pn=3317,zn=37440,Bn=37441,In=37443,qn=37444,Un=33984,Fn=[An,Cn,Tn,Nn],Hn=[0,Ue,Fe,qe,Be],Yn={};Yn[Ue]=Yn[Ie]=Yn[Qe]=1,Yn[Ze]=Yn[Fe]=2,Yn[qe]=Yn[Ke]=3,Yn[Be]=Yn[Je]=4;var Wn=$("HTMLCanvasElement"),Xn=$("CanvasRenderingContext2D"),Gn=$("HTMLImageElement"),Vn=$("HTMLVideoElement"),$n=Object.keys(Ct).concat([Wn,Xn,Gn,Vn]),Qn=[];Qn[pn]=1,Qn[yn]=4,Qn[tn]=2,Qn[mn]=2,Qn[gn]=4;var Zn=[];Zn[He]=2,Zn[Ye]=2,Zn[We]=2,Zn[Ze]=4,Zn[en]=.5,Zn[nn]=.5,Zn[rn]=1,Zn[on]=1,Zn[an]=.5,Zn[un]=1,Zn[sn]=1,Zn[fn]=.5,Zn[cn]=.25,Zn[ln]=.5,Zn[hn]=.25,Zn[dn]=.5;var Kn=36161,Jn=32854,tr=[];tr[Jn]=2,tr[32855]=2,tr[36194]=2,tr[33189]=2,tr[36168]=1,tr[34041]=4,tr[35907]=4,tr[34836]=16,tr[34842]=8,tr[34843]=6;var er=function(t,e,n,r,i){function o(t){this.id=f++,this.refCount=1,this.renderbuffer=t,this.format=Jn,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function a(e){var n=e.renderbuffer;Wt(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(Kn,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete c[e.id],r.renderbufferCount--}var u={rgba4:Jn,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(u.srgba=35907),e.ext_color_buffer_half_float&&(u.rgba16f=34842,u.rgb16f=34843),e.webgl_color_buffer_float&&(u.rgba32f=34836);var s=[];Object.keys(u).forEach(function(t){var e=u[t];s[e]=t});var f=0,c={};return o.prototype.decRef=function(){--this.refCount<=0&&a(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(c).forEach(function(e){t+=c[e].stats.size}),t}),{create:function(e,a){function f(e,r){var o=0,a=0,c=Jn;if("object"==typeof e&&e){var h=e;if("shape"in h){var d=h.shape;Wt(Array.isArray(d)&&d.length>=2,"invalid renderbuffer shape"),o=0|d[0],a=0|d[1]}else"radius"in h&&(o=a=0|h.radius),"width"in h&&(o=0|h.width),"height"in h&&(a=0|h.height);"format"in h&&(Wt.parameter(h.format,u,"invalid renderbuffer format"),c=u[h.format])}else"number"==typeof e?(o=0|e,a="number"==typeof r?0|r:o):e?Wt.raise("invalid arguments to renderbuffer constructor"):o=a=1;if(Wt(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),o!==l.width||a!==l.height||c!==l.format)return f.width=l.width=o,f.height=l.height=a,l.format=c,t.bindRenderbuffer(Kn,l.renderbuffer),t.renderbufferStorage(Kn,c,o,a),i.profile&&(l.stats.size=lt(l.format,l.width,l.height)),f.format=s[l.format],f}var l=new o(t.createRenderbuffer());return c[l.id]=l,r.renderbufferCount++,f(e,a),f.resize=function(e,r){var o=0|e,a=0|r||o;return o===l.width&&a===l.height?f:(Wt(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),f.width=l.width=o,f.height=l.height=a,t.bindRenderbuffer(Kn,l.renderbuffer),t.renderbufferStorage(Kn,l.format,o,a),i.profile&&(l.stats.size=lt(l.format,l.width,l.height)),f)},f._reglType="renderbuffer",f._renderbuffer=l,i.profile&&(f.stats=l.stats),f.destroy=function(){l.decRef()},f},clear:function(){Kt(c).forEach(a)},restore:function(){Kt(c).forEach(function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(Kn,e.renderbuffer),t.renderbufferStorage(Kn,e.format,e.width,e.height)}),t.bindRenderbuffer(Kn,null)}}},nr=36160,rr=36161,ir=3553,or=34069,ar=36064,ur=36096,sr=36128,fr=33306,cr=36053,lr=6402,hr=[6408],dr=[];dr[6408]=4;var pr=[];pr[5121]=1,pr[5126]=4,pr[36193]=2;var mr=33189,gr=36168,yr=34041,vr=[32854,32855,36194,35907,34842,34843,34836],br={};br[cr]="complete",br[36054]="incomplete attachment",br[36057]="incomplete dimensions",br[36055]="incomplete, missing attachment",br[36061]="unsupported";var _r=5126,xr=35632,wr=35633,Mr=35718,Er=35721,Sr=6408,kr=5121,Ar=3333,Tr=5126,Cr="xyzw".split(""),Nr=5121,Or=1,jr=2,Rr=0,Dr=1,Lr=2,Pr=3,zr=4,Br="dither",Ir="blend.enable",qr="blend.color",Ur="blend.equation",Fr="blend.func",Hr="depth.enable",Yr="depth.func",Wr="depth.range",Xr="depth.mask",Gr="colorMask",Vr="cull.enable",$r="cull.face",Qr="frontFace",Zr="lineWidth",Kr="polygonOffset.enable",Jr="polygonOffset.offset",ti="sample.alpha",ei="sample.enable",ni="sample.coverage",ri="stencil.enable",ii="stencil.mask",oi="stencil.func",ai="stencil.opFront",ui="stencil.opBack",si="scissor.enable",fi="scissor.box",ci="viewport",li="profile",hi="framebuffer",di="vert",pi="frag",mi="elements",gi="primitive",yi="count",vi="offset",bi="instances",_i=hi+"Width",xi=hi+"Height",wi=ci+"Width",Mi=ci+"Height",Ei="drawingBufferWidth",Si="drawingBufferHeight",ki=[Fr,Ur,oi,ai,ui,ni,ci,fi,Jr],Ai=34962,Ti=34963,Ci=3553,Ni=34067,Oi=2884,ji=3042,Ri=3024,Di=2960,Li=2929,Pi=3089,zi=32823,Bi=32926,Ii=32928,qi=5126,Ui=35664,Fi=35665,Hi=35666,Yi=5124,Wi=35667,Xi=35668,Gi=35669,Vi=35670,$i=35671,Qi=35672,Zi=35673,Ki=35674,Ji=35675,to=35676,eo=35678,no=35680,ro=4,io=1028,oo=1029,ao=2304,uo=2305,so=32775,fo=32776,co=519,lo=7680,ho=0,po=1,mo=32774,go=513,yo=36160,vo=36064,bo={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},_o=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],xo={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},wo={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Mo={frag:35632,vert:35633},Eo={cw:ao,ccw:uo},So=new wt(!1,!1,!1,function(){}),ko=34918,Ao=34919,To=35007,Co=function(t,e){function n(){return f.pop()||s.createQueryEXT()}function r(t){f.push(t)}function i(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}function o(){return l.pop()||new i}function a(t){l.push(t)}function u(t,e,n){var r=o();r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,h.push(r)}var s=e.ext_disjoint_timer_query;if(!s)return null;var f=[],c=[],l=[],h=[],d=[],p=[];return{beginQuery:function(t){var e=n();s.beginQueryEXT(To,e),c.push(e),u(c.length-1,c.length,t)},endQuery:function(){s.endQueryEXT(To)},pushScopeStats:u,update:function(){var t,e,n=c.length;if(0!==n){p.length=Math.max(p.length,n+1),d.length=Math.max(d.length,n+1),d[0]=0,p[0]=0;var i=0;for(t=0,e=0;e<c.length;++e){var o=c[e];s.getQueryObjectEXT(o,Ao)?(i+=s.getQueryObjectEXT(o,ko),r(o)):c[t++]=o,d[e+1]=i,p[e+1]=t}for(c.length=t,t=0,e=0;e<h.length;++e){var u=h[e],f=u.startQueryIndex,l=u.endQueryIndex;u.sum+=d[l]-d[f];var m=p[f],g=p[l];g===m?(u.stats.gpuTime+=u.sum/1e6,a(u)):(u.startQueryIndex=m,u.endQueryIndex=g,h[t++]=u)}h.length=t}},getNumPendingQueries:function(){return c.length},clear:function(){f.push.apply(f,c);for(var t=0;t<f.length;t++)s.deleteQueryEXT(f[t]);c.length=0,f.length=0},restore:function(){c.length=0,f.length=0}}},No=16384,Oo=256,jo=1024,Ro=34962,Do="webglcontextlost",Lo="webglcontextrestored",Po=1,zo=2,Bo=3;return function(t){function e(){if(0===U.length)return x&&x.update(),void(G=null);G=$t.next(e),c();for(var t=U.length-1;t>=0;--t){var n=U[t];n&&n(k,null,0)}p.flush(),x&&x.update()}function n(){!G&&U.length>0&&(G=$t.next(e))}function r(){G&&($t.cancel(e),G=null)}function i(t){t.preventDefault(),g=!0,r(),F.forEach(function(t){t()})}function o(t){p.getError(),g=!1,y.restore(),R.restore(),T.restore(),D.restore(),L.restore(),P.restore(),x&&x.restore(),z.procs.refresh(),n(),H.forEach(function(t){t()})}function a(t){function e(t){var e={},n={};return Object.keys(t).forEach(function(r){var i=t[r];Vt.isDynamic(i)?n[r]=Vt.unbox(i,r):e[r]=i}),{dynamic:n,static:e}}function n(t){for(;h.length<t;)h.push(null);return h}Wt(!!t,"invalid args to regl({...})"),Wt.type(t,"object","invalid args to regl({...})");var r=e(t.context||{}),i=e(t.uniforms||{}),o=e(t.attributes||{}),a=e(function(t){function e(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach(function(r){n[t+"."+r]=e[r]})}}var n=Ot({},t);return delete n.uniforms,delete n.attributes,delete n.context,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),e("blend"),e("depth"),e("cull"),e("stencil"),e("polygonOffset"),e("scissor"),e("sample"),n}(t)),u={gpuTime:0,cpuTime:0,count:0},s=z.compile(a,o,i,r,u),f=s.draw,c=s.batch,l=s.scope,h=[];return Ot(function(t,e){var r;if(g&&Wt.raise("context lost"),"function"==typeof t)return l.call(this,null,t,0);if("function"==typeof e){if("number"==typeof t){for(r=0;r<t;++r)l.call(this,null,e,r);return}if(Array.isArray(t)){for(r=0;r<t.length;++r)l.call(this,t[r],e,r);return}return l.call(this,t,e,0)}if("number"==typeof t){if(t>0)return c.call(this,n(0|t),0|t)}else{if(!Array.isArray(t))return f.call(this,t);if(t.length)return c.call(this,t,t.length)}},{stats:u})}function u(t,e){var n=0;z.procs.poll();var r=e.color;r&&(p.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=No),"depth"in e&&(p.clearDepth(+e.depth),n|=Oo),"stencil"in e&&(p.clearStencil(0|e.stencil),n|=jo),Wt(!!n,"called regl.clear with no buffer specified"),p.clear(n)}function s(t){return Wt.type(t,"function","regl.frame() callback must be a function"),U.push(t),n(),{cancel:function(){function e(){var t=Tt(U,e);U[t]=U[U.length-1],U.length-=1,U.length<=0&&r()}var n=Tt(U,t);Wt(n>=0,"cannot cancel a frame twice"),U[n]=e}}}function f(){var t=I.viewport,e=I.scissor_box;t[0]=t[1]=e[0]=e[1]=0,k.viewportWidth=k.framebufferWidth=k.drawingBufferWidth=t[2]=e[2]=p.drawingBufferWidth,k.viewportHeight=k.framebufferHeight=k.drawingBufferHeight=t[3]=e[3]=p.drawingBufferHeight}function c(){k.tick+=1,k.time=h(),f(),z.procs.poll()}function l(){f(),z.procs.refresh(),x&&x.update()}function h(){return(Qt()-w)/1e3}var d=N(t);if(!d)return null;var p=d.gl,m=p.getContextAttributes(),g=p.isContextLost(),y=O(p,d);if(!y)return null;var v=M(),b=At(),_=y.extensions,x=Co(p,_),w=Qt(),E=p.drawingBufferWidth,S=p.drawingBufferHeight,k={tick:0,time:0,viewportWidth:E,viewportHeight:S,framebufferWidth:E,framebufferHeight:S,drawingBufferWidth:E,drawingBufferHeight:S,pixelRatio:d.pixelRatio},A=Zt(p,_),T=W(p,b,d),C=X(p,_,T,b),j=pt(p,_,A,T,v),R=mt(p,v,b,d),D=ct(p,_,A,function(){z.procs.poll()},k,b,d),L=er(p,_,A,b,d),P=ht(p,_,A,D,L,b),z=kt(p,v,_,A,T,C,D,P,{},j,R,{elements:null,primitive:4,count:-1,offset:0,instances:-1},k,x,d),B=gt(p,P,z.procs.poll,k,m,_),I=z.next,q=p.canvas,U=[],F=[],H=[],Y=[d.onDestroy],G=null;q&&(q.addEventListener(Do,i,!1),q.addEventListener(Lo,o,!1));var V=P.setFBO=a({framebuffer:Vt.define.call(null,Po,"framebuffer")});l();var $=Ot(a,{clear:function(t){if(Wt("object"==typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var e=0;e<6;++e)V(Ot({framebuffer:t.framebuffer.faces[e]},t),u);else V(t,u);else u(null,t)},prop:Vt.define.bind(null,Po),context:Vt.define.bind(null,zo),this:Vt.define.bind(null,Bo),draw:a({}),buffer:function(t){return T.create(t,Ro,!1,!1)},elements:function(t){return C.create(t,!1)},texture:D.create2D,cube:D.createCube,renderbuffer:L.create,framebuffer:P.create,framebufferCube:P.createCube,attributes:m,frame:s,on:function(t,e){Wt.type(e,"function","listener callback must be a function");var n;switch(t){case"frame":return s(e);case"lost":n=F;break;case"restore":n=H;break;case"destroy":n=Y;break;default:Wt.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}},limits:A,hasExtension:function(t){return A.extensions.indexOf(t.toLowerCase())>=0},read:B,destroy:function(){U.length=0,r(),q&&(q.removeEventListener(Do,i),q.removeEventListener(Lo,o)),R.clear(),P.clear(),L.clear(),D.clear(),C.clear(),T.clear(),x&&x.clear(),Y.forEach(function(t){t()})},_gl:p,_refresh:l,poll:function(){c(),x&&x.update()},now:h,stats:b});return d.onDone(null,$),$}})},{}],60:[function(t,e,n){function r(t,e){for(var n in t)e[n]=t[n]}function i(t,e,n){return a(t,e,n)}var o=t("buffer"),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=o:(r(o,n),n.Buffer=i),r(a,i),i.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return a(t,e,n)},i.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=a(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},i.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return a(t)},i.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o.SlowBuffer(t)}},{buffer:4}],61:[function(t,e,n){(function(e){var r=t("./lib/request"),i=t("xtend"),o=t("builtin-status-codes"),a=t("url"),u=n;u.request=function(t,n){t="string"==typeof t?a.parse(t):i(t);var o=-1===e.location.protocol.search(/^https?:$/)?"http:":"",u=t.protocol||o,s=t.hostname||t.host,f=t.port,c=t.path||"/";s&&-1!==s.indexOf(":")&&(s="["+s+"]"),t.url=(s?u+"//"+s:"")+(f?":"+f:"")+c,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var l=new r(t);return n&&l.on("response",n),l},u.get=function(t,e){var n=u.request(t,e);return n.end(),n},u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.STATUS_CODES=o,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":63,"builtin-status-codes":5,url:67,xtend:71}],62:[function(t,e,n){(function(t){function e(){if(void 0!==o)return o;if(t.XMLHttpRequest){o=new t.XMLHttpRequest;try{o.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){o=null}}else o=null;return o}function r(t){var n=e();if(!n)return!1;try{return n.responseType=t,n.responseType===t}catch(t){}return!1}function i(t){return"function"==typeof t}n.fetch=i(t.fetch)&&i(t.ReadableStream),n.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),n.blobConstructor=!0}catch(t){}var o,a=void 0!==t.ArrayBuffer,u=a&&i(t.ArrayBuffer.prototype.slice);n.arraybuffer=n.fetch||a&&r("arraybuffer"),n.msstream=!n.fetch&&u&&r("ms-stream"),n.mozchunkedarraybuffer=!n.fetch&&a&&r("moz-chunked-arraybuffer"),n.overrideMimeType=n.fetch||!!e()&&i(e().overrideMimeType),n.vbArray=i(t.VBArray),o=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],63:[function(t,e,n){(function(n,r,i){function o(t,e){return u.fetch&&e?"fetch":u.mozchunkedarraybuffer?"moz-chunked-arraybuffer":u.msstream?"ms-stream":u.arraybuffer&&t?"arraybuffer":u.vbArray&&t?"text:vbarray":"text"}function a(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}}var u=t("./capability"),s=t("inherits"),f=t("./response"),c=t("readable-stream"),l=t("to-arraybuffer"),h=f.IncomingMessage,d=f.readyStates,p=e.exports=function(t){var e=this;c.Writable.call(e),e._opts=t,e._body=[],e._headers={},t.auth&&e.setHeader("Authorization","Basic "+new i(t.auth).toString("base64")),Object.keys(t.headers).forEach(function(n){e.setHeader(n,t.headers[n])});var n,r=!0;if("disable-fetch"===t.mode||"timeout"in t)r=!1,n=!0;else if("prefer-streaming"===t.mode)n=!1;else if("allow-wrong-content-type"===t.mode)n=!u.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");n=!0}e._mode=o(n,r),e.on("finish",function(){e._onFinish()})};s(p,c.Writable),p.prototype.setHeader=function(t,e){var n=this,r=t.toLowerCase();-1===m.indexOf(r)&&(n._headers[r]={name:t,value:e})},p.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},p.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},p.prototype._onFinish=function(){var t=this;if(!t._destroyed){var e=t._opts,o=t._headers,a=null;"GET"!==e.method&&"HEAD"!==e.method&&(a=u.blobConstructor?new r.Blob(t._body.map(function(t){return l(t)}),{type:(o["content-type"]||{}).value||""}):i.concat(t._body).toString());var s=[];if(Object.keys(o).forEach(function(t){var e=o[t].name,n=o[t].value;Array.isArray(n)?n.forEach(function(t){s.push([e,t])}):s.push([e,n])}),"fetch"===t._mode)r.fetch(t._opts.url,{method:t._opts.method,headers:s,body:a||void 0,mode:"cors",credentials:e.withCredentials?"include":"same-origin"}).then(function(e){t._fetchResponse=e,t._connect()},function(e){t.emit("error",e)});else{var f=t._xhr=new r.XMLHttpRequest;try{f.open(t._opts.method,t._opts.url,!0)}catch(e){return void n.nextTick(function(){t.emit("error",e)})}"responseType"in f&&(f.responseType=t._mode.split(":")[0]),"withCredentials"in f&&(f.withCredentials=!!e.withCredentials),"text"===t._mode&&"overrideMimeType"in f&&f.overrideMimeType("text/plain; charset=x-user-defined"),"timeout"in e&&(f.timeout=e.timeout,f.ontimeout=function(){t.emit("timeout")}),s.forEach(function(t){f.setRequestHeader(t[0],t[1])}),t._response=null,f.onreadystatechange=function(){switch(f.readyState){case d.LOADING:case d.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(f.onprogress=function(){t._onXHRProgress()}),f.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{f.send(a)}catch(e){return void n.nextTick(function(){t.emit("error",e)})}}}},p.prototype._onXHRProgress=function(){var t=this;a(t._xhr)&&!t._destroyed&&(t._response||t._connect(),t._response._onXHRProgress())},p.prototype._connect=function(){var t=this;t._destroyed||(t._response=new h(t._xhr,t._fetchResponse,t._mode),t._response.on("error",function(e){t.emit("error",e)}),t.emit("response",t._response))},p.prototype._write=function(t,e,n){this._body.push(t),n()},p.prototype.abort=p.prototype.destroy=function(){var t=this;t._destroyed=!0,t._response&&(t._response._destroyed=!0),t._xhr&&t._xhr.abort()},p.prototype.end=function(t,e,n){var r=this;"function"==typeof t&&(n=t,t=void 0),c.Writable.prototype.end.call(r,t,e,n)},p.prototype.flushHeaders=function(){},p.prototype.setTimeout=function(){},p.prototype.setNoDelay=function(){},p.prototype.setSocketKeepAlive=function(){};var m=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{"./capability":62,"./response":64,_process:45,buffer:4,inherits:41,"readable-stream":58,"to-arraybuffer":66}],64:[function(t,e,n){(function(e,r,i){var o=t("./capability"),a=t("inherits"),u=t("readable-stream"),s=n.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},f=n.IncomingMessage=function(t,n,r){function a(){f.read().then(function(t){s._destroyed||(t.done?s.push(null):(s.push(new i(t.value)),a()))}).catch(function(t){s.emit("error",t)})}var s=this;if(u.Readable.call(s),s._mode=r,s.headers={},s.rawHeaders=[],s.trailers={},s.rawTrailers=[],s.on("end",function(){e.nextTick(function(){s.emit("close")})}),"fetch"===r){s._fetchResponse=n,s.url=n.url,s.statusCode=n.status,s.statusMessage=n.statusText,n.headers.forEach(function(t,e){s.headers[e.toLowerCase()]=t,s.rawHeaders.push(e,t)});var f=n.body.getReader();a()}else if(s._xhr=t,s._pos=0,s.url=t.responseURL,s.statusCode=t.status,s.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach(function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var n=e[1].toLowerCase();"set-cookie"===n?(void 0===s.headers[n]&&(s.headers[n]=[]),s.headers[n].push(e[2])):void 0!==s.headers[n]?s.headers[n]+=", "+e[2]:s.headers[n]=e[2],s.rawHeaders.push(e[1],e[2])}}),s._charset="x-user-defined",!o.overrideMimeType){var c=s.rawHeaders["mime-type"];if(c){var l=c.match(/;\s*charset=([^;])(;|$)/);l&&(s._charset=l[1].toLowerCase())}s._charset||(s._charset="utf-8")}};a(f,u.Readable),f.prototype._read=function(){},f.prototype._onXHRProgress=function(){var t=this,e=t._xhr,n=null;switch(t._mode){case"text:vbarray":if(e.readyState!==s.DONE)break;try{n=new r.VBArray(e.responseBody).toArray()}catch(t){}if(null!==n){t.push(new i(n));break}case"text":try{n=e.responseText}catch(e){t._mode="text:vbarray";break}if(n.length>t._pos){var o=n.substr(t._pos);if("x-user-defined"===t._charset){for(var a=new i(o.length),u=0;u<o.length;u++)a[u]=255&o.charCodeAt(u);t.push(a)}else t.push(o,t._charset);t._pos=n.length}break;case"arraybuffer":if(e.readyState!==s.DONE||!e.response)break;n=e.response,t.push(new i(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=e.response,e.readyState!==s.LOADING||!n)break;t.push(new i(new Uint8Array(n)));break;case"ms-stream":if(n=e.response,e.readyState!==s.LOADING)break;var f=new r.MSStreamReader;f.onprogress=function(){f.result.byteLength>t._pos&&(t.push(new i(new Uint8Array(f.result.slice(t._pos)))),t._pos=f.result.byteLength)},f.onload=function(){t.push(null)},f.readAsArrayBuffer(n)}t._xhr.readyState===s.DONE&&"ms-stream"!==t._mode&&t.push(null)}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{"./capability":62,_process:45,buffer:4,inherits:41,"readable-stream":58}],65:[function(t,e,n){"use strict";function r(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(t){var e=r(t);if("string"!=typeof e&&(g.isEncoding===y||!y(t)))throw new Error("Unknown encoding: "+t);return e||t}function o(t){this.encoding=i(t);var e;switch(this.encoding){case"utf16le":this.text=c,this.end=l,e=4;break;case"utf8":this.fillLast=f,e=4;break;case"base64":this.text=h,this.end=d,e=3;break;default:return this.write=p,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=g.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:-1}function u(t,e,n){var r=e.length-1;if(r<n)return 0;var i=a(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n?0:(i=a(e[r]))>=0?(i>0&&(t.lastNeed=i-2),i):--r<n?0:(i=a(e[r]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}function s(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"".repeat(n);if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"".repeat(n+1);if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"".repeat(n+2)}}function f(t){var e=this.lastTotal-this.lastNeed,n=s(this,t,e);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function c(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function h(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function d(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(t){return t.toString(this.encoding)}function m(t){return t&&t.length?this.write(t):""}var g=t("safe-buffer").Buffer,y=g.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"".repeat(this.lastTotal-this.lastNeed):e},o.prototype.text=function(t,e){var n=u(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":60}],66:[function(t,e,n){var r=t("buffer").Buffer;e.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(r.isBuffer(t)){for(var e=new Uint8Array(t.length),n=t.length,i=0;i<n;i++)e[i]=t[i];return e.buffer}throw new Error("Argument must be a Buffer")}},{buffer:4}],67:[function(t,e,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,n){if(t&&a.isObject(t)&&t instanceof r)return t;var i=new r;return i.parse(t,e,n),i}var o=t("punycode"),a=t("./util");n.parse=i,n.resolve=function(t,e){return i(t,!1,!0).resolve(e)},n.resolveObject=function(t,e){return t?i(t,!1,!0).resolveObject(e):e},n.format=function(t){return a.isString(t)&&(t=i(t)),t instanceof r?t.format():r.prototype.format.call(t)},n.Url=r;var u=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["'"].concat(["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"])),l=["%","/","?",";","#"].concat(c),h=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=t("querystring");r.prototype.parse=function(t,e,n){if(!a.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=-1!==r&&r<t.indexOf("#")?"?":"#",s=t.split(i);s[0]=s[0].replace(/\\/g,"/");var b=t=s.join(i);if(b=b.trim(),!n&&1===t.split("#").length){var _=f.exec(b);if(_)return this.path=b,this.href=b,this.pathname=_[1],_[2]?(this.search=_[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=u.exec(b);if(x){var w=(x=x[0]).toLowerCase();this.protocol=w,b=b.substr(x.length)}if(n||x||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var M="//"===b.substr(0,2);!M||x&&g[x]||(b=b.substr(2),this.slashes=!0)}if(!g[x]&&(M||x&&!y[x])){for(var E=-1,S=0;S<h.length;S++)-1!==(T=b.indexOf(h[S]))&&(-1===E||T<E)&&(E=T);var k,A;-1!==(A=-1===E?b.lastIndexOf("@"):b.lastIndexOf("@",E))&&(k=b.slice(0,A),b=b.slice(A+1),this.auth=decodeURIComponent(k)),E=-1;for(S=0;S<l.length;S++){var T=b.indexOf(l[S]);-1!==T&&(-1===E||T<E)&&(E=T)}-1===E&&(E=b.length),this.host=b.slice(0,E),b=b.slice(E),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var N=this.hostname.split(/\./),S=0,O=N.length;S<O;S++){var j=N[S];if(j&&!j.match(d)){for(var R="",D=0,L=j.length;D<L;D++)j.charCodeAt(D)>127?R+="x":R+=j[D];if(!R.match(d)){var P=N.slice(0,S),z=N.slice(S+1),B=j.match(p);B&&(P.push(B[1]),z.unshift(B[2])),z.length&&(b="/"+z.join(".")+b),this.hostname=P.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=o.toASCII(this.hostname));var I=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+I,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!m[w])for(var S=0,O=c.length;S<O;S++){var U=c[S];if(-1!==b.indexOf(U)){var F=encodeURIComponent(U);F===U&&(F=escape(U)),b=b.split(U).join(F)}}var H=b.indexOf("#");-1!==H&&(this.hash=b.substr(H),b=b.slice(0,H));var Y=b.indexOf("?");if(-1!==Y?(this.search=b.substr(Y),this.query=b.substr(Y+1),e&&(this.query=v.parse(this.query)),b=b.slice(0,Y)):e&&(this.search="",this.query={}),b&&(this.pathname=b),y[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var I=this.pathname||"",W=this.search||"";this.path=I+W}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(o=v.stringify(this.query));var u=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),u&&"?"!==u.charAt(0)&&(u="?"+u),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),u=u.replace("#","%23"),e+i+n+u+r},r.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(a.isString(t)){var e=new r;e.parse(t,!1,!0),t=e}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var u=i[o];n[u]=this[u]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),f=0;f<s.length;f++){var c=s[f];"protocol"!==c&&(n[c]=t[c])}return y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!y[t.protocol]){for(var l=Object.keys(t),h=0;h<l.length;h++){var d=l[h];n[d]=t[d]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||g[t.protocol])n.pathname=t.pathname;else{for(M=(t.pathname||"").split("/");M.length&&!(t.host=M.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==M[0]&&M.unshift(""),M.length<2&&M.unshift(""),n.pathname=M.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var p=n.pathname||"",m=n.search||"";n.path=p+m}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=b||v||n.host&&t.pathname,x=_,w=n.pathname&&n.pathname.split("/")||[],M=t.pathname&&t.pathname.split("/")||[],E=n.protocol&&!y[n.protocol];if(E&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===M[0]?M[0]=t.host:M.unshift(t.host)),t.host=null),_=_&&(""===M[0]||""===w[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,w=M;else if(M.length)w||(w=[]),w.pop(),w=w.concat(M),n.search=t.search,n.query=t.query;else if(!a.isNullOrUndefined(t.search))return E&&(n.hostname=n.host=w.shift(),(N=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=N.shift(),n.host=n.hostname=N.shift())),n.search=t.search,n.query=t.query,a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=w.slice(-1)[0],k=(n.host||t.host||w.length>1)&&("."===S||".."===S)||""===S,A=0,T=w.length;T>=0;T--)"."===(S=w[T])?w.splice(T,1):".."===S?(w.splice(T,1),A++):A&&(w.splice(T,1),A--);if(!_&&!x)for(;A--;A)w.unshift("..");!_||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),k&&"/"!==w.join("/").substr(-1)&&w.push("");var C=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(E){n.hostname=n.host=C?"":w.length?w.shift():"";var N=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");N&&(n.auth=N.shift(),n.host=n.hostname=N.shift())}return(_=_||n.host&&w.length)&&!C&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":68,punycode:46,querystring:49}],68:[function(t,e,n){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],69:[function(t,e,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(t){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],70:[function(t,e,n){(function(e,r){var i=t("url"),o=t("child_process").spawn,a=t("fs");n.XMLHttpRequest=function(){"use strict";var n,u,s=this,f=t("http"),c=t("https"),l={},h=!1,d={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},p={},m={},g=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],y=["TRACE","TRACK","CONNECT"],v=!1,b=!1,_={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.withCredentials=!1;var x=function(t){return h||t&&-1===g.indexOf(t.toLowerCase())},w=function(t){return t&&-1===y.indexOf(t)};this.open=function(t,e,n,r,i){if(this.abort(),b=!1,!w(t))throw new Error("SecurityError: Request method not allowed");l={method:t,url:e.toString(),async:"boolean"!=typeof n||n,user:r||null,password:i||null},M(this.OPENED)},this.setDisableHeaderCheck=function(t){h=t},this.setRequestHeader=function(t,e){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(x(t)){if(v)throw new Error("INVALID_STATE_ERR: send flag is true");t=m[t.toLowerCase()]||t,m[t.toLowerCase()]=t,p[t]=p[t]?p[t]+", "+e:e}else console.warn('Refused to set unsafe header "'+t+'"')},this.getResponseHeader=function(t){return"string"==typeof t&&this.readyState>this.OPENED&&u&&u.headers&&u.headers[t.toLowerCase()]&&!b?u.headers[t.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||b)return"";var t="";for(var e in u.headers)"set-cookie"!==e&&"set-cookie2"!==e&&(t+=e+": "+u.headers[e]+"\r\n");return t.substr(0,t.length-2)},this.getRequestHeader=function(t){return"string"==typeof t&&m[t.toLowerCase()]?p[m[t.toLowerCase()]]:""},this.send=function(t){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(v)throw new Error("INVALID_STATE_ERR: send has already been called");var h,g=!1,y=!1,_=i.parse(l.url);switch(_.protocol){case"https:":g=!0;case"http:":h=_.hostname;break;case"file:":y=!0;break;case void 0:case null:case"":h="localhost";break;default:throw new Error("Protocol not supported.")}if(y){if("GET"!==l.method)throw new Error("XMLHttpRequest: Only GET method is supported");if(l.async)a.readFile(_.pathname,"utf8",function(t,e){t?s.handleError(t):(s.status=200,s.responseText=e,M(s.DONE))});else try{this.responseText=a.readFileSync(_.pathname,"utf8"),this.status=200,M(s.DONE)}catch(t){this.handleError(t)}}else{var x=_.port||(g?443:80),w=_.pathname+(_.search?_.search:"");for(var E in d)m[E.toLowerCase()]||(p[E]=d[E]);if(p.Host=h,g&&443===x||80===x||(p.Host+=":"+_.port),l.user){void 0===l.password&&(l.password="");var S=new r(l.user+":"+l.password);p.Authorization="Basic "+S.toString("base64")}"GET"===l.method||"HEAD"===l.method?t=null:t?(p["Content-Length"]=r.isBuffer(t)?t.length:r.byteLength(t),p["Content-Type"]||(p["Content-Type"]="text/plain;charset=UTF-8")):"POST"===l.method&&(p["Content-Length"]=0);var k={host:h,port:x,path:w,method:l.method,headers:p,agent:!1,withCredentials:s.withCredentials};if(b=!1,l.async){var A=g?c.request:f.request;v=!0,s.dispatchEvent("readystatechange");var T=function(t){s.handleError(t)};n=A(k,function t(e){if(301!==(u=e).statusCode&&302!==u.statusCode&&303!==u.statusCode&&307!==u.statusCode)u.setEncoding("utf8"),M(s.HEADERS_RECEIVED),s.status=u.statusCode,u.on("data",function(t){t&&(s.responseText+=t),v&&M(s.LOADING)}),u.on("end",function(){v&&(M(s.DONE),v=!1)}),u.on("error",function(t){s.handleError(t)});else{l.url=u.headers.location;var r=i.parse(l.url);h=r.hostname;var o={hostname:r.hostname,port:r.port,path:r.path,method:303===u.statusCode?"GET":l.method,headers:p,withCredentials:s.withCredentials};(n=A(o,t).on("error",T)).end()}}).on("error",T),t&&n.write(t),n.end(),s.dispatchEvent("loadstart")}else{var C=".node-xmlhttprequest-content-"+e.pid,N=".node-xmlhttprequest-sync-"+e.pid;a.writeFileSync(N,"","utf8");for(var O="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(g?"s":"")+".request;var options = "+JSON.stringify(k)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+C+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');fs.unlinkSync('"+N+"');});response.on('error', function(error) {fs.writeFileSync('"+C+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+N+"');});}).on('error', function(error) {fs.writeFileSync('"+C+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+N+"');});"+(t?"req.write('"+JSON.stringify(t).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",j=o(e.argv[0],["-e",O]);a.existsSync(N););var R=JSON.parse(a.readFileSync(C,"utf8"));j.stdin.end(),a.unlinkSync(C),R.err?s.handleError(R.err):(u=R.data,s.status=R.data.statusCode,s.responseText=R.data.text,M(s.DONE))}}},this.handleError=function(t){this.status=0,this.statusText=t,this.responseText=t.stack,b=!0,M(this.DONE),this.dispatchEvent("error")},this.abort=function(){n&&(n.abort(),n=null),p=d,this.status=0,this.responseText="",this.responseXML="",b=!0,this.readyState===this.UNSENT||this.readyState===this.OPENED&&!v||this.readyState===this.DONE||(v=!1,M(this.DONE)),this.readyState=this.UNSENT,this.dispatchEvent("abort")},this.addEventListener=function(t,e){t in _||(_[t]=[]),_[t].push(e)},this.removeEventListener=function(t,e){t in _&&(_[t]=_[t].filter(function(t){return t!==e}))},this.dispatchEvent=function(t){if("function"==typeof s["on"+t]&&s["on"+t](),t in _)for(var e=0,n=_[t].length;e<n;e++)_[t][e].call(s)};var M=function(t){t!=s.LOADING&&s.readyState===t||(s.readyState=t,(l.async||s.readyState<s.OPENED||s.readyState===s.DONE)&&s.dispatchEvent("readystatechange"),s.readyState!==s.DONE||b||(s.dispatchEvent("load"),s.dispatchEvent("loadend")))}}}).call(this,t("_process"),t("buffer").Buffer)},{_process:45,buffer:4,child_process:3,fs:3,http:61,https:39,url:67}],71:[function(t,e,n){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t};var r=Object.prototype.hasOwnProperty},{}],72:[function(t,e,n){"use strict";for(var r=t("d3"),i=t("regl")({container:document.getElementsByClassName("regl-container")[0]}),o={width:10,margin:1,position:[],color:[]},a=1e3/o.width,u=r.scaleLinear().range([-1,1]).domain([0,1e3]),s=0;s<7384;s++){var f=[],c=s%a*o.width+o.width/2-1;f.push(u(c));var l=Math.floor(s/a)*o.width+o.width/2-1;f.push(-u(l)),o.position.push(f),s<3300?o.color.push([0,0,1,1]):s<3419?o.color.push([.7,.7,.7,1]):o.color.push([1,0,0,1])}var h=i({vert:"\n  precision mediump float;\n  attribute vec2 position;\n  attribute vec4 color;\n  varying vec4 fragColor;\n  uniform float pointWidth;\n  void main () {\n    gl_PointSize = pointWidth;\n    gl_Position = vec4(position, 0, 1);\n    fragColor = color;\n  }",frag:"\n  precision mediump float;\n  varying vec4 fragColor;\n  void main () {\n    gl_FragColor = fragColor;\n  }",attributes:{position:function(t,e){return e.position},color:function(t,e){return e.color}},uniforms:{pointWidth:o.width*window.devicePixelRatio-o.margin*window.devicePixelRatio*2},count:7384,primitive:"points"});h({position:o.position,color:o.color}),r.select("body").on("click",function(){o.color.forEach(function(t){t[3]=t[3]-Math.random()/15,t[3]<0&&(t[3]=0)}),h({position:o.position,color:o.color})})},{d3:37,regl:59}]},{},[72]);